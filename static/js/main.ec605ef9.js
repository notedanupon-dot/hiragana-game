/*! For license information please see main.ec605ef9.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,n){var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var x=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var I=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case _:return"Profiler";case v:return"StrictMode";case C:return"Suspense";case E:return"SuspenseList";case x:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return P(e(t))}catch(Ci){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},j=[],F=-1;function V(e){return{current:e}}function z(e){0>F||(e.current=j[F],j[F]=null,F--)}function U(e,t){F++,j[F]=e.current,e.current=t}var q,B,H=V(null),W=V(null),K=V(null),G=V(null);function Q(e,t){switch(U(K,t),U(W,e),U(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=_h(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(H),U(H,e)}function Y(){z(H),z(W),z(K)}function $(e){null!==e.memoizedState&&U(G,e);var t=H.current,n=_h(t,e.type);t!==n&&(U(W,e),U(H,n))}function X(e){W.current===e&&(z(H),z(W)),G.current===e&&(z(G),hd._currentValue=M)}function J(e){if(void 0===q)try{throw Error()}catch(Ci){var t=Ci.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||"",B=-1<Ci.stack.indexOf("\n    at")?" (<anonymous>)":-1<Ci.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+q+e+B}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ci){var r=Ci}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Ci){return"\nError generating stack: "+Ci.message+"\n"+Ci.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,oe=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function _e(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(we(e)/Se|0)|0},we=Math.log,Se=Math.LN2;var Ce=256,Ee=262144,ke=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=Te(r):0!==(o&=a)?i=Te(o):n||0!==(n=a&~e)&&(i=Te(n)):0!==(a=r&~s)?i=Te(a):0!==o?i=Te(o):n||0!==(n=r&~e)&&(i=Te(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function Ie(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Re(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Me(n))&(e.suspendedLanes|t))?0:n}function Me(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:xd(e.type)}function Ve(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var ze=Math.random().toString(36).slice(2),Ue="__reactFiber$"+ze,qe="__reactProps$"+ze,Be="__reactContainer$"+ze,He="__reactEvents$"+ze,We="__reactListeners$"+ze,Ke="__reactHandles$"+ze,Ge="__reactResources$"+ze,Qe="__reactMarker$"+ze;function Ye(e){delete e[Ue],delete e[qe],delete e[He],delete e[We],delete e[Ke]}function $e(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Be]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=jh(e);null!==e;){if(n=e[Ue])return n;e=jh(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[Ue]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},at={};function lt(e,t,n){if(i=t,re.call(at,i)||!re.call(ot,i)&&(st.test(i)?at[i]=!0:(ot[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ht(t)):null!=n?bt(e,o,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ht(a):e.removeAttribute("name")}function _t(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),ft(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Tt(e,s,t[s])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Dt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Mt=null;function jt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[qe]||null;if(!i)throw Error(o(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Vt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Lt||null!==Mt)&&(eu(),Lt&&(t=Lt,e=Mt,Mt=Lt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[qe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),qt=!1;if(Ut)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Jd){qt=!1}var Ht=null,Wt=null,Kt=null;function Gt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,i="value"in Ht?Ht.value:Ht.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Kt=i.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function $t(){return!1}function Xt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:$t,this.isPropagationStopped=$t,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Xt(tn),rn=f({},tn,{view:0,detail:0}),sn=Xt(rn),on=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),an=Xt(on),ln=Xt(f({},on,{dataTransfer:0})),cn=Xt(f({},rn,{relatedTarget:0})),un=Xt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Xt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Xt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Xt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_n=Xt(f({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Xt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=Xt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Xt(f({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=Xt(f({},tn,{newState:0,oldState:0})),En=[9,13,27,32],kn=Ut&&"CompositionEvent"in window,Tn=null;Ut&&"documentMode"in document&&(Tn=document.documentMode);var xn=Ut&&"TextEvent"in window&&!Tn,In=Ut&&(!kn||Tn&&8<Tn&&11>=Tn),Nn=String.fromCharCode(32),An=!1;function Rn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Mn(e,t,n,r){Lt?Mt?Mt.push(r):Mt=[r]:Lt=r,0<(t=ih(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,Fn=null;function Vn(e){$u(e,0)}function zn(e){if(pt(Je(e)))return e}function Un(e,t){if("change"===e)return t}var qn=!1;if(Ut){var Bn;if(Ut){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"===typeof Wn.oninput}Bn=Hn}else Bn=!1;qn=Bn&&(!document.documentMode||9<document.documentMode)}function Kn(){jn&&(jn.detachEvent("onpropertychange",Gn),Fn=jn=null)}function Gn(e){if("value"===e.propertyName&&zn(Fn)){var t=[];Mn(t,Fn,e,Ot(e)),Vt(Vn,t)}}function Qn(e,t,n){"focusin"===e?(Kn(),Fn=n,(jn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(Fn)}function $n(e,t){if("click"===e)return zn(t)}function Xn(e,t){if("input"===e||"change"===e)return zn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Jn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=Ut&&"documentMode"in document&&11>=document.documentMode,or=null,ar=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=ih(ar,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Ut&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),_r=mr("transitionrun"),br=mr("transitionstart"),wr=mr("transitioncancel"),Sr=mr("transitionend"),Cr=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Cr.set(e,t),rt(t,[e])}Er.push("scrollEnd");var Tr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},xr=[],Ir=0,Nr=0;function Ar(){for(var e=Ir,t=Nr=Ir=0;t<e;){var n=xr[t];xr[t++]=null;var r=xr[t];xr[t++]=null;var i=xr[t];xr[t++]=null;var s=xr[t];if(xr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Rr(e,t,n,r){xr[Ir++]=e,xr[Ir++]=t,xr[Ir++]=n,xr[Ir++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return Rr(e,t,n,r),Lr(e)}function Dr(e,t){return Rr(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-be(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Lr(e){if(50<Wc)throw Wc=0,Kc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function jr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new jr(e,t,n,r)}function Vr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Vr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case x:return(e=Fr(31,n,t,i)).elementType=x,e.lanes=s,e;case y:return Br(n.children,i,s,t);case v:a=8,i|=24;break;case _:return(e=Fr(12,n,t,2|i)).elementType=_,e.lanes=s,e;case C:return(e=Fr(13,n,t,i)).elementType=C,e.lanes=s,e;case E:return(e=Fr(19,n,t,i)).elementType=E,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case b:a=9;break e;case S:a=11;break e;case k:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Br(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Gr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Gr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],$r=0,Xr=null,Jr=0,Zr=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Yr[$r++]=Jr,Yr[$r++]=Xr,Xr=e,Jr=t}function si(e,t,n){Zr[ei++]=ni,Zr[ei++]=ri,Zr[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-be(r)-1;r&=~(1<<i),n+=1;var s=32-be(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ni=1<<32-be(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function oi(e){null!==e.return&&(ii(e,1),si(e,1,0))}function ai(e){for(;e===Xr;)Xr=Yr[--$r],Yr[$r]=null,Jr=Yr[--$r],Yr[$r]=null;for(;e===ti;)ti=Zr[--ei],Zr[ei]=null,ri=Zr[--ei],Zr[ei]=null,ni=Zr[--ei],Zr[ei]=null}function li(e,t){Zr[ei++]=ni,Zr[ei++]=ri,Zr[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,hi=!1,di=null,fi=!1,pi=Error(o(519));function mi(e){throw wi(Qr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[qe]=r,n){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)Xu(Qu[n],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),_t(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),Ct(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||uh(t.textContent,n)?(null!=r.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=r.onScroll&&Xu("scroll",t),null!=r.onScrollEnd&&Xu("scrollend",t),null!=r.onClick&&(t.onclick=Pt),t=!0):t=!1,t||mi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!hi)return yi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bh(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ui=Mh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ui=Mh(e)}else 27===n?(n=ui,xh(e.type)?(e=Lh,Lh=null,ui=e):ui=n):ui=ci?Oh(e.stateNode.nextSibling):null;return!0}function _i(){ui=ci=null,hi=!1}function bi(){var e=di;return null!==e&&(null===Rc?Rc=e:Rc.push.apply(Rc,e),di=null),e}function wi(e){null===di?di=[e]:di.push(e)}var Si=V(null),Ei=null,ki=null;function Ti(e,t,n){U(Si,t._currentValue),t._currentValue=n}function xi(e){e._currentValue=Si.current,z(Si)}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ni(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ii(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Ii(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ai(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Jn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(hd):e=[hd])}i=i.return}null!==e&&Ni(t,e,n,r),t.flags|=262144}function Ri(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Ei=e,ki=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Di(e){return Li(Ei,e)}function Oi(e,t){return null===Ei&&Pi(e),Li(e,t)}function Li(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ki){if(null===e)throw Error(o(308));ki=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ki=ki.next=t;return n}var Mi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ji=r.unstable_scheduleCallback,Fi=r.unstable_NormalPriority,Vi={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zi(){return{controller:new Mi,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&ji(Fi,function(){e.controller.abort()})}var qi=null,Bi=0,Hi=0,Wi=null;function Ki(){if(0===--Bi&&null!==qi){null!==Wi&&(Wi.status="fulfilled");var e=qi;qi=null,Hi=0,Wi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gi=O.S;O.S=function(e,t){Oc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===qi){var n=qi=[];Bi=0,Hi=Bu(),Wi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bi++,t.then(Ki,Ki)}(0,t),null!==Gi&&Gi(e,t)};var Qi=V(null);function Yi(){var e=Qi.current;return null!==e?e:mc.pooledCache}function $i(e,t){U(Qi,null===t?Qi.current:t.pool)}function Xi(){var e=Yi();return null===e?null:{parent:Vi._currentValue,pool:e}}var Ji=Error(o(460)),Zi=Error(o(474)),es=Error(o(542)),ts={then:function(){}};function ns(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Pt,Pt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Pt,Pt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw ss=t,Ji}}function is(e){try{return(0,e._init)(e._payload)}catch(Ci){if(null!==Ci&&"object"===typeof Ci&&"function"===typeof Ci.then)throw ss=Ci,Ji;throw Ci}}var ss=null;function os(){if(null===ss)throw Error(o(459));var e=ss;return ss=null,e}function as(e){if(e===Ji||e===es)throw Error(o(483))}var ls=null,cs=0;function us(e){var t=cs;return cs+=1,null===ls&&(ls=[]),rs(ls,e,t)}function hs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&is(s)===t.type)?(hs(t=i(t,n.props),n),t.return=e,t):(hs(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Br(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return hs(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case T:return d(e,t=is(t),n)}if(D(t)||A(t))return(t=Br(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,us(t),n);if(t.$$typeof===w)return d(e,Oi(e,t),n);ds(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=is(n),r)}if(D(n)||A(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,us(n),r);if(n.$$typeof===w)return f(e,t,Oi(e,n),r);ds(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,r=is(r),i)}if(D(r)||A(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,us(r),i);if(r.$$typeof===w)return p(e,t,n,Oi(t,r),i);ds(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===y){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===T&&is(_)===c.type){n(l,c.sibling),hs(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((h=Br(u.props.children,l.mode,h,u.key)).return=l,l=h):(hs(h=qr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Kr(u,l.mode,h)).return=l,l=h}return a(l);case T:return v(l,c,u=is(u),h)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),hi&&ii(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return hi&&ii(i,m),c}for(h=r(h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),hi&&ii(i,m),c}(l,c,u,h);if(A(u)){if("function"!==typeof(_=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),hi&&ii(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return hi&&ii(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),hi&&ii(i,g),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return v(l,c,us(u),h);if(u.$$typeof===w)return v(l,c,Oi(l,u),h);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=Hr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{cs=0;var i=v(e,t,n,r);return ls=null,i}catch(Ci){if(Ci===Ji||Ci===es)throw Ci;var s=Fr(29,Ci,null,e.mode);return s.lanes=r,s.return=e,s}}}var ps=fs(!0),ms=fs(!1),gs=!1;function ys(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Rr(e,r,t,n),Lr(e)}function ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Ss(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Cs=!1;function Es(){if(Cs){if(null!==Wi)throw Wi}}function ks(e,t,n,r){Cs=!1;var i=e.updateQueue;gs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=-536870913&a.lane,p=d!==a.lane;if(p?(yc&d)===d:(r&d)===d){0!==d&&d===Hi&&(Cs=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;d=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(y,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:gs=!0}}null!==(d=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[d]:p.push(d))}else p={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),kc|=o,e.lanes=o,e.memoizedState=h}}function Ts(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function xs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ts(n[e],t)}var Is=V(null),Ns=V(0);function As(e,t){U(Ns,e=Cc),U(Is,t),Cc=e|t.baseLanes}function Rs(){U(Ns,Cc),U(Is,Is.current)}function Ps(){Cc=Ns.current,z(Is),z(Ns)}var Ds=V(null),Os=null;function Ls(e){var t=e.alternate;U(zs,1&zs.current),U(Ds,e),null===Os&&(null===t||null!==Is.current||null!==t.memoizedState)&&(Os=e)}function Ms(e){U(zs,zs.current),U(Ds,e),null===Os&&(Os=e)}function js(e){22===e.tag?(U(zs,zs.current),U(Ds,e),null===Os&&(Os=e)):Fs()}function Fs(){U(zs,zs.current),U(Ds,Ds.current)}function Vs(e){z(Ds),Os===e&&(Os=null),z(zs)}var zs=V(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ph(n)||Dh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qs=0,Bs=null,Hs=null,Ws=null,Ks=!1,Gs=!1,Qs=!1,Ys=0,$s=0,Xs=null,Js=0;function Zs(){throw Error(o(321))}function eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function to(e,t,n,r,i,s){return qs=s,Bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?ya:va,Qs=!1,s=n(r,i),Qs=!1,Gs&&(s=ro(t,n,r,i)),no(e),s}function no(e){O.H=ga;var t=null!==Hs&&null!==Hs.next;if(qs=0,Ws=Hs=Bs=null,Ks=!1,$s=0,Xs=null,t)throw Error(o(300));null===e||Oa||null!==(e=e.dependencies)&&Ri(e)&&(Oa=!0)}function ro(e,t,n,r){Bs=e;var i=0;do{if(Gs&&(Xs=null),$s=0,Gs=!1,25<=i)throw Error(o(301));if(i+=1,Ws=Hs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=_a,s=t(n,r)}while(Gs);return s}function io(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?uo(t):t,e=e.useState()[0],(null!==Hs?Hs.memoizedState:null)!==e&&(Bs.flags|=1024),t}function so(){var e=0!==Ys;return Ys=0,e}function oo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ao(e){if(Ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ks=!1}qs=0,Ws=Hs=Bs=null,Gs=!1,$s=Ys=0,Xs=null}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ws?Bs.memoizedState=Ws=e:Ws=Ws.next=e,Ws}function co(){if(null===Hs){var e=Bs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===Ws?Bs.memoizedState:Ws.next;if(null!==t)Ws=t,Hs=e;else{if(null===e){if(null===Bs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===Ws?Bs.memoizedState=Ws=e:Ws=Ws.next=e}return Ws}function uo(e){var t=$s;return $s+=1,null===Xs&&(Xs=[]),e=rs(Xs,e,t),t=Bs,null===(null===Ws?t.memoizedState:Ws.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?ya:va),e}function ho(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return uo(e);if(e.$$typeof===w)return Di(e)}throw Error(o(438,String(e)))}function fo(e){var t=null,n=Bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Bs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=I;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function mo(e){return go(co(),Hs,e)}function go(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(yc&d)===d:(qs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Hi&&(h=!0);else{if((qs&f)===f){u=u.next,f===Hi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,Bs.lanes|=f,kc|=f}d=u.action,Qs&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,Bs.lanes|=d,kc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Jn(s,e.memoizedState)&&(Oa=!0,h&&null!==(n=Wi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function yo(e){var t=co(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Jn(s,t.memoizedState)||(Oa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function vo(e,t,n){var r=Bs,i=co(),s=hi;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Jn((Hs||i).memoizedState,n);if(a&&(i.memoizedState=n,Oa=!0),i=i.queue,Bo(wo.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Ws&&1&Ws.memoizedState.tag){if(r.flags|=2048,Fo(9,{destroy:void 0},bo.bind(null,r,i,n,t),null),null===mc)throw Error(o(349));s||0!==(127&qs)||_o(r,t,n)}return n}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bo(e,t,n,r){t.value=n,t.getSnapshot=r,So(t)&&Co(e)}function wo(e,t,n){return n(function(){So(t)&&Co(e)})}function So(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(Rp){return!0}}function Co(e){var t=Dr(e,2);null!==t&&Yc(t,e,2)}function Eo(e){var t=lo();if("function"===typeof e){var n=e;if(e=n(),Qs){_e(!0);try{n()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function ko(e,t,n,r){return e.baseState=n,go(e,Hs,"function"===typeof r?r:po)}function To(e,t,n,r,i){if(fa(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,xo(t,s)):(s.next=n.next,t.pending=n.next=s)}}function xo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),Io(e,t,a)}catch(Rp){Ao(e,t,Rp)}finally{null!==s&&null!==o.types&&(s.types=o.types),O.T=s}}else try{Io(e,t,s=n(i,r))}catch(c){Ao(e,t,c)}}function Io(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){No(e,t,n)},function(n){return Ao(e,t,n)}):No(e,t,n)}function No(e,t,n){t.status="fulfilled",t.value=n,Ro(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,xo(e,n)))}function Ao(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ro(t),t=t.next}while(t!==r)}e.action=null}function Ro(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Po(e,t){return t}function Do(e,t){if(hi){var n=mc.formState;if(null!==n){e:{var r=Bs;if(hi){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Oh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Oh(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=lo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},n.queue=r,n=ua.bind(null,Bs,r),r.dispatch=n,r=Eo(!1),s=da.bind(null,Bs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=lo()).queue=i,n=To.bind(null,Bs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Oo(e){return Lo(co(),Hs,e)}function Lo(e,t,n){if(t=go(e,t,Po)[0],e=mo(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=uo(t)}catch(Ci){if(Ci===Ji)throw es;throw Ci}else r=t;var i=(t=co()).queue,s=i.dispatch;return n!==t.memoizedState&&(Bs.flags|=2048,Fo(9,{destroy:void 0},Mo.bind(null,i,n),null)),[r,s,e]}function Mo(e,t){e.action=t}function jo(e){var t=co(),n=Hs;if(null!==n)return Lo(t,n,e);co(),t=t.memoizedState;var r=(n=co()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Fo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return co().memoizedState}function zo(e,t,n,r){var i=lo();Bs.flags|=e,i.memoizedState=Fo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Uo(e,t,n,r){var i=co();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Hs&&null!==r&&eo(r,Hs.memoizedState.deps)?i.memoizedState=Fo(t,s,n,r):(Bs.flags|=e,i.memoizedState=Fo(1|t,s,n,r))}function qo(e,t){zo(8390656,8,e,t)}function Bo(e,t){Uo(2048,8,e,t)}function Ho(e){var t=co().memoizedState;return function(e){Bs.flags|=4;var t=Bs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Wo(e,t){return Uo(4,2,e,t)}function Ko(e,t){return Uo(4,4,e,t)}function Go(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Qo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=co();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=co();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&eo(t,r[1]))return r[0];if(r=e(),Qs){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[r,t],r}function Jo(e,t,n){return void 0===n||0!==(1073741824&qs)&&0===(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),Bs.lanes|=e,kc|=e,n)}function Zo(e,t,n,r){return Jn(n,t)?n:null!==Is.current?(e=Jo(e,n,r),Jn(e,t)||(Oa=!0),e):0===(42&qs)||0!==(1073741824&qs)&&0===(261930&yc)?(Oa=!0,e.memoizedState=n):(e=Qc(),Bs.lanes|=e,kc|=e,t)}function ea(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,da(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);ha(e,t,u,Gc())}else ha(e,t,r,Gc())}catch(Rp){ha(e,t,{then:function(){},status:"rejected",reason:Rp},Gc())}finally{L.p=s,null!==o&&null!==a.types&&(o.types=a.types),O.T=o}}function ta(){}function na(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=ra(e).queue;ea(e,i,t,M,null===n?ta:function(){return ia(e),n(r)})}function ra(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ia(e){var t=ra(e);null===t.next&&(t=e.alternate.memoizedState),ha(e,t.next.queue,{},Gc())}function sa(){return Di(hd)}function oa(){return co().memoizedState}function aa(){return co().memoizedState}function la(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=bs(t,e=_s(n),n);return null!==r&&(Yc(r,t,n),ws(r,t,n)),t={cache:zi()},void(e.payload=t)}t=t.return}}function ca(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fa(e)?pa(t,n):null!==(n=Pr(e,t,n,r))&&(Yc(n,e,r),ma(n,t,r))}function ua(e,t,n){ha(e,t,n,Gc())}function ha(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fa(e))pa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o))return Rr(e,t,i,0),null===mc&&Ar(),!1}catch(Rp){}if(null!==(n=Pr(e,t,i,r)))return Yc(n,e,r),ma(n,t,r),!0}return!1}function da(e,t,n,r){if(r={lane:2,revertLane:Bu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fa(e)){if(t)throw Error(o(479))}else null!==(t=Pr(e,n,r,2))&&Yc(t,e,2)}function fa(e){var t=e.alternate;return e===Bs||null!==t&&t===Bs}function pa(e,t){Gs=Ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ma(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var ga={readContext:Di,use:ho,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};ga.useEffectEvent=Zs;var ya={readContext:Di,use:ho,useCallback:function(e,t){return lo().memoizedState=[e,void 0===t?null:t],e},useContext:Di,useEffect:qo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){zo(4,2,e,t)},useMemo:function(e,t){var n=lo();t=void 0===t?null:t;var r=e();if(Qs){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=lo();if(void 0!==n){var i=n(t);if(Qs){_e(!0);try{n(t)}finally{_e(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ca.bind(null,Bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},lo().memoizedState=e},useState:function(e){var t=(e=Eo(e)).queue,n=ua.bind(null,Bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yo,useDeferredValue:function(e,t){return Jo(lo(),e,t)},useTransition:function(){var e=Eo(!1);return e=ea.bind(null,Bs,e.queue,!0,!1),lo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Bs,i=lo();if(hi){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===mc)throw Error(o(349));0!==(127&yc)||_o(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qo(wo.bind(null,r,s,e),[e]),r.flags|=2048,Fo(9,{destroy:void 0},bo.bind(null,r,s,n,t),null),n},useId:function(){var e=lo(),t=mc.identifierPrefix;if(hi){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-be(ni)-1)).toString(32)+n),0<(n=Ys++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Js++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sa,useFormState:Do,useActionState:Do,useOptimistic:function(e){var t=lo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=da.bind(null,Bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:fo,useCacheRefresh:function(){return lo().memoizedState=la.bind(null,Bs)},useEffectEvent:function(e){var t=lo(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},va={readContext:Di,use:ho,useCallback:$o,useContext:Di,useEffect:Bo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:mo,useRef:Vo,useState:function(){return mo(po)},useDebugValue:Yo,useDeferredValue:function(e,t){return Zo(co(),Hs.memoizedState,e,t)},useTransition:function(){var e=mo(po)[0],t=co().memoizedState;return["boolean"===typeof e?e:uo(e),t]},useSyncExternalStore:vo,useId:oa,useHostTransitionStatus:sa,useFormState:Oo,useActionState:Oo,useOptimistic:function(e,t){return ko(co(),0,e,t)},useMemoCache:fo,useCacheRefresh:aa};va.useEffectEvent=Ho;var _a={readContext:Di,use:ho,useCallback:$o,useContext:Di,useEffect:Bo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:yo,useRef:Vo,useState:function(){return yo(po)},useDebugValue:Yo,useDeferredValue:function(e,t){var n=co();return null===Hs?Jo(n,e,t):Zo(n,Hs.memoizedState,e,t)},useTransition:function(){var e=yo(po)[0],t=co().memoizedState;return["boolean"===typeof e?e:uo(e),t]},useSyncExternalStore:vo,useId:oa,useHostTransitionStatus:sa,useFormState:jo,useActionState:jo,useOptimistic:function(e,t){var n=co();return null!==Hs?ko(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:fo,useCacheRefresh:aa};function ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}_a.useEffectEvent=Ho;var wa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=_s(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),ws(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=_s(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),ws(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=_s(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bs(e,r,n))&&(Yc(t,e,n),ws(t,e,n))}};function Sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(i,s))}function Ca(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ea(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function ka(e){Tr(e)}function Ta(e){console.error(e)}function xa(e){Tr(e)}function Ia(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Na(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Aa(e,t,n){return(n=_s(n)).tag=3,n.payload={element:null},n.callback=function(){Ia(e,t)},n}function Ra(e){return(e=_s(e)).tag=3,e}function Pa(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Na(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Na(t,n,r),"function"!==typeof i&&(null===jc?jc=new Set([this]):jc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Da=Error(o(461)),Oa=!1;function La(e,t,n,r){t.child=null===e?ms(t,null,n,r):ps(t,e.child,n,r)}function Ma(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Pi(t),r=to(e,t,n,o,s,i),a=so(),null===e||Oa?(hi&&a&&oi(t),t.flags|=1,La(e,t,r,i),t.child):(oo(e,t,i),sl(e,t,i))}function ja(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Vr(s)||void 0!==s.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fa(e,t,s,r,i))}if(s=e.child,!ol(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(o,r)&&e.ref===t.ref)return sl(e,t,i)}return t.flags|=1,(e=zr(s,r)).ref=t.ref,e.return=t,t.child=e}function Fa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Zn(s,r)&&e.ref===t.ref){if(Oa=!1,t.pendingProps=r=s,!ol(e,i))return t.lanes=e.lanes,sl(e,t,i);0!==(131072&e.flags)&&(Oa=!0)}}return Wa(e,t,n,r,i)}function Va(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Ua(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Ua(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$i(0,null!==s?s.cachePool:null),null!==s?As(t,s):Rs(),js(t)}else null!==s?($i(0,s.cachePool),As(t,s),Fs(),t.memoizedState=null):(null!==e&&$i(0,null),Rs(),Fs());return La(e,t,i,n),t.child}function za(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ua(e,t,n,r,i){var s=Yi();return s=null===s?null:{parent:Vi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&$i(0,null),Rs(),js(t),null!==e&&Ai(e,t,r,!0),t.childLanes=i,null}function qa(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ba(e,t,n){return ps(t,e.child,null,n),(e=qa(t,t.pendingProps)).flags|=2,Vs(t),t.memoizedState=null,e}function Ha(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wa(e,t,n,r,i){return Pi(t),n=to(e,t,n,r,void 0,i),r=so(),null===e||Oa?(hi&&r&&oi(t),t.flags|=1,La(e,t,n,i),t.child):(oo(e,t,i),sl(e,t,i))}function Ka(e,t,n,r,i,s){return Pi(t),t.updateQueue=null,n=ro(t,r,n,i),no(e),r=so(),null===e||Oa?(hi&&r&&oi(t),t.flags|=1,La(e,t,n,s),t.child):(oo(e,t,s),sl(e,t,s))}function Ga(e,t,n,r,i){if(Pi(t),null===t.stateNode){var s=Mr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Di(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=wa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ys(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Di(o):Mr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ba(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&wa.enqueueReplaceState(s,s.state,null),ks(t,r,s,i),Es(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Ea(n,a);s.props=l;var c=s.context,u=n.contextType;o=Mr,"object"===typeof u&&null!==u&&(o=Di(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&Ca(t,s,r,o),gs=!1;var d=t.memoizedState;s.state=d,ks(t,r,s,i),Es(),c=t.memoizedState,a||d!==c||gs?("function"===typeof h&&(ba(t,n,h,r),c=t.memoizedState),(l=gs||Sa(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,vs(e,t),u=Ea(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Mr,"object"===typeof c&&null!==c&&(l=Di(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Ca(t,s,r,l),gs=!1,d=t.memoizedState,s.state=d,ks(t,r,s,i),Es();var f=t.memoizedState;o!==h||d!==f||gs||null!==e&&null!==e.dependencies&&Ri(e.dependencies)?("function"===typeof a&&(ba(t,n,a,r),f=t.memoizedState),(u=gs||Sa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Ri(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ha(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ps(t,e.child,null,i),t.child=ps(t,null,n,i)):La(e,t,n,i),t.memoizedState=s.state,e=t.child):e=sl(e,t,i),e}function Qa(e,t,n,r){return _i(),t.flags|=256,La(e,t,n,r),t.child}var Ya={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $a(e){return{baseLanes:e,cachePool:Xi()}}function Xa(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ic),e}function Ja(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&zs.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hi){if(s?Ls(t):Fs(),(e=ui)?null!==(e=null!==(e=Rh(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Dh(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Fs(),l=el({mode:"hidden",children:l},s=t.mode),i=Br(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=$a(n),i.childLanes=Xa(e,r,n),t.memoizedState=Ya,za(null,i)):(Ls(t),Za(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(a)256&t.flags?(Ls(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fs(),t.child=e.child,t.flags|=128,t=null):(Fs(),l=i.fallback,s=t.mode,i=el({mode:"visible",children:i.children},s),(l=Br(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,ps(t,e.child,null,n),(i=t.child).memoizedState=$a(n),i.childLanes=Xa(e,r,n),t.memoizedState=Ya,t=za(null,i));else if(Ls(t),Dh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,wi({value:i,source:null,stack:null}),t=tl(e,t,n)}else if(Oa||Ai(e,t,n,!1),r=0!==(n&e.childLanes),Oa||r){if(null!==(r=mc)&&(0!==(i=Le(r,n))&&i!==c.retryLane))throw c.retryLane=i,Dr(e,i),Yc(r,e,i),Da;Ph(l)||au(),t=tl(e,t,n)}else Ph(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Oh(l.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=Za(t,i.children)).flags|=4096);return t}return s?(Fs(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=zr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=zr(u,l):(l=Br(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,za(null,i),i=t.child,null===(l=e.child.memoizedState)?l=$a(n):(null!==(s=l.cachePool)?(c=Vi._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Xi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Xa(e,r,n),t.memoizedState=Ya,za(e.child,i)):(Ls(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Za(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return ps(t,e.child,null,n),(e=Za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function rl(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=s)}function il(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var o=zs.current,a=0!==(2&o);if(a?(o=1&o|2,t.flags|=128):o&=1,U(zs,o),La(e,t,r,n),r=hi?Jr:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rl(t,!0,n,null,s,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function sl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),kc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ai(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ri(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oa=!0;else{if(!ol(e,n)&&0===(128&t.flags))return Oa=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Ti(0,Vi,e.memoizedState.cache),_i();break;case 27:case 5:$(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Ti(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ls(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ja(e,t,n):(Ls(t),null!==(e=sl(e,t,n))?e.sibling:null);Ls(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ai(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return il(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(zs,zs.current),r)break;return null;case 22:return t.lanes=0,Va(e,t,n,t.pendingProps);case 24:Ti(0,Vi,e.memoizedState.cache)}return sl(e,t,n)}(e,t,n);Oa=0!==(131072&e.flags)}else Oa=!1,hi&&0!==(1048576&t.flags)&&si(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=is(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===S){t.tag=11,t=Ma(null,t,e,r,n);break e}if(i===k){t.tag=14,t=ja(null,t,e,r,n);break e}}throw t=P(e)||e,Error(o(306,t,""))}Vr(e)?(r=Ea(e,r),t.tag=1,t=Ga(null,t,e,r,n)):(t.tag=0,t=Wa(null,t,e,r,n))}return t;case 0:return Wa(e,t,t.type,t.pendingProps,n);case 1:return Ga(e,t,r=t.type,i=Ea(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,vs(e,t),ks(t,r,null,n);var a=t.memoizedState;if(r=a.cache,Ti(0,Vi,r),r!==s.cache&&Ni(t,[Vi],n,!0),Es(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Qa(e,t,r,n);break e}if(r!==i){wi(i=Qr(Error(o(424)),t)),t=Qa(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Oh(e.firstChild),ci=t,hi=!0,di=null,fi=!0,n=ms(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_i(),r===i){t=sl(e,t,n);break e}La(e,t,r,n)}t=t.child}return t;case 26:return Ha(e,t),null===e?(n=Kh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=yh(K.current).createElement(n))[Ue]=t,r[qe]=e,fh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&hi&&(r=t.stateNode=Fh(t.type,t.pendingProps,K.current),ci=t,fi=!0,i=ui,xh(t.type)?(Lh=i,ui=Oh(r.firstChild)):ui=i),La(e,t,t.pendingProps.children,n),Ha(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Oh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Oh(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),$(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,bh(i,s)?r=null:null!==a&&bh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=to(e,t,io,null,null,n),hd._currentValue=i),Ha(e,t),La(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Oh(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Ja(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ps(t,null,r,n):La(e,t,r,n),t.child;case 11:return Ma(e,t,t.type,t.pendingProps,n);case 7:return La(e,t,t.pendingProps,n),t.child;case 8:case 12:return La(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ti(0,t.type,r.value),La(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Pi(t),r=r(i=Di(i)),t.flags|=1,La(e,t,r,n),t.child;case 14:return ja(e,t,t.type,t.pendingProps,n);case 15:return Fa(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=qa(t,r),t.lanes=536870912,za(null,e);if(Ms(t),(e=ui)?null!==(e=null!==(e=Rh(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return qa(t,r)}var s=e.memoizedState;if(null!==s){var a=s.dehydrated;if(Ms(t),i)if(256&t.flags)t.flags&=-257,t=Ba(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Oa||Ai(e,t,n,!1),i=0!==(n&e.childLanes),Oa||i){if(null!==(r=mc)&&0!==(a=Le(r,n))&&a!==s.retryLane)throw s.retryLane=a,Dr(e,a),Yc(r,e,a),Da;au(),t=Ba(e,t,n)}else e=s.treeContext,ui=Oh(a.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=qa(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Va(e,t,n,t.pendingProps);case 24:return Pi(t),r=Di(Vi),null===e?(null===(i=Yi())&&(i=mc,s=zi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ys(t),Ti(0,Vi,i)):(0!==(e.lanes&n)&&(vs(e,t),ks(t,null,null,n),Es()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ti(0,Vi,r)):(r=s.cache,Ti(0,Vi,r),r!==i.cache&&Ni(t,[Vi],n,!0))),La(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw ss=ts,Zi;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sd(t)){if(!iu())throw ss=ts,Zi;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Nc|=t)}function dl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(ai(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xi(Vi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,bi())),fl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ll(t),null!==s?(fl(t),ul(t,s)):(fl(t),cl(t,i,0,0,n))):s?s!==e.memoizedState?(ll(t),fl(t),ul(t,s)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,i,0,0,n)),null;case 27:if(X(t),n=K.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return fl(t),null}e=H.current,vi(t)?gi(t):(e=Fh(i,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if(X(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return fl(t),null}if(s=H.current,vi(t))gi(t);else{var a=yh(K.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=a.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?a.createElement(i,{is:r.is}):a.createElement(i)}}s[Ue]=t,s[qe]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)s.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(fh(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=K.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||uh(e.nodeValue,n)))||mi(t,!0)}else(e=yh(e).createTextNode(r))[Ue]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Ue]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Vs(t),t):(Vs(t),null);if(0!==(128&t.flags))throw Error(o(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Ue]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),i=!1}else i=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Vs(t),t):(Vs(t),null)}return Vs(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&eh(t.stateNode.containerInfo),fl(t),null;case 10:return xi(t.type),fl(t),null;case 19:if(z(zs),null===(r=t.memoizedState))return fl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)dl(r,!1);else{if(0!==Ec||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Us(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(zs,1&zs.current|2),hi&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Lc&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Us(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!hi)return fl(t),null}else 2*le()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=zs.current,U(zs,i?1&n|2:1&n),hi&&ii(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return Vs(t),Ps(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&hl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xi(Vi),fl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ml(e,t){switch(ai(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xi(Vi),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(Vs(t),null===t.alternate)throw Error(o(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Vs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(zs),null;case 4:return Y(),null;case 10:return xi(t.type),null;case 22:case 23:return Vs(t),Ps(),null!==e&&z(Qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xi(Vi),null;default:return null}}function gl(e,t){switch(ai(t),t.tag){case 3:xi(Vi),Y();break;case 26:case 27:case 5:X(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Vs(t);break;case 13:Vs(t);break;case 19:z(zs);break;case 10:xi(t.type);break;case 22:case 23:Vs(t),Ps(),null!==e&&z(Qi);break;case 24:xi(Vi)}}function yl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(Rp){Eu(t,t.return,Rp)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(Rp){Eu(i,l,Rp)}}}r=r.next}while(r!==s)}}catch(Rp){Eu(t,t.return,Rp)}}function _l(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{xs(t,n)}catch(Rp){Eu(e,e.return,Rp)}}}function bl(e,t,n){n.props=Ea(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(Rp){Eu(e,t,Rp)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(Rp){Eu(e,t,Rp)}}function Sl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(Rp){Eu(e,t,Rp)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Eu(e,t,i)}else n.current=null}function Cl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(Rp){Eu(e,e.return,Rp)}}function El(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||hh(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&hh(e,t,f,p,r,d)}}return void vt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||hh(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&hh(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hh(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&hh(e,t,a,i,r,s)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else hh(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else hh(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&hh(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:hh(e,t,u,f,r,p)}return;default:if(It(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dh(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||dh(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&hh(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||hh(e,t,d,f,r,p)}(r,e.type,n,t),r[qe]=t}catch(Rp){Eu(e,e.return,Rp)}}function kl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&xh(e.type)||4===e.tag}function Tl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||kl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&xh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pt));else if(4!==r&&(27===r&&xh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(xl(e,t,n),e=e.sibling;null!==e;)xl(e,t,n),e=e.sibling}function Il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&xh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Il(e,t,n),e=e.sibling;null!==e;)Il(e,t,n),e=e.sibling}function Nl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fh(t,r,n),t[Ue]=e,t[qe]=n}catch(Rp){Eu(e,e.return,Rp)}}var Al=!1,Rl=!1,Pl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Ol=null;function Ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&yl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(Rp){Eu(n,n.return,Rp)}else{var i=Ea(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Eu(n,n.return,o)}}64&r&&_l(n),512&r&&wl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{xs(e,t)}catch(Rp){Eu(n,n.return,Rp)}}break;case 27:null===t&&4&r&&Nl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Cl(n),512&r&&wl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Ul(e,n);break;case 13:Yl(e,n),4&r&&ql(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Iu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||Rl,i=Al;var s=Rl;Al=r,(Rl=t)&&!s?Xl(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Al=i,Rl=s}break;case 30:break;default:Yl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jl=null,Fl=!1;function Vl(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Rl||Sl(n,t),Vl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Rl||Sl(n,t);var r=jl,i=Fl;xh(n.type)&&(jl=n.stateNode,Fl=!1),Vl(e,t,n),Vh(n.stateNode),jl=r,Fl=i;break;case 5:Rl||Sl(n,t);case 6:if(r=jl,i=Fl,jl=null,Vl(e,t,n),Fl=i,null!==(jl=r))if(Fl)try{(9===jl.nodeType?jl.body:"HTML"===jl.nodeName?jl.ownerDocument.body:jl).removeChild(n.stateNode)}catch(Rp){Eu(n,t,Rp)}else try{jl.removeChild(n.stateNode)}catch(Rp){Eu(n,t,Rp)}break;case 18:null!==jl&&(Fl?(Ih(9===(e=jl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wd(e)):Ih(jl,n.stateNode));break;case 4:r=jl,i=Fl,jl=n.stateNode.containerInfo,Fl=!0,Vl(e,t,n),jl=r,Fl=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),Rl||vl(4,n,t),Vl(e,t,n);break;case 1:Rl||(Sl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),Vl(e,t,n);break;case 21:Vl(e,t,n);break;case 22:Rl=(r=Rl)||null!==n.memoizedState,Vl(e,t,n),Rl=r;break;default:Vl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wd(e)}catch(Rp){Eu(t,t.return,Rp)}}}function ql(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wd(e)}catch(Rp){Eu(t,t.return,Rp)}}function Bl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Nu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(xh(l.type)){jl=l.stateNode,Fl=!1;break e}break;case 5:jl=l.stateNode,Fl=!1;break e;case 3:case 4:jl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===jl)throw Error(o(160));zl(s,a,i),jl=null,Fl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Gl(e),4&r&&(vl(3,e,e.return),yl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Gl(e),512&r&&(Rl||null===n||Sl(n,n.return)),64&r&&Al&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Wl;if(Hl(t,e),Gl(e),512&r&&(Rl||null===n||Sl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Qe]||s[Ue]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),fh(s,r,n),s[Ue]=e,et(s),r=s;break e;case"link":var a=rd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}fh(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=rd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}fh(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Ue]=e,et(s),r=s}e.stateNode=r}else id(i,e.type,e.stateNode);else e.stateNode=Jh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?id(i,e.type,e.stateNode):Jh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&El(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Gl(e),512&r&&(Rl||null===n||Sl(n,n.return)),null!==n&&4&r&&El(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Gl(e),512&r&&(Rl||null===n||Sl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(Rp){Eu(e,e.return,Rp)}}4&r&&null!=e.stateNode&&El(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Pl=!0);break;case 6:if(Hl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(Rp){Eu(e,e.return,Rp)}}break;case 3:if(nd=null,i=Wl,Wl=qh(t.containerInfo),Hl(t,e),Wl=i,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(Rp){Eu(e,e.return,Rp)}Pl&&(Pl=!1,Ql(e));break;case 4:r=Wl,Wl=qh(e.stateNode.containerInfo),Hl(t,e),Gl(e),Wl=r;break;case 12:default:Hl(t,e),Gl(e);break;case 31:case 19:Hl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bl(e,r)));break;case 13:Hl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Al,h=Rl;if(Al=u||i,Rl=h||c,Hl(t,e),Rl=h,Al=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Al||Rl||$l(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(Rp){Eu(c,c.return,Rp)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(Rp){Eu(c,c.return,Rp)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Nh(p,!0):Nh(c.stateNode,!1)}catch(Rp){Eu(c,c.return,Rp)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Bl(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(kl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;Il(e,Tl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Et(s,""),n.flags&=-33),Il(e,Tl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;xl(e,Tl(e),a);break;default:throw Error(o(161))}}catch(Rp){Eu(e,e.return,Rp)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function $l(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),$l(t);break;case 1:Sl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),$l(t);break;case 27:Vh(t.stateNode);case 26:case 5:Sl(t,t.return),$l(t);break;case 22:null===t.memoizedState&&$l(t);break;default:$l(t)}e=e.sibling}}function Xl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Xl(i,s,n),yl(4,s);break;case 1:if(Xl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(Rp){Eu(r,r.return,Rp)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ts(l[i],a)}catch(Rp){Eu(r,r.return,Rp)}}n&&64&o&&_l(s),wl(s,s.return);break;case 27:Nl(s);case 26:case 5:Xl(i,s,n),n&&null===r&&4&o&&Cl(s),wl(s,s.return);break;case 12:Xl(i,s,n);break;case 31:Xl(i,s,n),n&&4&o&&Ul(i,s);break;case 13:Xl(i,s,n),n&&4&o&&ql(i,s);break;case 22:null===s.memoizedState&&Xl(i,s,n),wl(s,s.return);break;case 30:break;default:Xl(i,s,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&i&&yl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){ec(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(Rp){Eu(t,t.return,Rp)}}else ec(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ec(e,t,n,r):rc(e,t):2&s._visibility?ec(e,t,n,r):(s._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Jl(o,t);break;case 24:ec(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function nc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:nc(s,o,a,l,i),yl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?nc(s,o,a,l,i):rc(s,o):(u._visibility|=2,nc(s,o,a,l,i)),i&&2048&c&&Jl(o.alternate,o);break;case 24:nc(s,o,a,l,i),i&&2048&c&&Zl(o.alternate,o);break;default:nc(s,o,a,l,i)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:rc(n,r),2048&i&&Jl(r.alternate,r);break;case 24:rc(n,r),2048&i&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var ic=8192;function sc(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)oc(e,t,n),e=e.sibling}function oc(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Gh(r.href),s=t.querySelector(Qh(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ad.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Yh(r),(i=zh.get(i))&&ed(r,i),et(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fh(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ad.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var r=Wl;Wl=qh(e.stateNode.containerInfo),sc(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ic,ic=16777216,sc(e,t,n),ic=r):sc(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,hc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,hc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function hc(e,t){for(;null!==Ol;){var n=Ol;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ol=r;else e:for(n=e;null!==Ol;){var i=(r=Ol).sibling,s=r.return;if(Ml(r),r===n){Ol=null;break e}if(null!==i){i.return=s,Ol=i;break e}Ol=s}}}var dc={getCacheForType:function(e){var t=Di(Vi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Di(Vi).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,pc=0,mc=null,gc=null,yc=0,vc=0,_c=null,bc=!1,wc=!1,Sc=!1,Cc=0,Ec=0,kc=0,Tc=0,xc=0,Ic=0,Nc=0,Ac=null,Rc=null,Pc=!1,Dc=0,Oc=0,Lc=1/0,Mc=null,jc=null,Fc=0,Vc=null,zc=null,Uc=0,qc=0,Bc=null,Hc=null,Wc=0,Kc=null;function Gc(){return 0!==(2&pc)&&0!==yc?yc&-yc:null!==O.T?Bu():Fe()}function Qc(){if(0===Ic)if(0===(536870912&yc)||hi){var e=Ee;0===(3932160&(Ee<<=1))&&(Ee=262144),Ic=e}else Ic=536870912;return null!==(e=Ds.current)&&(e.flags|=32),Ic}function Yc(e,t,n){(e!==mc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,yc,Ic,!1)),Pe(e,n),0!==(2&pc)&&e===mc||(e===mc&&(0===(2&pc)&&(Tc|=n),4===Ec&&Zc(e,yc,Ic,!1)),Mu(e))}function $c(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ie(e,t),i=r?function(e,t){var n=pc;pc|=2;var r=su(),i=ou();mc!==e||yc!==t?(Mc=null,Lc=le()+500,nu(e,t)):wc=Ie(e,t);e:for(;;)try{if(0!==vc&&null!==gc){t=gc;var s=_c;t:switch(vc){case 1:vc=0,_c=null,fu(e,t,s,1);break;case 2:case 9:if(ns(s)){vc=0,_c=null,du(t);break}t=function(){2!==vc&&9!==vc||mc!==e||(vc=7),Mu(e)},s.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ns(s)?(vc=0,_c=null,du(t)):(vc=0,_c=null,fu(e,t,s,7));break;case 5:var a=null;switch(gc.tag){case 26:a=gc.memoizedState;case 5:case 27:var l=gc;if(a?sd(a):l.stateNode.complete){vc=0,_c=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}vc=0,_c=null,fu(e,t,s,5);break;case 6:vc=0,_c=null,fu(e,t,s,6);break;case 8:tu(),Ec=6;break e;default:throw Error(o(462))}}uu();break}catch(h){ru(e,h)}return ki=Ei=null,O.H=r,O.A=i,pc=n,null!==gc?0:(mc=null,yc=0,Ar(),Ec)}(e,t):lu(e,t,!0),s=r;;){if(0===i){wc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Jc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=Ac;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,a).flags|=256),2!==(a=lu(l,a,!1))){if(Sc&&!c){l.errorRecoveryDisabledLanes|=s,Tc|=s,i=4;break e}s=Rc,Rc=i,null!==s&&(null===Rc?Rc=s:Rc.push.apply(Rc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Ic,!bc);break e;case 2:Rc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Dc+300-le())){if(Zc(r,t,Ic,!bc),0!==xe(r,0,!0))break e;Uc=t,r.timeoutHandle=Sh(Xc.bind(null,r,n,Rc,Mc,Pc,t,Ic,Tc,Nc,bc,s,"Throttled",-0,0),i)}else Xc(r,n,Rc,Mc,Pc,t,Ic,Tc,Nc,bc,s,null,-0,0)}break}i=lu(e,t,!1),s=!1}Mu(e)}function Xc(e,t,n,r,i,s,o,a,l,c,u,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){oc(t,s,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var p=(62914560&s)===s?Dc-le():(4194048&s)===s?Oc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&cd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===od&&(od=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,o=i.initiatorType,a=i.duration;if(s&&a&&ph(o)){for(o=0,a=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>a)break;var u=l.transferSize,h=l.initiatorType;u&&ph(h)&&(o+=u*((l=l.responseEnd)<a?1:(a-c)/(l-c)))}if(--r,t+=8*(s+o)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(h,p),null!==p)return Uc=s,e.cancelPendingCommit=p(gu.bind(null,e,t,s,n,r,i,o,a,l,u,h,null,d,f)),void Zc(e,s,o,!c)}gu(e,t,s,n,r,i,o,a,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch(Rp){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~xc,t&=~Tc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-be(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&De(e,n,t)}function eu(){return 0!==(6&pc)||(ju(0,!1),!1)}function tu(){if(null!==gc){if(0===vc)var e=gc.return;else ki=Ei=null,ao(e=gc),ls=null,cs=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,tu(),mc=e,gc=n=zr(e.current,null),yc=t,vc=0,_c=null,bc=!1,wc=Ie(e,t),Sc=!1,Nc=Ic=xc=Tc=kc=Ec=0,Rc=Ac=null,Pc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),s=1<<i;t|=e[i],r&=~s}return Cc=t,Ar(),n}function ru(e,t){Bs=null,O.H=ga,t===Ji||t===es?(t=os(),vc=3):t===Zi?(t=os(),vc=4):vc=t===Da?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,_c=t,null===gc&&(Ec=1,Ia(e,Qr(t,e.current)))}function iu(){var e=Ds.current;return null===e||((4194048&yc)===yc?null===Os:((62914560&yc)===yc||0!==(536870912&yc))&&e===Os)}function su(){var e=O.H;return O.H=ga,null===e?ga:e}function ou(){var e=O.A;return O.A=dc,e}function au(){Ec=4,bc||(4194048&yc)!==yc&&null!==Ds.current||(wc=!0),0===(134217727&kc)&&0===(134217727&Tc)||null===mc||Zc(mc,yc,Ic,!1)}function lu(e,t,n){var r=pc;pc|=2;var i=su(),s=ou();mc===e&&yc===t||(Mc=null,nu(e,t)),t=!1;var o=Ec;e:for(;;)try{if(0!==vc&&null!==gc){var a=gc,l=_c;switch(vc){case 8:tu(),o=6;break e;case 3:case 2:case 9:case 6:null===Ds.current&&(t=!0);var c=vc;if(vc=0,_c=null,fu(e,a,l,c),n&&wc){o=0;break e}break;default:c=vc,vc=0,_c=null,fu(e,a,l,c)}}cu(),o=Ec;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,ki=Ei=null,pc=r,O.H=i,O.A=s,null===gc&&(mc=null,yc=0,Ar()),o}function cu(){for(;null!==gc;)hu(gc)}function uu(){for(;null!==gc&&!oe();)hu(gc)}function hu(e){var t=al(e.alternate,e,Cc);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ka(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Ka(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:ao(t);default:gl(n,t),t=al(n,t=gc=Ur(t,Cc),Cc)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function fu(e,t,n,r){ki=Ei=null,ao(t),ls=null,cs=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ai(t,n,i,!0),null!==(n=Ds.current)){switch(n.tag){case 31:case 13:return null===Os?au():null===n.alternate&&0===Ec&&(Ec=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===ts?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ku(e,r,i)),!1;case 22:return n.flags|=65536,r===ts?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ku(e,r,i)),!1}throw Error(o(435,n.tag))}return ku(e,r,i),au(),!1}if(hi)return null!==(t=Ds.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&wi(Qr(e=Error(o(422),{cause:r}),n))):(r!==pi&&wi(Qr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Qr(r,n),Ss(e,i=Aa(e.stateNode,r,i)),4!==Ec&&(Ec=2)),!1;var s=Error(o(520),{cause:r});if(s=Qr(s,n),null===Ac?Ac=[s]:Ac.push(s),4!==Ec&&(Ec=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Ss(n,e=Aa(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===jc||!jc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Pa(i=Ra(i),e,n,r),Ss(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,yc))return Ec=1,Ia(e,Qr(n,e.current)),void(gc=null)}catch(Rp){if(null!==i)throw gc=i,Rp;return Ec=1,Ia(e,Qr(n,e.current)),void(gc=null)}32768&t.flags?(hi||1===r?e=!0:wc||0!==(536870912&yc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ds.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,bc);e=t.return;var n=pl(t.alternate,t,Cc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===Ec&&(Ec=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);Ec=6,gc=null}function gu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Fc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-be(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Nr,a,l,c),e===mc&&(gc=mc=null,yc=0),zc=t,Vc=e,Uc=n,qc=s,Bc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(de,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,mh=bd,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:e,selectionRange:n},bd=!1,Ol=t;null!==Ol;)if(e=(t=Ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ol=e;else for(;null!==Ol;){switch(s=(t=Ol).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Ea(n.type,i);e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(Rp){Eu(n,n.return,Rp)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ah(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ah(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Ol=e;break}Ol=t.return}}(e,t)}finally{pc=a,L.p=i,O.T=r}}Fc=1,yu(),vu(),_u()}}function yu(){if(1===Fc){Fc=0;var e=Vc,t=zc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=pc;pc|=4;try{Kl(t,e);var s=gh,o=rr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&nr(a.ownerDocument.documentElement,a)){if(null!==l&&ir(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=tr(a,m),v=tr(a,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var _=h.createRange();_.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(_),f.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),f.addRange(_))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}bd=!!mh,gh=mh=null}finally{pc=i,L.p=r,O.T=n}}e.current=t,Fc=2}}function vu(){if(2===Fc){Fc=0;var e=Vc,t=zc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=pc;pc|=4;try{Ll(e,t.alternate,t)}finally{pc=i,L.p=r,O.T=n}}Fc=3}}function _u(){if(4===Fc||3===Fc){Fc=0,ae();var e=Vc,t=zc,n=Uc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,zc=Vc=null,bu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(jc=null),je(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&Uc)&&wu(),Mu(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,ju(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function wu(){return yu(),vu(),_u(),Su()}function Su(){if(5!==Fc)return!1;var e=Vc,t=qc;qc=0;var n=je(Uc),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Bc,Bc=null;var s=Vc,a=Uc;if(Fc=0,zc=Vc=null,Uc=0,0!==(6&pc))throw Error(o(331));var l=pc;if(pc|=4,cc(s.current),tc(s,s.current,a,n),pc=l,ju(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{L.p=i,O.T=r,bu(e,t)}}function Cu(e,t,n){t=Qr(n,t),null!==(e=bs(e,t=Aa(e.stateNode,t,2),2))&&(Pe(e,2),Mu(e))}function Eu(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===jc||!jc.has(r))){e=Qr(n,e),null!==(r=bs(t,n=Ra(2),2))&&(Pa(n,r,t,e),Pe(r,2),Mu(r));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Sc=!0,i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(yc&n)===n&&(4===Ec||3===Ec&&(62914560&yc)===yc&&300>le()-Dc?0===(2&pc)&&nu(e,0):xc|=n,Nc===yc&&(Nc=0)),Mu(e)}function xu(e,t){0===t&&(t=Ae()),null!==(e=Dr(e,t))&&(Pe(e,t),Mu(e))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),xu(e,n)}var Au=null,Ru=null,Pu=!1,Du=!1,Ou=!1,Lu=0;function Mu(e){e!==Ru&&null===e.next&&(null===Ru?Au=Ru=e:Ru=Ru.next=e),Du=!0,Pu||(Pu=!0,kh(function(){0!==(6&pc)?ie(ue,Fu):Vu()}))}function ju(e,t){if(!Ou&&Du){Ou=!0;do{for(var n=!1,r=Au;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,qu(r,s))}else s=yc,0===(3&(s=xe(r,r===mc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ie(r,s)||(n=!0,qu(r,s));r=r.next}}while(n);Ou=!1}}function Fu(){Vu()}function Vu(){Du=Pu=!1;var e=0;0!==Lu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wh&&(wh=e,!0);return wh=null,!1}()&&(e=Lu);for(var t=le(),n=null,r=Au;null!==r;){var i=r.next,s=zu(r,t);0===s?(r.next=null,null===n?Au=i:n.next=i,null===i&&(Ru=n)):(n=r,(0!==e||0!==(3&s))&&(Du=!0)),r=i}0!==Fc&&5!==Fc||ju(e,!1),0!==Lu&&(Lu=0)}function zu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-be(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Ne(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=yc,n=xe(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ie(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),je(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=Uu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=yc;return 0===(r=xe(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:($c(e,r,t),zu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function qu(e,t){if(wu())return null;$c(e,t,!0)}function Bu(){if(0===Lu){var e=Hi;0===e&&(e=Ce,0===(261888&(Ce<<=1))&&(Ce=256)),Lu=e}return Lu}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Rt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<Er.length;Ku++){var Gu=Er[Ku];kr(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}kr(gr,"onAnimationEnd"),kr(yr,"onAnimationIteration"),kr(vr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(_r,"onTransitionRun"),kr(br,"onTransitionStart"),kr(wr,"onTransitionCancel"),kr(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function $u(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(Rp){Tr(Rp)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(Rp){Tr(Rp)}i.currentTarget=null,s=l}}}}function Xu(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(th(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),th(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function eh(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ju("selectionchange",!1,t))}}function th(e,t,n,r){switch(xd(t)){case 2:var i=wd;break;case 8:i=Sd;break;default:i=Cd}n=i.bind(null,t,n,e),i=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nh(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=$e(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Vt(function(){var r=s,i=Ot(n),o=[];e:{var a=Cr.get(e);if(void 0!==a){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gr:case yr:case vr:c=un;break;case Sr:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n;break;case"toggle":case"beforetoggle":c=Cn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=zt(m,f))&&h.push(rh(m,g,p)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Be])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=an,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=_n,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?a:Je(c),p=null==u?a:Je(u),(a=new h(g,m+"leave",c,n,i)).target=d,a.relatedTarget=p,g=null,$e(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=sh,m=u,p=0,g=f=c;g;g=h(g))p++;g=0;for(var y=m;y;y=h(y))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==c&&oh(o,a,c,h,!1),null!==u&&null!==d&&oh(o,d,u,h,!0)}if("select"===(c=(a=r?Je(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=Un;else if(Ln(a))if(qn)v=Xn;else{v=Yn;var _=Qn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&It(r.elementType)&&(v=Un):v=$n;switch(v&&(v=v(e,r))?Mn(o,v,n,i):(_&&_(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&bt(a,"number",a.value)),_=r?Je(r):window,e){case"focusin":(Ln(_)||"true"===_.contentEditable)&&(or=_,ar=r,lr=null);break;case"focusout":lr=ar=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(o,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(o,n,i)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Dn?Rn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(In&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Dn&&(b=Gt()):(Wt="value"in(Ht=i)?Ht.value:Ht.textContent,Dn=!0)),0<(_=ih(r,w)).length&&(w=new dn(w,e,null,n,i),o.push({event:w,listeners:_}),b?w.data=b:null!==(b=Pn(n))&&(w.data=b))),(b=xn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(An=!0,Nn);case"textInput":return(e=t.data)===Nn&&An?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!kn&&Rn(e,t)?(e=Gt(),Kt=Wt=Ht=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ih(r,"onBeforeInput")).length&&(_=new dn("onBeforeInput","beforeinput",null,n,i),o.push({event:_,listeners:w}),_.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Hu((i[qe]||null).action),o=r.submitter;o&&null!==(t=(t=o[qe]||null)?Hu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new nn("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=o?Wu(i,o):new FormData(i);na(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Wu(i,o):new FormData(i),na(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}$u(o,t)})}function rh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=zt(e,n))&&r.unshift(rh(e,i,s)),null!=(i=zt(e,t))&&r.push(rh(e,i,s))),3===e.tag)return r;e=e.return}return[]}function sh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function oh(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=zt(n,s))&&o.unshift(rh(n,c,l)):i||null!=(c=zt(n,s))&&o.push(rh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ah=/\r\n?/g,lh=/\u0000|\uFFFD/g;function ch(e){return("string"===typeof e?e:""+e).replace(ah,"\n").replace(lh,"")}function uh(e,t){return t=ch(t),ch(e)===t}function hh(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":xt(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&hh(e,t,"name",i.name,i,null),hh(e,t,"formEncType",i.formEncType,i,null),hh(e,t,"formMethod",i.formMethod,i,null),hh(e,t,"formTarget",i.formTarget,i,null)):(hh(e,t,"encType",i.encType,i,null),hh(e,t,"method",i.method,i,null),hh(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Nt.get(n)||n,r)}}function dh(e,t,n,r,i,s){switch(n){case"style":xt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[qe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function fh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:hh(e,t,r,a,n,null)}}return s&&hh(e,t,"srcSet",n.srcSet,n,null),void(i&&hh(e,t,"src",n.src,n,null));case"input":Xu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:hh(e,t,i,h,n,null)}}return void _t(e,r,l,c,u,a,s,!1);case"select":for(s in Xu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:hh(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Xu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:hh(e,t,a,l,n,null)}return void Ct(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else hh(e,t,c,i,n,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(i=0;i<Qu.length;i++)Xu(Qu[i],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:hh(e,t,u,i,n,null)}return;default:if(It(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&dh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&hh(e,t,l,i,n,null))}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var mh=null,gh=null;function yh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _h(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wh=null;var Sh="function"===typeof setTimeout?setTimeout:void 0,Ch="function"===typeof clearTimeout?clearTimeout:void 0,Eh="function"===typeof Promise?Promise:void 0,kh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Eh?function(e){return Eh.resolve(null).then(e).catch(Th)}:Sh;function Th(e){setTimeout(function(){throw e})}function xh(e){return"head"===e}function Ih(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Wd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Vh(e.ownerDocument.documentElement);else if("head"===n){Vh(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var o=s.nextSibling,a=s.nodeName;s[Qe]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}else"body"===n&&Vh(e.ownerDocument.body);n=i}while(n);Wd(t)}function Nh(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ah(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ah(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Rh(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Oh(e.nextSibling)))return null}return e}function Ph(e){return"$?"===e.data||"$~"===e.data}function Dh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Oh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Lh=null;function Mh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Oh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function jh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fh(e,t,n){switch(t=yh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Vh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var zh=new Map,Uh=new Set;function qh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bh=L.d;L.d={f:function(){var e=Bh.f(),t=eu();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?ia(t):Bh.r(e)},D:function(e){Bh.D(e),Wh("dns-prefetch",e,null)},C:function(e,t){Bh.C(e,t),Wh("preconnect",e,t)},L:function(e,t,n){Bh.L(e,t,n);var r=Hh;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=Gh(e);break;case"script":s=$h(e)}zh.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Qh(s))||"script"===t&&r.querySelector(Xh(s))||(fh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Bh.m(e,t);var n=Hh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=$h(e)}if(!zh.has(s)&&(e=f({rel:"modulepreload",href:e},t),zh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xh(s)))return}fh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Bh.X(e,t);var n=Hh;if(n&&e){var r=Ze(n).hoistableScripts,i=$h(e),s=r.get(i);s||((s=n.querySelector(Xh(i)))||(e=f({src:e,async:!0},t),(t=zh.get(i))&&td(e,t),et(s=n.createElement("script")),fh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Bh.S(e,t,n);var r=Hh;if(r&&e){var i=Ze(r).hoistableStyles,s=Gh(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Qh(s)))a.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zh.get(s))&&ed(e,n);var l=o=r.createElement("link");et(l),fh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Zh(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Bh.M(e,t);var n=Hh;if(n&&e){var r=Ze(n).hoistableScripts,i=$h(e),s=r.get(i);s||((s=n.querySelector(Xh(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=zh.get(i))&&td(e,t),et(s=n.createElement("script")),fh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Hh="undefined"===typeof document?null:document;function Wh(e,t,n){var r=Hh;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Uh.has(i)||(Uh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(fh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kh(e,t,n,r){var i,s,a,l,c=(c=K.current)?qh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gh(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gh(n.href);var u=Ze(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),zh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zh.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),fh(s,"link",a),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=$h(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Gh(e){return'href="'+yt(e)+'"'}function Qh(e){return'link[rel="stylesheet"]['+e+"]"}function Yh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function $h(e){return'[src="'+yt(e)+'"]'}function Xh(e){return"script[async]"+e}function Jh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fh(r,"style",i),Zh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Gh(n.href);var s=e.querySelector(Qh(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Yh(n),(i=zh.get(i))&&ed(r,i),et(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fh(s,"link",r),t.state.loading|=4,Zh(s,n.precedence,e),t.instance=s;case"script":return s=$h(n.src),(i=e.querySelector(Xh(s)))?(t.instance=i,et(i),i):(r=n,(i=zh.get(s))&&td(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),fh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zh(r,n.precedence,e));return t.instance}function Zh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function td(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nd=null;function rd(e,t,n){if(null===nd){var r=new Map,i=nd=new Map;i.set(n,r)}else(r=(i=nd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Qe]||s[Ue]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var od=0;function ad(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ld=null;function cd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ld=new Map,t.forEach(ud,e),ld=null,ad.call(e))}function ud(e,t){if(!(4&t.state.loading)){var n=ld.get(e);if(n)var r=n.get(null);else{n=new Map,ld.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var hd={$$typeof:w,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function dd(e,t,n,r,i,s,o,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fd(e,t,n,r,i,s,o,a,l,c,u,h){return e=new dd(e,t,n,o,l,c,u,h,a),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=zi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ys(s),e}function pd(e){return e?e=Mr:Mr}function md(e,t,n,r,i,s){i=pd(i),null===r.context?r.context=i:r.pendingContext=i,(r=_s(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(Yc(n,0,t),ws(n,e,t))}function gd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yd(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Yc(t,0,67108864),yd(e,67108864)}}function _d(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Dr(e,t=Me(t));null!==n&&Yc(n,0,t),yd(e,t)}}var bd=!0;function wd(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,Cd(e,t,n,r)}finally{L.p=s,O.T=i}}function Sd(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,Cd(e,t,n,r)}finally{L.p=s,O.T=i}}function Cd(e,t,n,r){if(bd){var i=Ed(r);if(null===i)nh(e,t,r,kd,n),Md(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nd=jd(Nd,e,t,n,r,i),!0;case"dragenter":return Ad=jd(Ad,e,t,n,r,i),!0;case"mouseover":return Rd=jd(Rd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pd.set(s,jd(Pd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dd.set(s,jd(Dd.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Md(e,r),4&t&&-1<Ld.indexOf(e)){for(;null!==i;){var s=Xe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=Te(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-be(o);a.entanglements[1]|=l,o&=~l}Mu(s),0===(6&pc)&&(Lc=le()+500,ju(0,!1))}}break;case 31:case 13:null!==(a=Dr(s,2))&&Yc(a,0,2),eu(),yd(s,2)}if(null===(s=Ed(r))&&nh(e,t,r,kd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else nh(e,t,r,null,n)}}function Ed(e){return Td(e=Ot(e))}var kd=null;function Td(e){if(kd=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kd=e,null}function xd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Id=!1,Nd=null,Ad=null,Rd=null,Pd=new Map,Dd=new Map,Od=[],Ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Md(e,t){switch(e){case"focusin":case"focusout":Nd=null;break;case"dragenter":case"dragleave":Ad=null;break;case"mouseover":case"mouseout":Rd=null;break;case"pointerover":case"pointerout":Pd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(t.pointerId)}}function jd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Xe(t))&&vd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Fd(e){var t=$e(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ve(e.priority,function(){_d(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ve(e.priority,function(){_d(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ed(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&vd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function zd(e,t,n){Vd(e)&&n.delete(t)}function Ud(){Id=!1,null!==Nd&&Vd(Nd)&&(Nd=null),null!==Ad&&Vd(Ad)&&(Ad=null),null!==Rd&&Vd(Rd)&&(Rd=null),Pd.forEach(zd),Dd.forEach(zd)}function qd(e,t){e.blockedOn===t&&(e.blockedOn=null,Id||(Id=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ud)))}var Bd=null;function Hd(e){Bd!==e&&(Bd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bd===e&&(Bd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Td(r||n))continue;break}var s=Xe(n);null!==s&&(e.splice(t,3),t-=3,na(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Wd(e){function t(t){return qd(t,e)}null!==Nd&&qd(Nd,e),null!==Ad&&qd(Ad,e),null!==Rd&&qd(Rd,e),Pd.forEach(t),Dd.forEach(t);for(var n=0;n<Od.length;n++){var r=Od[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Od.length&&null===(n=Od[0]).blockedOn;)Fd(n),null===n.blockedOn&&Od.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[qe]||null;if("function"===typeof s)o||Hd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[qe]||null)a=o.formAction;else if(null!==Td(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Hd(n)}}}function Kd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Gd(e){this._internalRoot=e}function Qd(e){this._internalRoot=e}Qd.prototype.render=Gd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));md(t.current,Gc(),e,t,null,null)},Qd.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;md(e.current,2,null,e,null,null),eu(),t[Be]=null}},Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Od.length&&0!==t&&t<Od[n].priority;n++);Od.splice(n,0,e),0===n&&Fd(e)}};var Yd=i.version;if("19.2.3"!==Yd)throw Error(o(527,Yd,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return h(i),e;if(s===r)return h(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var $d={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{ye=Xd.inject($d),ve=Xd}catch(Zd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ka,s=Ta,l=xa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fd(e,1,!1,null,0,n,r,null,i,s,l,Kd),e[Be]=t.current,eh(e),new Gd(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ka,l=Ta,c=xa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fd(e,1,!0,t,0,r,i,u,s,l,c,Kd)).context=pd(null),n=t.current,(i=_s(r=Me(r=Gc()))).callback=null,bs(n,i,r),n=r,t.current.lanes=n,Pe(t,n),Mu(t),e[Be]=t.current,eh(e),new Qd(t)},t.version="19.2.3"},43(e,t,n){e.exports=n(288)},288(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var w=b.prototype=new _;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray;function C(){}var E={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function T(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return A((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+N(e,0):s,S(o)?(i="",null!=u&&(i=u.replace(I,"$&/")+"/"),A(o,t,i,"",function(e){return e})):null!=o&&(x(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+u,o=T(l.type,c,l.props)),t.push(o)),1;u=0;var h,f=""===s?".":s+":";if(S(e))for(var m=0;m<e.length;m++)u+=A(s=e[m],t,i,a=f+N(s,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,a=f+N(s,m++),o);else if("object"===a){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return T(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return T(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),i=E.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(C,D)}catch(Rp){D(Rp)}finally{null!==t&&null!==n.types&&(t.types=n.types),E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useEffectEvent=function(e){return E.H.useEffectEvent(e)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.2.3"},391(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579(e,t,n){e.exports=n(799)},672(e,t,n){var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},799(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853(e,t,n){e.exports=n(896)},896(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,E||(E=!0,C());else{var t=r(u);null!==t&&P(S,t.startTime-e)}}var C,E=!1,k=-1,T=5,x=-1;function I(){return!!y||!(t.unstable_now()-x<T)}function N(){if(y=!1,E){var e=t.unstable_now();x=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(k),k=-1),p=!0;var s=f;try{t:{for(w(e),d=r(c);null!==d&&!(d.expirationTime>e&&I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===r(c)&&i(c),w(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&P(S,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?C():E=!1}}}if("function"===typeof b)C=function(){b(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=N,C=function(){R.postMessage(null)}}else C=function(){v(N,0)};function P(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(_(k),k=-1):g=!0,P(S,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,E||(E=!0,C()))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".6bd0a423.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="hiragana-game:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/hiragana-game/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,[o,a,l]=r,c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkhiragana_game=self.webpackChunkhiragana_game||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n.t(r,2),s=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],f=["page"],p=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var v="popstate";function _(){return T(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=k(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),C("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:E(t))},function(e,t){w("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function S(e,t){return{usr:e.state,key:e.key,idx:t}}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function E(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function k(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function T(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return x(e)}null==c&&(c=0,o.replaceState(h(h({},o.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(v,d),l=e,()=>{i.removeEventListener(v,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=C(p.location,e,t);n&&n(r,e),c=u()+1;let h=S(r,c),d=p.createHref(r);try{o.pushState(h,"",d)}catch(Rp){if(Rp instanceof DOMException&&"DataCloneError"===Rp.name)throw Rp;i.location.assign(d)}s&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let r=C(p.location,e,t);n&&n(r,e),c=u();let i=S(r,c),h=p.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:p.location,delta:0})},go:e=>o.go(e)};return p}function x(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:E(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function I(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let i=H(("string"===typeof t?k(t):t).pathname||"/",n);if(null==i)return null;let s=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=B(i);o=z(s[a],e,r)}return o}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;b(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=J([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:V(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of R(e.path))s(e,t,!0,r);else s(e,t)}),t}function R(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=R(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,D=3,O=2,L=1,M=10,j=-2,F=e=>"*"===e;function V(e,t){let n=e.split("/"),r=n.length;return n.some(F)&&(r+=j),t&&(r+=O),n.filter(e=>!F(e)).reduce((e,t)=>e+(P.test(t)?D:""===t?L:M),r)}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:J([s,u.pathname]),pathnameBase:Z(J([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=J([s,u.pathnameBase]))}return o}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=q(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function B(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(Rp){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(Rp,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var W=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K=e=>W.test(e);function G(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function Q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Y(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function $(e){let t=Y(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function X(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=k(e):(r=h({},e),b(!r.pathname||!r.pathname.includes("?"),Q("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),Q("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),Q("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:i="",hash:s=""}="string"===typeof e?k(e):e;if(r)if(K(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),w(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?G(r.substring(1),"/"):G(r,n)}else t=n;return{pathname:t,search:ee(i),hash:te(s)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ee=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",te=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ne=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function re(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function ie(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function oe(e,t){let n=e;if("string"!==typeof n||!W.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(se)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=H(r.pathname,t);r.origin===e.origin&&null!=s?n=s+r.search+r.hash:i=!0}catch(s){w(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:i,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ae=["POST","PUT","PATCH","DELETE"],le=(new Set(ae),["GET",...ae]);new Set(le),Symbol("ResetLoaderData");var ce=r.createContext(null);ce.displayName="DataRouter";var ue=r.createContext(null);ue.displayName="DataRouterState";var he=r.createContext(!1);function de(){return r.useContext(he)}var fe=r.createContext({isTransitioning:!1});fe.displayName="ViewTransition";var pe=r.createContext(new Map);pe.displayName="Fetchers";var me=r.createContext(null);me.displayName="Await";var ge=r.createContext(null);ge.displayName="Navigation";var ye=r.createContext(null);ye.displayName="Location";var ve=r.createContext({outlet:null,matches:[],isDataRoute:!1});ve.displayName="Route";var _e=r.createContext(null);_e.displayName="RouteError";var be="REACT_ROUTER_ERROR";function we(){return null!=r.useContext(ye)}function Se(){return b(we(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ye).location}var Ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ee(e){r.useContext(ge).static||r.useLayoutEffect(e)}function ke(){let{isDataRoute:e}=r.useContext(ve);return e?function(){let{router:e}=Me("useNavigate"),t=Fe("useNavigate"),n=r.useRef(!1);Ee(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(n.current,Ce),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,h({fromRouteId:t},i)))},[e,t]);return i}():function(){b(we(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ce),{basename:t,navigator:n}=r.useContext(ge),{matches:i}=r.useContext(ve),{pathname:s}=Se(),o=JSON.stringify($(i)),a=r.useRef(!1);Ee(()=>{a.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(a.current,Ce),!a.current)return;if("number"===typeof r)return void n.go(r);let l=X(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:J([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,o,s,e]);return l}()}r.createContext(null);function Te(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ve),{pathname:i}=Se(),s=JSON.stringify($(n));return r.useMemo(()=>X(e,JSON.parse(s),i,"path"===t),[e,s,i,t])}function xe(e,t,n,i,s){b(we(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=r.useContext(ge),{matches:a}=r.useContext(ve),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Ue(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=Se();if(t){var g;let e="string"===typeof t?k(t):t;b("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=I(e,{pathname:v});w(f||null!=_,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),w(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=Oe(_&&_.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:J([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:J([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,i,s);return t&&S?r.createElement(ye.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},S):S}function Ie(){let e=Ve(),t=re(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,a)}var Ne=r.createElement(Ie,null),Ae=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(be,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ne(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?r.createElement(ve.Provider,{value:this.props.routeContext},r.createElement(_e.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?r.createElement(Pe,{error:e},t):t}};Ae.contextType=he;var Re=new WeakMap;function Pe(e){let{children:t,error:n}=e,{basename:i}=r.useContext(ge);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(be,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Re.get(n);if(t)throw t;let s=oe(e.location,i);if(se&&!Re.get(n)){if(!s.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:e.replace}));throw Re.set(n,t),t}window.location.href=s.absoluteURL||s.to}return r.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(s.absoluteURL||s.to)})}}return t}function De(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(ce);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ve.Provider,{value:t},i)}function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}let c=n&&i?(e,t)=>{var r,s;i(e,{location:n.location,params:null!==(r=null===(s=n.matches)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.params)&&void 0!==r?r:{},unstable_pattern:ie(n.matches),errorInfo:t})}:void 0;return s.reduceRight((e,i,u)=>{let h,d=!1,f=null,p=null;n&&(h=o&&i.route.id?o[i.route.id]:void 0,f=i.route.errorElement||Ne,a&&(l<0&&0===u?(Ue("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,u+1)),g=()=>{let t;return t=h?f:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(De,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?r.createElement(Ae,{location:n.location,revalidation:n.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function Le(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(e){let t=r.useContext(ce);return b(t,Le(e)),t}function je(e){let t=r.useContext(ue);return b(t,Le(e)),t}function Fe(e){let t=function(e){let t=r.useContext(ve);return b(t,Le(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ve(){var e;let t=r.useContext(_e),n=je("useRouteError"),i=Fe("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var ze={};function Ue(e,t,n){t||ze[e]||(ze[e]=!0,w(!1,n))}var qe={};function Be(e,t){e||qe[t]||(qe[t]=!0,console.warn(t))}i.useOptimistic;r.memo(function(e){let{routes:t,future:n,state:r,onError:i}=e;return xe(t,void 0,r,i,n)});function He(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function We(e){let{basename:t="/",children:n=null,location:i,navigationType:s="POP",navigator:o,static:a=!1,unstable_useTransitions:l}=e;b(!we(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:o,static:a,unstable_useTransitions:l,future:{}}),[c,o,a,l]);"string"===typeof i&&(i=k(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=r.useMemo(()=>{let e=H(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}},[c,h,d,f,p,m,s]);return w(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(h).concat(d).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:r.createElement(ge.Provider,{value:u},r.createElement(ye.Provider,{children:n,value:g}))}function Ke(e){let{children:t,location:n}=e;return xe(Ge(t),n)}r.Component;function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Ge(e.props.children,s));b(e.type===He,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ge(e.props.children,s)),n.push(o)}),n}var Qe="get",Ye="application/x-www-form-urlencoded";function $e(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var Xe=null;var Je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ze(e){return null==e||Je.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ye,'"')),null)}function et(e,t){let n,r,i,s,o;if($e(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?H(o,t):null,n=e.getAttribute("method")||Qe,i=Ze(e.getAttribute("enctype"))||Ye,s=new FormData(e)}else if(function(e){return $e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?H(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Qe,i=Ze(e.getAttribute("formenctype"))||Ze(o.getAttribute("enctype"))||Ye,s=new FormData(o,e),!function(){if(null===Xe)try{new FormData(document.createElement("form"),0),Xe=!1}catch(e){Xe=!0}return Xe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if($e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qe,r=null,i=Ye,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function tt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function nt(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===H(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function rt(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(Rp){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(Rp),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function it(e){return null!=e&&"string"===typeof e.page}function st(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ot(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function at(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function lt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!it(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function ct(e,t){return"lazy"===e.mode&&!0===t}function ut(){let e=r.useContext(ce);return tt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ht(){let e=r.useContext(ue);return tt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var dt=r.createContext(void 0);function ft(){let e=r.useContext(dt);return tt(e,"You must render this element inside a <HydratedRouter> element"),e}function pt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mt(e,t,n){if(n&&!_t)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}dt.displayName="FrameworkContext";function gt(e){let{page:t}=e,n=o(e,f),{router:i}=ut(),s=r.useMemo(()=>I(i.routes,t,i.basename),[i.routes,t,i.basename]);return s?r.createElement(vt,h({page:t,matches:s},n)):null}function yt(e){let{manifest:t,routeModules:n}=ft(),[i,s]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return lt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await rt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(st).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),i}function vt(e){let{page:t,matches:n}=e,i=o(e,p),s=Se(),{manifest:a,routeModules:l}=ft(),{basename:c}=ut(),{loaderData:u,matches:d}=ht(),f=r.useMemo(()=>ot(t,n,d,a,s,"data"),[t,n,d,a,s]),m=r.useMemo(()=>ot(t,n,d,a,s,"assets"),[t,n,d,a,s]),g=r.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=nt(t,c,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[c,u,s,a,f,n,t,l]),y=r.useMemo(()=>at(m,a),[m,a]),v=yt(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",h({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",h({key:t,nonce:i.nonce},n))}))}var _t=!1;function bt(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:s,routeDiscovery:a,ssr:l}=ft(),{router:c,static:u,staticContext:f}=ut(),{matches:p}=ht(),m=de(),g=ct(a,l);s&&(s.didRenderScripts=!0);let y=mt(p,null,i);r.useEffect(()=>{_t=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let s=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=u?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];tt(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach(e=>{let n=I(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return h(h({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),r.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),_=_t||m?[]:(b=t.entry.imports.concat(at(y,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof t.sri?t.sri:{};return Be(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),_t||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),_.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function wt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function St(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(re(t))return r.createElement(Ct,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(Ct,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function Ct(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:s,children:o}=e,{routeModules:a}=ft();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!s?o:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,i?r.createElement(bt,null):null)))}var Et="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Et&&(window.__reactRouterVersion="7.11.0")}catch(q_){}function kt(e){let{basename:t,children:n,unstable_useTransitions:i,window:s}=e,o=r.useRef();null==o.current&&(o.current=_({window:s,v5Compat:!0}));let a=o.current,[l,c]=r.useState({action:a.action,location:a.location}),u=r.useCallback(e=>{!1===i?c(e):r.startTransition(()=>c(e))},[i]);return r.useLayoutEffect(()=>a.listen(u),[a,u]),r.createElement(We,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:i})}var Tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=r.forwardRef(function(e,t){let{onClick:n,discover:i="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:u,target:d,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y}=e,v=o(e,m),{basename:_,unstable_useTransitions:w}=r.useContext(ge),S="string"===typeof f&&Tt.test(f),C=oe(f,_);f=C.to;let k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(we(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(ge),{hash:s,pathname:o,search:a}=Te(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:J([n,o])),i.createHref({pathname:l,search:a,hash:s})}(f,{relative:a}),[T,x,I]=function(e,t){let n=r.useContext(dt),[i,s]=r.useState(!1),[o,a]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:pt(l,p),onBlur:pt(c,m),onMouseEnter:pt(u,p),onMouseLeave:pt(h,m),onTouchStart:pt(d,p)}]:[!1,f,{}]}(s,v),N=function(e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=ke(),h=Se(),d=Te(e,{relative:o});return r.useCallback(f=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(f,t)){f.preventDefault();let t=void 0!==n?n:E(h)===E(d),p=()=>u(e,{replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:l});c?r.startTransition(()=>p()):p()}},[h,u,d,n,i,t,e,s,o,a,l,c])}(f,{replace:c,state:u,target:d,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:w});let A=r.createElement("a",h(h(h({},v),I),{},{href:C.absoluteURL||k,onClick:C.isExternal||l?n:function(e){n&&n(e),e.defaultPrevented||N(e)},ref:wt(t,x),target:d,"data-discover":S||"render"!==i?void 0:"true"}));return T&&!S?r.createElement(r.Fragment,null,A,r.createElement(gt,{page:k})):A});xt.displayName="Link";var It=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,f=o(e,g),p=Te(c,{relative:f.relative}),m=Se(),y=r.useContext(ue),{navigator:v,basename:_}=r.useContext(ge),w=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(fe);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Rt("useViewTransitionState"),s=Te(e,{relative:t});if(!n.isTransitioning)return!1;let o=H(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=H(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=U(s.pathname,a)||null!=U(s.pathname,o)}(p)&&!0===u,S=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,C=m.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(C=C.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&_&&(E=H(E,_)||E);const k="/"!==S&&S.endsWith("/")?S.length-1:S.length;let T,x=C===S||!a&&C.startsWith(S)&&"/"===C.charAt(k),I=null!=E&&(E===S||!a&&E.startsWith(S)&&"/"===E.charAt(S.length)),N={isActive:x,isPending:I,isTransitioning:w},A=x?n:void 0;T="function"===typeof s?s(N):[s,x?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof l?l(N):l;return r.createElement(xt,h(h({},f),{},{"aria-current":A,className:T,ref:t,style:R,to:c,viewTransition:u}),"function"===typeof d?d(N):d)});It.displayName="NavLink";var Nt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:a,replace:l,state:c,method:u=Qe,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:v}=e,_=o(e,y),{unstable_useTransitions:w}=r.useContext(ge),S=Ot(),C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ge),i=r.useContext(ve);b(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o=h({},Te(e||".",{relative:t})),a=Se();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:J([n,o.pathname]));return E(o)}(d,{relative:p}),k="get"===u.toLowerCase()?"get":"post",T="string"===typeof d&&Tt.test(d);return r.createElement("form",h(h({ref:t,method:k,action:C,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u,o=()=>S(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:v});w&&!1!==s?r.startTransition(()=>o()):o()}},_),{},{"data-discover":T||"render"!==n?void 0:"true"}))});function At(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Rt(e){let t=r.useContext(ce);return b(t,At(e)),t}Nt.displayName="Form";var Pt=0,Dt=()=>"__".concat(String(++Pt),"__");function Ot(){let{router:e}=Rt("useSubmit"),{basename:t}=r.useContext(ge),n=Fe("useRouteId"),i=e.fetch,s=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:l,formData:c,body:u}=et(e,t);if(!1===r.navigate){let e=r.fetcherKey||Dt();await i(e,n,r.action||o,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await s(r.action||o,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,s,t,n])}const Lt=[{character:"\u3042",romaji:"a"},{character:"\u3044",romaji:"i"},{character:"\u3046",romaji:"u"},{character:"\u3048",romaji:"e"},{character:"\u304a",romaji:"o"},{character:"\u304b",romaji:"ka"},{character:"\u304d",romaji:"ki"},{character:"\u304f",romaji:"ku"},{character:"\u3051",romaji:"ke"},{character:"\u3053",romaji:"ko"},{character:"\u3055",romaji:"sa"},{character:"\u3057",romaji:"shi"},{character:"\u3059",romaji:"su"},{character:"\u305b",romaji:"se"},{character:"\u305d",romaji:"so"},{character:"\u305f",romaji:"ta"},{character:"\u3061",romaji:"chi"},{character:"\u3064",romaji:"tsu"},{character:"\u3066",romaji:"te"},{character:"\u3068",romaji:"to"},{character:"\u306a",romaji:"na"},{character:"\u306b",romaji:"ni"},{character:"\u306c",romaji:"nu"},{character:"\u306d",romaji:"ne"},{character:"\u306e",romaji:"no"},{character:"\u306f",romaji:"ha"},{character:"\u3072",romaji:"hi"},{character:"\u3075",romaji:"fu"},{character:"\u3078",romaji:"he"},{character:"\u307b",romaji:"ho"},{character:"\u307e",romaji:"ma"},{character:"\u307f",romaji:"mi"},{character:"\u3080",romaji:"mu"},{character:"\u3081",romaji:"me"},{character:"\u3082",romaji:"mo"},{character:"\u3084",romaji:"ya"},{character:"",romaji:""},{character:"\u3086",romaji:"yu"},{character:"",romaji:""},{character:"\u3088",romaji:"yo"},{character:"\u3089",romaji:"ra"},{character:"\u308a",romaji:"ri"},{character:"\u308b",romaji:"ru"},{character:"\u308c",romaji:"re"},{character:"\u308d",romaji:"ro"},{character:"\u308f",romaji:"wa"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"\u3092",romaji:"wo"},{character:"\u3093",romaji:"n"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""}];var Mt=n(579);const jt=e=>{let{dataset:t,onEnd:n,onCancel:i}=e;const[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(0),[c,u]=(0,r.useState)(0),[d,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!t||0===t.length)return;const e=[...t].sort(()=>.5-Math.random()).slice(0,10).map(e=>{const n=t.filter(t=>t.romaji!==e.romaji).sort(()=>.5-Math.random()).slice(0,3),r=[e,...n].sort(()=>.5-Math.random());return h(h({},e),{},{options:r})});o(e)},[t]);if(0===s.length)return(0,Mt.jsx)("div",{className:"loading-text",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e42\u0e08\u0e17\u0e22\u0e4c..."});const v=s[a];return(0,Mt.jsxs)("div",{className:"game-card",children:[(0,Mt.jsx)("div",{className:"progress-bar",children:(0,Mt.jsx)("div",{className:"fill",style:{width:"".concat(a/10*100,"%")}})}),(0,Mt.jsx)("div",{className:"question-area",children:(0,Mt.jsx)("div",{className:"hiragana-char",children:v.char||v.character||"?"})}),(0,Mt.jsx)("div",{className:"options-grid",children:v.options.map(e=>{let t="option-btn";return p&&(e.romaji===v.romaji?t+=" correct":e.romaji===d&&(t+=" wrong")),(0,Mt.jsx)("button",{className:t,onClick:()=>(e=>{if(p)return;const t=s[a],r=e===t.romaji;f(e),m(!0),r&&u(c+1),y([...g,{romaji:t.romaji,isCorrect:r}]),setTimeout(()=>{a+1<10?(l(a+1),m(!1),f(null)):n({score:r?c+1:c,total:10,details:[...g,{romaji:t.romaji,isCorrect:r}]})},1200)})(e.romaji),disabled:p,children:e.romaji},e.romaji)})}),(0,Mt.jsxs)("div",{className:"game-footer",children:[(0,Mt.jsxs)("span",{children:["Score: ",c]}),(0,Mt.jsx)("button",{className:"text-btn",onClick:i,children:"Quit"})]})]})},Ft=!1,Vt=!1,zt="${JSCORE_VERSION}",Ut=function(e,t){if(!e)throw qt(t)},qt=function(e){return new Error("Firebase Database ("+zt+") INTERNAL ASSERT FAILED: "+e)},Bt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Wt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Wt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kt=function(e){const t=Bt(e);return Ht.encodeByteArray(t,!0)},Gt=function(e){return Kt(e).replace(/\./g,"")},Qt=function(e){try{return Ht.decodeString(e,!0)}catch(q_){console.error("base64Decode failed: ",q_)}return null};function Yt(e){return $t(void 0,e)}function $t(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Xt(n)&&(e[n]=$t(e[n],t[n]));return e}function Xt(e){return"__proto__"!==e}function Jt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Zt=()=>{try{return Jt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/hiragana-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(q_){return}const t=e&&Qt(e[1]);return t&&JSON.parse(t)})()}catch(q_){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(q_))}},en=e=>{const t=(e=>{var t;return null===(t=Zt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},tn=()=>{var e;return null===(e=Zt())||void 0===e?void 0:e.config};class nn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function rn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function sn(e){return(await fetch(e,{credentials:"include"})).ok}function on(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=h({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gt(JSON.stringify({alg:"none",type:"JWT"})),Gt(JSON.stringify(s)),""].join(".")}const an={};let ln=!1;function cn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!rn(window.location.host)||an[e]===t||an[e]||ln)return;function n(e){return"__firebase__banner__".concat(e)}an[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(an))an[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{ln=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function un(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function hn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function dn(){var e;const t=null===(e=Zt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(q_){return!1}}function fn(){return!0===Ft||!0===Vt}function pn(){return!dn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mn(){try{return"object"===typeof indexedDB}catch(q_){return!1}}class gn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yn.prototype.create)}}class yn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(vn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new gn(n,s,t)}}const vn=/\{\$([^}]+)}/g;function _n(e){return JSON.parse(e)}function bn(e){return JSON.stringify(e)}const wn=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=_n(Qt(s[0])||""),n=_n(Qt(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(q_){}return{header:t,claims:n,data:r,signature:i}};function Sn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Cn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function En(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function kn(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Tn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(xn(n)&&xn(s)){if(!Tn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function xn(e){return null!==e&&"object"===typeof e}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function Nn(e,t){return"".concat(e," failed: ").concat(t," argument ")}const An=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Rn(e){return e&&e._delegate?e._delegate:e}class Pn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Dn="[DEFAULT]";class On{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new nn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(q_){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(q_){if(r)return null;throw q_}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Dn})}catch(q_){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(q_){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Dn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return this.component?this.component.multipleInstances?e:Dn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ln{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new On(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Mn=[];var jn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jn||(jn={}));const Fn={debug:jn.DEBUG,verbose:jn.VERBOSE,info:jn.INFO,warn:jn.WARN,error:jn.ERROR,silent:jn.SILENT},Vn=jn.INFO,zn={[jn.DEBUG]:"log",[jn.VERBOSE]:"log",[jn.INFO]:"info",[jn.WARN]:"warn",[jn.ERROR]:"error"},Un=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=zn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class qn{constructor(e){this.name=e,this._logLevel=Vn,this._logHandler=Un,this._userLogHandler=null,Mn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Fn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.DEBUG,...t),this._logHandler(this,jn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.VERBOSE,...t),this._logHandler(this,jn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.INFO,...t),this._logHandler(this,jn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.WARN,...t),this._logHandler(this,jn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jn.ERROR,...t),this._logHandler(this,jn.ERROR,...t)}}let Bn,Hn;const Wn=new WeakMap,Kn=new WeakMap,Gn=new WeakMap,Qn=new WeakMap,Yn=new WeakMap;let $n={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Kn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Xn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Hn||(Hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(er(this),n),Zn(Wn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zn(e.apply(er(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(er(this),t,...r);return Gn.set(s,t.sort?t.sort():[t]),Zn(s)}}function Jn(e){return"function"===typeof e?Xn(e):(e instanceof IDBTransaction&&function(e){if(Kn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Kn.set(e,t)}(e),t=e,(Bn||(Bn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,$n):e);var t}function Zn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Zn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Wn.set(t,e)}).catch(()=>{}),Yn.set(t,e),t}(e);if(Qn.has(e))return Qn.get(e);const t=Jn(e);return t!==e&&(Qn.set(e,t),Yn.set(t,e)),t}const er=e=>Yn.get(e);const tr=["get","getKey","getAll","getAllKeys","count"],nr=["put","add","delete","clear"],rr=new Map;function ir(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rr.get(t))return rr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=nr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tr.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return rr.set(t,s),s}$n=(e=>h(h({},e),{},{get:(t,n,r)=>ir(t,n)||e.get(t,n,r),has:(t,n)=>!!ir(t,n)||e.has(t,n)}))($n);class sr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const or="@firebase/app",ar="0.14.6",lr=new qn("@firebase/app"),cr="@firebase/app-compat",ur="@firebase/analytics-compat",hr="@firebase/analytics",dr="@firebase/app-check-compat",fr="@firebase/app-check",pr="@firebase/auth",mr="@firebase/auth-compat",gr="@firebase/database",yr="@firebase/data-connect",vr="@firebase/database-compat",_r="@firebase/functions",br="@firebase/functions-compat",wr="@firebase/installations",Sr="@firebase/installations-compat",Cr="@firebase/messaging",Er="@firebase/messaging-compat",kr="@firebase/performance",Tr="@firebase/performance-compat",xr="@firebase/remote-config",Ir="@firebase/remote-config-compat",Nr="@firebase/storage",Ar="@firebase/storage-compat",Rr="@firebase/firestore",Pr="@firebase/ai",Dr="@firebase/firestore-compat",Or="firebase",Lr="[DEFAULT]",Mr={[or]:"fire-core",[cr]:"fire-core-compat",[hr]:"fire-analytics",[ur]:"fire-analytics-compat",[fr]:"fire-app-check",[dr]:"fire-app-check-compat",[pr]:"fire-auth",[mr]:"fire-auth-compat",[gr]:"fire-rtdb",[yr]:"fire-data-connect",[vr]:"fire-rtdb-compat",[_r]:"fire-fn",[br]:"fire-fn-compat",[wr]:"fire-iid",[Sr]:"fire-iid-compat",[Cr]:"fire-fcm",[Er]:"fire-fcm-compat",[kr]:"fire-perf",[Tr]:"fire-perf-compat",[xr]:"fire-rc",[Ir]:"fire-rc-compat",[Nr]:"fire-gcs",[Ar]:"fire-gcs-compat",[Rr]:"fire-fst",[Dr]:"fire-fst-compat",[Pr]:"fire-vertex","fire-js":"fire-js",[Or]:"fire-js-all"},jr=new Map,Fr=new Map,Vr=new Map;function zr(e,t){try{e.container.addComponent(t)}catch(q_){lr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),q_)}}function Ur(e){const t=e.name;if(Vr.has(t))return lr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Vr.set(t,e);for(const n of jr.values())zr(n,e);for(const n of Fr.values())zr(n,e);return!0}function qr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Br(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Hr=new yn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wr{constructor(e,t,n){this._isDeleted=!1,this._options=h({},e),this._config=h({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}const Kr="12.6.0";function Gr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=h({name:Lr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(n||(n=tn()),!n)throw Hr.create("no-options");const s=jr.get(i);if(s){if(Tn(n,s.options)&&Tn(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}const o=new Ln(i);for(const l of Vr.values())o.addComponent(l);const a=new Wr(n,r,o);return jr.set(i,a),a}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr;const t=jr.get(e);if(!t&&e===Lr&&tn())return Gr();if(!t)throw Hr.create("no-app",{appName:e});return t}function Yr(e,t,n){var r;let i=null!==(r=Mr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void lr.warn(e.join(" "))}Ur(new Pn("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const $r="firebase-heartbeat-store";let Xr=null;function Jr(){return Xr||(Xr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Zn(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Zn(o.result),e.oldVersion,e.newVersion,Zn(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore($r)}catch(q_){console.warn(q_)}}}).catch(e=>{throw Hr.create("idb-open",{originalErrorMessage:e.message})})),Xr}async function Zr(e,t){try{const n=(await Jr()).transaction($r,"readwrite"),r=n.objectStore($r);await r.put(t,ei(e)),await n.done}catch(q_){if(q_ instanceof gn)lr.warn(q_.message);else{const t=Hr.create("idb-set",{originalErrorMessage:null===q_||void 0===q_?void 0:q_.message});lr.warn(t.message)}}}function ei(e){return"".concat(e.name,"!").concat(e.options.appId)}class ti{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ri(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ni();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(q_){lr.warn(q_)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ni(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ii(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ii(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Gt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(q_){return lr.warn(q_),""}}}function ni(){return(new Date).toISOString().substring(0,10)}class ri{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!mn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Rp){t(Rp)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Jr()).transaction($r),n=await t.objectStore($r).get(ei(e));return await t.done,n}catch(q_){if(q_ instanceof gn)lr.warn(q_.message);else{const t=Hr.create("idb-get",{originalErrorMessage:null===q_||void 0===q_?void 0:q_.message});lr.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ii(e){return Gt(JSON.stringify({version:2,heartbeats:e})).length}var si;si="",Ur(new Pn("platform-logger",e=>new sr(e),"PRIVATE")),Ur(new Pn("heartbeat",e=>new ti(e),"PRIVATE")),Yr(or,ar,si),Yr(or,ar,"esm2020"),Yr("fire-js","");Yr("firebase","12.7.0","app");var oi,ai,li="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ci={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,ai=ci.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},oi=ci.Integer=r}).apply("undefined"!==typeof li?li:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ui,hi,di,fi,pi,mi,gi,yi,vi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},_i={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof vi&&vi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,_=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}_=!1}function C(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function x(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(x,E),x.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&x.Z.h.call(this)},x.prototype.h=function(){x.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),N=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++N,this.da=this.fa=!1}function R(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function j(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(R(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}M.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=F(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),z={};function U(e,t,n,r,i){if(r&&r.once)return B(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)U(e,t[s],n,r,i);return null}return n=$(n),e&&e[I]?e.J(t,n,o(r)?!!r.capture:!!r,i):q(e,t,n,!1,r,i)}function q(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[V]=l=new M(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)k||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function B(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)B(e,t[s],n,r,i);return null}return n=$(n),e&&e[I]?e.K(t,n,o(r)?!!r.capture:!!r,i):q(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=$(n),e&&e[I]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(R(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])j(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(j(n,e),0==n.h&&(n.src=null,t[V]=null)):R(e)}}}function K(e){return e in z?z[e]:z[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new x(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[V])instanceof M?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function $(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function X(){C.call(this),this.i=new M(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;L(t=new E(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&j(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,C),X.prototype[I]=!0,X.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)R(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends C{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){C.call(this),this.h=e,this.g={}}u(ne,C);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){E.call(this,"d")}function de(){E.call(this,"c")}u(he,E),u(de,E);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();J(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function _e(e){const t=me();J(t,new ve(t,e))}function be(e,t){E.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Se(){this.g=!0}function Ce(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(be,E),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ee,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function xe(){}function Ie(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}u(xe,le),xe.prototype.g=function(){return new XMLHttpRequest},Ee=new xe;var Pe={},De={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Re,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=U(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ve(e,e.H)}function Ve(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function ze(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ue(e){0==e.j.I||e.K||en(e.j,e)}function qe(e){ze(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Be(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Bt(n)}$t(n),_e(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),o.L){$e(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(ze(a),Fe(a)),r.g=o}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):qt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Vt(this.g)))){this.K||4!=l||7==c||ye(),ze(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=Vt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return qe(e),Ue(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,_e(12),qe(this),Ue(this);break e}Ce(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=je(this,n),t==De){4==l&&(this.m=4,_e(14),e=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,_e(15),Ce(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ce(this.i,this.l,t,null),Be(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,_e(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(a),a.P=!0,_e(11))}}else Ce(this.i,this.l,n,"[Invalid Chunked Response]"),qe(this),Ue(this)}else Ce(this.i,this.l,n,null),Be(this,n);4==l&&qe(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ne(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),qe(this),Ue(this)}}}catch(Zi){}},Ae.prototype.cancel=function(){this.K=!0,qe(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),_e(17)),qe(this),this.m=2,Ue(this)):Ve(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function $e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}We.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function _t(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),d(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function kt(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function xt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Nt(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nt(n),"string"===typeof e?null!=n&&Ie(n):it(e,t,n))}function Rt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new kt(this.i,this.h)},u(kt,X),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,xt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xt(this):It(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,xt(this))},e.Na=function(e){this.g&&(this.response=e,xt(this))},e.ga=function(){this.g&&xt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Rt,X);var Pt=/^https?$/i,Dt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),jt(e)}function Lt(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Je)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var o=Ft(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Lt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||J(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Vt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ut(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zt("baseRetryDelayMs",5e3,e),this.Za=zt("retryDelaySeedMs",1e4,e),this.Ta=zt("forwardChannelMaxRetries",2,e),this.va=zt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new Ct,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function qt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Bt(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Ht(e){Bt(e),e.v&&(s.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),_||(v(),_=!0),b.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function Gt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(wi){throw e.push(s+"type="+encodeURIComponent("_badmap")),wi}}catch(wi){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),_||(v(),_=!0),b.add(t,e),e.A=0}}function $t(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Le(n,e)}function Zt(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,$e(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;J(r=me(),new be(r,n)),Wt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&$t(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Se;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Rt(new Et({ab:n})):new Rt(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){X.call(this),this.g=new Ut(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function un(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=Rt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ot(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ot(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Rt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Ut.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),L(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),s&&(this.R?t="headers="+Ie(Nt(s))+"&"+t:this.u&&At(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Bt(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,Bt(this),$t(this),_e(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){qt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,cn.Z.N.call(this)},u(un,he),u(hn,de),u(dn,an),dn.prototype.ra=function(){J(this.g,"a")},dn.prototype.qa=function(e){J(this.g,new un(e))},dn.prototype.pa=function(e){J(this.g,new hn)},dn.prototype.oa=function(){J(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,yi=_i.createWebChannelTransport=function(){return new ln},gi=_i.getStatEventTarget=function(){return me()},mi=_i.Event=fe,pi=_i.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,fi=_i.ErrorCode=ke,Te.COMPLETE="complete",di=_i.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,hi=_i.WebChannel=ce,_i.FetchXmlHttpFactory=Et,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,ui=_i.XhrIo=Rt}).apply("undefined"!==typeof vi?vi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const bi="@firebase/firestore",wi="4.9.3";class Si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");let Ci="12.7.0";const Ei=new qn("@firebase/firestore");function ki(){return Ei.logLevel}function Ti(e){if(Ei.logLevel<=jn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ni);Ei.debug("Firestore (".concat(Ci,"): ").concat(e),...i)}}function xi(e){if(Ei.logLevel<=jn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ni);Ei.error("Firestore (".concat(Ci,"): ").concat(e),...i)}}function Ii(e){if(Ei.logLevel<=jn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ni);Ei.warn("Firestore (".concat(Ci,"): ").concat(e),...i)}}function Ni(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ai(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ri(e,r,n)}function Ri(e,t,n){let r="FIRESTORE (".concat(Ci,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw xi(r),new Error(r)}function Pi(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ri(t,i,r)}function Di(e,t){return e}const Oi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ji{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Si.UNAUTHENTICATED))}shutdown(){}}class Vi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zi{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pi(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mi,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Ti("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ti("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mi)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ti("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pi("string"==typeof t.accessToken,31837,{l:t}),new ji(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pi(null===e||"string"==typeof e,2055,{h:e}),new Si(e)}}class Ui{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qi{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ui(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hi{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pi(void 0===this.o,3512);const n=e=>{null!=e.error&&Ti("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Ti("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ti("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ti("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Pi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Bi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Wi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ki{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Wi(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Gi(e,t){return e<t?-1:e>t?1:0}function Qi(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Xi(n)===Xi(i)?Gi(n,i):Xi(n)?1:-1}return Gi(e.length,t.length)}const Yi=55296,$i=57343;function Xi(e){const t=e.charCodeAt(0);return t>=Yi&&t<=$i}function Ji(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Zi="__name__";class es{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ai(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ai(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===es.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=es.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Gi(e.length,t.length)}static compareSegments(e,t){const n=es.isNumericId(e),r=es.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?es.extractNumericId(e).compare(es.extractNumericId(t)):Qi(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oi.fromString(e.substring(4,e.length-2))}}class ts extends es{construct(e,t,n){return new ts(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Li(Oi.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ts(e)}static emptyPath(){return new ts([])}}const ns=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rs extends es{construct(e,t,n){return new rs(e,t,n)}static isValidIdentifier(e){return ns.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Zi}static keyField(){return new rs([Zi])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Li(Oi.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Li(Oi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Li(Oi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Li(Oi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rs(t)}static emptyPath(){return new rs([])}}class is{constructor(e){this.path=e}static fromPath(e){return new is(ts.fromString(e))}static fromName(e){return new is(ts.fromString(e).popFirst(5))}static empty(){return new is(ts.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ts.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ts.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new is(new ts(e.slice()))}}function ss(e,t,n){if(!n)throw new Li(Oi.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function os(e){if(!is.isDocumentKey(e))throw new Li(Oi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function as(e){if(is.isDocumentKey(e))throw new Li(Oi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ls(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function cs(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ai(12329,{type:typeof e})}function us(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Li(Oi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cs(e);throw new Li(Oi.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function hs(e,t){if(t<=0)throw new Li(Oi.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function ds(e,t){const n={typeString:e};return t&&(n.value=t),n}function fs(e,t){if(!ls(e))throw new Li(Oi.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Li(Oi.INVALID_ARGUMENT,n);return!0}const ps=-62135596800,ms=1e6;class gs{static now(){return gs.fromMillis(Date.now())}static fromDate(e){return gs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ms);return new gs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Li(Oi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Li(Oi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ps)throw new Li(Oi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Li(Oi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ms}_compareTo(e){return this.seconds===e.seconds?Gi(this.nanoseconds,e.nanoseconds):Gi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fs(e,gs._jsonSchema))return new gs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ps;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gs._jsonSchemaVersion="firestore/timestamp/1.0",gs._jsonSchema={type:ds("string",gs._jsonSchemaVersion),seconds:ds("number"),nanoseconds:ds("number")};class ys{static fromTimestamp(e){return new ys(e)}static min(){return new ys(new gs(0,0))}static max(){return new ys(new gs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const vs=-1;class _s{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}_s.UNKNOWN_ID=-1;function bs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ys.fromTimestamp(1e9===r?new gs(n+1,0):new gs(n,r));return new Ss(i,is.empty(),t)}function ws(e){return new Ss(e.readTime,e.key,vs)}class Ss{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ss(ys.min(),is.empty(),vs)}static max(){return new Ss(ys.max(),is.empty(),vs)}}function Cs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=is.comparator(e.documentKey,t.documentKey),0!==n?n:Gi(e.largestBatchId,t.largestBatchId))}const Es="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ks{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ts(e){if(e.code!==Oi.FAILED_PRECONDITION||e.message!==Es)throw e;Ti("LocalStore","Unexpectedly lost primary lease")}class xs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ai(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xs((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xs?t:xs.resolve(t)}catch(e){return xs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xs.reject(t)}static resolve(e){return new xs((t,n)=>{t(e)})}static reject(e){return new xs((t,n)=>{n(e)})}static waitFor(e){return new xs((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=xs.resolve(!1);for(const n of e)t=t.next(e=>e?xs.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new xs((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new xs((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Is(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ns(e){return"IndexedDbTransactionError"===e.name}class As{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}As.ce=-1;const Rs=-1;function Ps(e){return null==e}function Ds(e){return 0===e&&1/e==-1/0}function Os(e){return"number"==typeof e&&Number.isInteger(e)&&!Ds(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ls="\x01";function Ms(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fs(t)),t=js(e.get(n),t);return Fs(t)}function js(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ls:n+="\x01\x11";break;default:n+=t}}return n}function Fs(e){return e+Ls+"\x01"}const Vs="remoteDocuments",zs="owner",Us="mutationQueues",qs="mutations";const Bs="documentMutations",Hs="remoteDocumentsV14",Ws="remoteDocumentGlobal",Ks="targets",Gs="targetDocuments",Qs="targetGlobal",Ys="collectionParents",$s="clientMetadata",Xs="bundles",Js="namedQueries",Zs="indexConfiguration",eo="indexState",to="indexEntries",no="documentOverlays",ro="globals",io=[Us,qs,Bs,Vs,Ks,zs,Qs,Gs,$s,Ws,Ys,Xs,Js],so=[Us,qs,Bs,Hs,Ks,zs,Qs,Gs,$s,Ws,Ys,Xs,Js,no],oo=so,ao=[...oo,Zs,eo,to];function lo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function co(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ho{constructor(e,t){this.comparator=e,this.root=t||po.EMPTY}insert(e,t){return new ho(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,po.BLACK,null,null))}remove(e){return new ho(this.comparator,this.root.remove(e,this.comparator).copy(null,null,po.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fo(this.root,e,this.comparator,!0)}}class fo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class po{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:po.RED,this.left=null!=r?r:po.EMPTY,this.right=null!=i?i:po.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new po(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return po.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return po.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ai(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ai(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ai(27949);return e+(this.isRed()?0:1)}}po.EMPTY=null,po.RED=!0,po.BLACK=!1,po.EMPTY=new class{constructor(){this.size=0}get key(){throw Ai(57766)}get value(){throw Ai(16141)}get color(){throw Ai(16727)}get left(){throw Ai(29726)}get right(){throw Ai(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new po(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mo{constructor(e){this.comparator=e,this.data=new ho(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new go(this.data.getIterator())}getIteratorFrom(e){return new go(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof mo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mo(this.comparator);return t.data=e,t}}class go{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yo{constructor(e){this.fields=e,e.sort(rs.comparator)}static empty(){return new yo([])}unionWith(e){let t=new mo(rs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class vo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _o{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new vo("Invalid base64 string: "+e):e}}(e);return new _o(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _o(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_o.EMPTY_BYTE_STRING=new _o("");const bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(e){if(Pi(!!e,39018),"string"==typeof e){let t=0;const n=bo.exec(e);if(Pi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:So(e.seconds),nanos:So(e.nanos)}}function So(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Co(e){return"string"==typeof e?_o.fromBase64String(e):_o.fromUint8Array(e)}const Eo="server_timestamp",ko="__type__",To="__previous_value__",xo="__local_write_time__";function Io(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ko])||void 0===t?void 0:t.stringValue)===Eo}function No(e){const t=e.mapValue.fields[To];return Io(t)?No(t):t}function Ao(e){const t=wo(e.mapValue.fields[xo].timestampValue);return new gs(t.seconds,t.nanos)}class Ro{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Po="(default)";class Do{constructor(e,t){this.projectId=e,this.database=t||Po}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database===Po}isEqual(e){return e instanceof Do&&e.projectId===this.projectId&&e.database===this.database}}const Oo="__type__",Lo="__max__",Mo={mapValue:{fields:{__type__:{stringValue:Lo}}}},jo="__vector__",Fo="value";function Vo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Io(e)?4:na(e)?9007199254740991:ea(e)?10:11:Ai(28295,{value:e})}function zo(e,t){if(e===t)return!0;const n=Vo(e);if(n!==Vo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ao(e).isEqual(Ao(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wo(e.timestampValue),r=wo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Co(e.bytesValue).isEqual(Co(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return So(e.geoPointValue.latitude)===So(t.geoPointValue.latitude)&&So(e.geoPointValue.longitude)===So(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return So(e.integerValue)===So(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=So(e.doubleValue),r=So(t.doubleValue);return n===r?Ds(n)===Ds(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ji(e.arrayValue.values||[],t.arrayValue.values||[],zo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lo(n)!==lo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zo(n[i],r[i])))return!1;return!0}(e,t);default:return Ai(52216,{left:e})}}function Uo(e,t){return void 0!==(e.values||[]).find(e=>zo(e,t))}function qo(e,t){if(e===t)return 0;const n=Vo(e),r=Vo(t);if(n!==r)return Gi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=So(e.integerValue||e.doubleValue),r=So(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bo(e.timestampValue,t.timestampValue);case 4:return Bo(Ao(e),Ao(t));case 5:return Qi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Co(e),r=Co(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Gi(n[i],r[i]);if(0!==e)return e}return Gi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Gi(So(e.latitude),So(t.latitude));return 0!==n?n:Gi(So(e.longitude),So(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ho(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Fo])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Fo])||void 0===r?void 0:r.arrayValue,u=Gi((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ho(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Mo.mapValue&&t===Mo.mapValue)return 0;if(e===Mo.mapValue)return 1;if(t===Mo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Qi(r[o],s[o]);if(0!==e)return e;const t=qo(n[r[o]],i[s[o]]);if(0!==t)return t}return Gi(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ai(23264,{he:n})}}function Bo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gi(e,t);const n=wo(e),r=wo(t),i=Gi(n.seconds,r.seconds);return 0!==i?i:Gi(n.nanos,r.nanos)}function Ho(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=qo(n[i],r[i]);if(e)return e}return Gi(n.length,r.length)}function Wo(e){return Ko(e)}function Ko(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Co(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return is.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ko(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ko(e.fields[i]));return n+"}"}(e.mapValue):Ai(61005,{value:e})}function Go(e){switch(Vo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=No(e);return t?16+Go(t):16;case 5:return 2*e.stringValue.length;case 6:return Co(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Go(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return co(e.fields,(e,n)=>{t+=e.length+Go(n)}),t}(e.mapValue);default:throw Ai(13486,{value:e})}}function Qo(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yo(e){return!!e&&"integerValue"in e}function $o(e){return!!e&&"arrayValue"in e}function Xo(e){return!!e&&"nullValue"in e}function Jo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zo(e){return!!e&&"mapValue"in e}function ea(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Oo])||void 0===t?void 0:t.stringValue)===jo}function ta(e){if(e.geoPointValue)return{geoPointValue:h({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:h({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return co(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ta(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ta(e.arrayValue.values[n]);return t}return h({},e)}function na(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Lo}class ra{constructor(e){this.value=e}static empty(){return new ra({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(t)}setAll(e){let t=rs.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ta(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){co(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ra(ta(this.value))}}function ia(e){const t=[];return co(e.fields,(e,n)=>{const r=new rs([e]);if(Zo(n)){const e=ia(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new yo(t)}class sa{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new sa(e,0,ys.min(),ys.min(),ys.min(),ra.empty(),0)}static newFoundDocument(e,t,n,r){return new sa(e,1,t,ys.min(),n,r,0)}static newNoDocument(e,t){return new sa(e,2,t,ys.min(),ys.min(),ra.empty(),0)}static newUnknownDocument(e,t){return new sa(e,3,t,ys.min(),ys.min(),ra.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ys.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ra.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ra.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ys.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class oa{constructor(e,t){this.position=e,this.inclusive=t}}function aa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?is.comparator(is.fromName(o.referenceValue),n.key):qo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function la(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zo(e.position[n],t.position[n]))return!1;return!0}class ca{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ua(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ha{}class da extends ha{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ba(e,t,n):"array-contains"===t?new Ea(e,n):"in"===t?new ka(e,n):"not-in"===t?new Ta(e,n):"array-contains-any"===t?new xa(e,n):new da(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wa(e,n):new Sa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(qo(t,this.value)):null!==t&&Vo(this.value)===Vo(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ai(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fa extends ha{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fa(e,t)}matches(e){return pa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pa(e){return"and"===e.op}function ma(e){return ga(e)&&pa(e)}function ga(e){for(const t of e.filters)if(t instanceof fa)return!1;return!0}function ya(e){if(e instanceof da)return e.field.canonicalString()+e.op.toString()+Wo(e.value);if(ma(e))return e.filters.map(e=>ya(e)).join(",");{const t=e.filters.map(e=>ya(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function va(e,t){return e instanceof da?function(e,t){return t instanceof da&&e.op===t.op&&e.field.isEqual(t.field)&&zo(e.value,t.value)}(e,t):e instanceof fa?function(e,t){return t instanceof fa&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&va(n,t.filters[r]),!0)}(e,t):void Ai(19439)}function _a(e){return e instanceof da?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Wo(e.value))}(e):e instanceof fa?function(e){return e.op.toString()+" {"+e.getFilters().map(_a).join(" ,")+"}"}(e):"Filter"}class ba extends da{constructor(e,t,n){super(e,t,n),this.key=is.fromName(n.referenceValue)}matches(e){const t=is.comparator(e.key,this.key);return this.matchesComparison(t)}}class wa extends da{constructor(e,t){super(e,"in",t),this.keys=Ca("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sa extends da{constructor(e,t){super(e,"not-in",t),this.keys=Ca("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ca(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>is.fromName(e.referenceValue))}class Ea extends da{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $o(t)&&Uo(t.arrayValue,this.value)}}class ka extends da{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uo(this.value.arrayValue,t)}}class Ta extends da{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Uo(this.value.arrayValue,t)}}class xa extends da{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$o(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Uo(this.value.arrayValue,e))}}class Ia{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Na(e){return new Ia(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Aa(e){const t=Di(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ya(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ps(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wo(e)).join(",")),t.Te=e}return t.Te}function Ra(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ua(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!va(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!la(e.startAt,t.startAt)&&la(e.endAt,t.endAt)}function Pa(e){return is.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Da{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Oa(e,t,n,r,i,s,o,a){return new Da(e,t,n,r,i,s,o,a)}function La(e){return new Da(e)}function Ma(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ja(e){return null!==e.collectionGroup}function Fa(e){const t=Di(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new mo(rs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ca(r,n))}),e.has(rs.keyField().canonicalString())||t.Ie.push(new ca(rs.keyField(),n))}return t.Ie}function Va(e){const t=Di(e);return t.Ee||(t.Ee=za(t,Fa(e))),t.Ee}function za(e,t){if("F"===e.limitType)return Na(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ca(e.field,t)});const n=e.endAt?new oa(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new oa(e.startAt.position,e.startAt.inclusive):null;return Na(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ua(e,t){const n=e.filters.concat([t]);return new Da(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qa(e,t,n){return new Da(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ba(e,t){return Ra(Va(e),Va(t))&&e.limitType===t.limitType}function Ha(e){return"".concat(Aa(Va(e)),"|lt:").concat(e.limitType)}function Wa(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>_a(e)).join(", "),"]")),Ps(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wo(e)).join(",")),"Target(".concat(t,")")}(Va(e)),"; limitType=").concat(e.limitType,")")}function Ka(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):is.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Fa(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=aa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Fa(e),t))&&!(e.endAt&&!function(e,t,n){const r=aa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Fa(e),t))}(e,t)}function Ga(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qa(e){return(t,n)=>{let r=!1;for(const i of Fa(e)){const e=Ya(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ya(e,t,n){const r=e.field.isKeyField()?is.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qo(r,i):Ai(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ai(19790,{direction:e.dir})}}class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return uo(this.inner)}size(){return this.innerSize}}const Xa=new ho(is.comparator);function Ja(){return Xa}const Za=new ho(is.comparator);function el(){let e=Za;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function tl(e){let t=Za;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function nl(){return il()}function rl(){return il()}function il(){return new $a(e=>e.toString(),(e,t)=>e.isEqual(t))}const sl=new ho(is.comparator),ol=new mo(is.comparator);function al(){let e=ol;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ll=new mo(Gi);function cl(){return ll}function ul(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ds(t)?"-0":t}}function hl(e){return{integerValue:""+e}}function dl(e,t){return Os(t)?hl(t):ul(e,t)}class fl{constructor(){this._=void 0}}function pl(e,t,n){return e instanceof yl?function(e,t){const n={fields:{[ko]:{stringValue:Eo},[xo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Io(t)&&(t=No(t)),t&&(n.fields[To]=t),{mapValue:n}}(n,t):e instanceof vl?_l(e,t):e instanceof bl?wl(e,t):function(e,t){const n=gl(e,t),r=Cl(n)+Cl(e.Ae);return Yo(n)&&Yo(e.Ae)?hl(r):ul(e.serializer,r)}(e,t)}function ml(e,t,n){return e instanceof vl?_l(e,t):e instanceof bl?wl(e,t):n}function gl(e,t){return e instanceof Sl?function(e){return Yo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yl extends fl{}class vl extends fl{constructor(e){super(),this.elements=e}}function _l(e,t){const n=El(t);for(const r of e.elements)n.some(e=>zo(e,r))||n.push(r);return{arrayValue:{values:n}}}class bl extends fl{constructor(e){super(),this.elements=e}}function wl(e,t){let n=El(t);for(const r of e.elements)n=n.filter(e=>!zo(e,r));return{arrayValue:{values:n}}}class Sl extends fl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cl(e){return So(e.integerValue||e.doubleValue)}function El(e){return $o(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class kl{constructor(e,t){this.field=e,this.transform=t}}class Tl{constructor(e,t){this.version=e,this.transformResults=t}}class xl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xl}static exists(e){return new xl(void 0,e)}static updateTime(e){return new xl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Il(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Nl{}function Al(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zl(e.key,xl.none()):new Ll(e.key,e.data,xl.none());{const n=e.data,r=ra.empty();let i=new mo(rs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ml(e.key,r,new yo(i.toArray()),xl.none())}}function Rl(e,t,n){e instanceof Ll?function(e,t,n){const r=e.value.clone(),i=Fl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ml?function(e,t,n){if(!Il(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Fl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(jl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pl(e,t,n,r){return e instanceof Ll?function(e,t,n,r){if(!Il(e.precondition,t))return n;const i=e.value.clone(),s=Vl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ml?function(e,t,n,r){if(!Il(e.precondition,t))return n;const i=Vl(e.fieldTransforms,r,t),s=t.data;return s.setAll(jl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Il(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Dl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gl(r.transform,e||null);null!=i&&(null===n&&(n=ra.empty()),n.set(r.field,i))}return n||null}function Ol(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ji(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vl&&t instanceof vl||e instanceof bl&&t instanceof bl?Ji(e.elements,t.elements,zo):e instanceof Sl&&t instanceof Sl?zo(e.Ae,t.Ae):e instanceof yl&&t instanceof yl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ll extends Nl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ml extends Nl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jl(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Fl(e,t,n){const r=new Map;Pi(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ml(o,a,n[i]))}return r}function Vl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,pl(e,s,t))}return r}class zl extends Nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ul extends Nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ql{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Al(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ys.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),al())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(e,t)=>Ol(e,t))&&Ji(this.baseMutations,e.baseMutations,(e,t)=>Ol(e,t))}}class Bl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=sl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Bl(e,t,n,r)}}class Hl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Wl{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kl,Gl;function Ql(e){switch(e){case Oi.OK:return Ai(64938);case Oi.CANCELLED:case Oi.UNKNOWN:case Oi.DEADLINE_EXCEEDED:case Oi.RESOURCE_EXHAUSTED:case Oi.INTERNAL:case Oi.UNAVAILABLE:case Oi.UNAUTHENTICATED:return!1;case Oi.INVALID_ARGUMENT:case Oi.NOT_FOUND:case Oi.ALREADY_EXISTS:case Oi.PERMISSION_DENIED:case Oi.FAILED_PRECONDITION:case Oi.ABORTED:case Oi.OUT_OF_RANGE:case Oi.UNIMPLEMENTED:case Oi.DATA_LOSS:return!0;default:return Ai(15467,{code:e})}}function Yl(e){if(void 0===e)return xi("GRPC error has no .code"),Oi.UNKNOWN;switch(e){case Kl.OK:return Oi.OK;case Kl.CANCELLED:return Oi.CANCELLED;case Kl.UNKNOWN:return Oi.UNKNOWN;case Kl.DEADLINE_EXCEEDED:return Oi.DEADLINE_EXCEEDED;case Kl.RESOURCE_EXHAUSTED:return Oi.RESOURCE_EXHAUSTED;case Kl.INTERNAL:return Oi.INTERNAL;case Kl.UNAVAILABLE:return Oi.UNAVAILABLE;case Kl.UNAUTHENTICATED:return Oi.UNAUTHENTICATED;case Kl.INVALID_ARGUMENT:return Oi.INVALID_ARGUMENT;case Kl.NOT_FOUND:return Oi.NOT_FOUND;case Kl.ALREADY_EXISTS:return Oi.ALREADY_EXISTS;case Kl.PERMISSION_DENIED:return Oi.PERMISSION_DENIED;case Kl.FAILED_PRECONDITION:return Oi.FAILED_PRECONDITION;case Kl.ABORTED:return Oi.ABORTED;case Kl.OUT_OF_RANGE:return Oi.OUT_OF_RANGE;case Kl.UNIMPLEMENTED:return Oi.UNIMPLEMENTED;case Kl.DATA_LOSS:return Oi.DATA_LOSS;default:return Ai(39323,{code:e})}}(Gl=Kl||(Kl={}))[Gl.OK=0]="OK",Gl[Gl.CANCELLED=1]="CANCELLED",Gl[Gl.UNKNOWN=2]="UNKNOWN",Gl[Gl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gl[Gl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gl[Gl.NOT_FOUND=5]="NOT_FOUND",Gl[Gl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gl[Gl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gl[Gl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gl[Gl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gl[Gl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gl[Gl.ABORTED=10]="ABORTED",Gl[Gl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gl[Gl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gl[Gl.INTERNAL=13]="INTERNAL",Gl[Gl.UNAVAILABLE=14]="UNAVAILABLE",Gl[Gl.DATA_LOSS=15]="DATA_LOSS";let $l=null;function Xl(){return new TextEncoder}const Jl=new oi([4294967295,4294967295],0);function Zl(e){const t=Xl().encode(e),n=new ai;return n.update(t),new Uint8Array(n.digest())}function ec(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new oi([n,r],0),new oi([i,s],0)]}class tc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new nc("Invalid padding: ".concat(t));if(n<0)throw new nc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new nc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new nc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=oi.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(oi.fromNumber(n)));return 1===r.compare(Jl)&&(r=new oi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Zl(e),[n,r]=ec(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new tc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Zl(e),[n,r]=ec(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rc(ys.min(),r,new ho(Gi),Ja(),al())}}class ic{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ic(n,t,al(),al(),al())}}class sc{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class oc{constructor(e,t){this.targetId=e,this.Ce=t}}class ac{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_o.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class lc{constructor(){this.ve=0,this.Fe=hc(),this.Me=_o.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=al(),t=al(),n=al();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ai(38017,{changeType:i})}}),new ic(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=hc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ja(),this.Je=uc(),this.He=uc(),this.Ye=new ho(Gi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ai(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Pa(s))if(0===n){const e=new is(s.path);this.et(t,e,sa.newNoDocument(e,ys.min()))}else Pi(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=$l)||void 0===i||i.lt(function(e,t,n,r,i){var s,o,a,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Co(n).toUint8Array()}catch(e){if(e instanceof vo)return Ii("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new tc(s,r,i)}catch(e){return Ii(e instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Pa(i.target)){const t=new is(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sa.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=al();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new rc(e,t,this.Ye,this.je,n);return this.je=Ja(),this.Je=uc(),this.He=uc(),this.Ye=new ho(Gi),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new lc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mo(Gi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mo(Gi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Ti("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function uc(){return new ho(is.comparator)}function hc(){return new ho(is.comparator)}const dc={asc:"ASCENDING",desc:"DESCENDING"},fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pc={and:"AND",or:"OR"};class mc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gc(e,t){return e.useProto3Json||Ps(t)?t:{value:t}}function yc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function vc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _c(e,t){return yc(e,t.toTimestamp())}function bc(e){return Pi(!!e,49232),ys.fromTimestamp(function(e){const t=wo(e);return new gs(t.seconds,t.nanos)}(e))}function wc(e,t){return Sc(e,t).canonicalString()}function Sc(e,t){const n=function(e){return new ts(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Cc(e){const t=ts.fromString(e);return Pi(Bc(t),10190,{key:t.toString()}),t}function Ec(e,t){return wc(e.databaseId,t.path)}function kc(e,t){const n=Cc(t);if(n.get(1)!==e.databaseId.projectId)throw new Li(Oi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Li(Oi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new is(Nc(n))}function Tc(e,t){return wc(e.databaseId,t)}function xc(e){const t=Cc(e);return 4===t.length?ts.emptyPath():Nc(t)}function Ic(e){return new ts(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Nc(e){return Pi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ac(e,t,n){return{name:Ec(e,t),fields:n.value.mapValue.fields}}function Rc(e,t){let n;if(t instanceof Ll)n={update:Ac(e,t.key,t.value)};else if(t instanceof zl)n={delete:Ec(e,t.key)};else if(t instanceof Ml)n={update:Ac(e,t.key,t.data),updateMask:qc(t.fieldMask)};else{if(!(t instanceof Ul))return Ai(16599,{Vt:t.type});n={verify:Ec(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ai(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_c(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ai(27497)}(e,t.precondition)),n}function Pc(e,t){return{documents:[Tc(e,t.path)]}}function Dc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Tc(e,i);const s=function(e){if(0!==e.length)return Uc(fa.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Vc(e.field),direction:Mc(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Oc(e){let t=xc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pi(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Lc(e);return t instanceof fa&&ma(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new ca(zc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ps(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new oa(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new oa(n,t)}(n.endAt)),Oa(t,i,o,s,a,"F",l,c)}function Lc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zc(e.unaryFilter.field);return da.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zc(e.unaryFilter.field);return da.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zc(e.unaryFilter.field);return da.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zc(e.unaryFilter.field);return da.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ai(61313);default:return Ai(60726)}}(e):void 0!==e.fieldFilter?function(e){return da.create(zc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ai(58110);default:return Ai(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fa.create(e.compositeFilter.filters.map(e=>Lc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ai(1026)}}(e.compositeFilter.op))}(e):Ai(30097,{filter:e})}function Mc(e){return dc[e]}function jc(e){return fc[e]}function Fc(e){return pc[e]}function Vc(e){return{fieldPath:e.canonicalString()}}function zc(e){return rs.fromServerFormat(e.fieldPath)}function Uc(e){return e instanceof da?function(e){if("=="===e.op){if(Jo(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NAN"}};if(Xo(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jo(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NOT_NAN"}};if(Xo(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(e.field),op:jc(e.op),value:e.value}}}(e):e instanceof fa?function(e){const t=e.getFilters().map(e=>Uc(e));return 1===t.length?t[0]:{compositeFilter:{op:Fc(e.op),filters:t}}}(e):Ai(54877,{filter:e})}function qc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ys.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ys.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_o.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Hc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wc{constructor(e){this.yt=e}}function Kc(e){const t=Oc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qa(t,t.limit,"L"):t}class Gc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(So(e.integerValue));else if("doubleValue"in e){const n=So(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ds(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=wo(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Co(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?na(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ea(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ai(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Fo,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(So(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),is.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Gc.Kt=new Gc;class Qc{constructor(){this.Cn=new Yc}addToCollectionParentIndex(e,t){return this.Cn.add(t),xs.resolve()}getCollectionParents(e,t){return xs.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return xs.resolve()}deleteFieldIndex(e,t){return xs.resolve()}deleteAllFieldIndexes(e){return xs.resolve()}createTargetIndexes(e,t){return xs.resolve()}getDocumentsMatchingTarget(e,t){return xs.resolve(null)}getIndexType(e,t){return xs.resolve(0)}getFieldIndexes(e,t){return xs.resolve([])}getNextCollectionGroupToUpdate(e){return xs.resolve(null)}getMinOffset(e,t){return xs.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return xs.resolve(Ss.min())}updateCollectionGroup(e,t,n){return xs.resolve()}updateIndexEntries(e,t){return xs.resolve()}}class Yc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mo(ts.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mo(ts.comparator)).toArray()}}new Uint8Array(0);const $c={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xc=41943040;class Jc{static withCacheSize(e){return new Jc(e,Jc.DEFAULT_COLLECTION_PERCENTILE,Jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Jc.DEFAULT_COLLECTION_PERCENTILE=10,Jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jc.DEFAULT=new Jc(Xc,Jc.DEFAULT_COLLECTION_PERCENTILE,Jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jc.DISABLED=new Jc(-1,0,0);class Zc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zc(0)}static cr(){return new Zc(-1)}}const eu="LruGarbageCollector",tu=1048576;function nu(e,t){let[n,r]=e,[i,s]=t;const o=Gi(n,i);return 0===o?Gi(r,s):o}class ru{constructor(e){this.Ir=e,this.buffer=new mo(nu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();nu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Ti(eu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ns(e)?Ti(eu,"Ignoring IndexedDB error during garbage collection: ",e):await Ts(e)}await this.Vr(3e5)})}}class su{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return xs.resolve(As.ce);const n=new ru(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ti("LruGarbageCollector","Garbage collection skipped; disabled"),xs.resolve($c)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ti("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),$c):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Ti("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),ki()<=jn.DEBUG&&Ti("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),xs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ou(e,t){return new su(e,t)}class au{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Pl(n.mutation,e,yo.empty(),gs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,al()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:al();const r=nl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=el();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=nl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,al()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ja();const s=il(),o=il();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ml)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Pl(o.mutation,t,o.mutation.getFieldMask(),gs.now())):s.set(t.key,yo.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new lu(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=il();let r=new ho((e,t)=>e-t),i=al();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||yo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||al()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=rl();l.forEach(e=>{if(!i.has(e)){const r=Al(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return xs.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return is.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ja(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xs.resolve(nl());let o=vs,a=i;return s.next(t=>xs.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xs.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,al())).next(e=>({batchId:o,changes:tl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new is(t)).next(e=>{let t=el();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=el();return this.indexManager.getCollectionParents(e,i).next(o=>xs.forEach(o,o=>{const a=function(e,t){return new Da(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sa.newInvalidDocument(r)))});let n=el();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Pl(s.mutation,r,yo.empty(),gs.now()),Ka(t,r)&&(n=n.insert(e,r))}),n})}}class uu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return xs.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:bc(e.createTime)}}(t)),xs.resolve()}getNamedQuery(e,t){return xs.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Kc(e.bundledQuery),readTime:bc(e.readTime)}}(t)),xs.resolve()}}class hu{constructor(){this.overlays=new ho(is.comparator),this.qr=new Map}getOverlay(e,t){return xs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nl();return xs.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),xs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),xs.resolve()}getOverlaysForCollection(e,t,n){const r=nl(),i=t.length+1,s=new is(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ho((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=nl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return xs.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Hl(t,n));let i=this.qr.get(t);void 0===i&&(i=al(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class du{constructor(){this.sessionToken=_o.EMPTY_BYTE_STRING}getSessionToken(e){return xs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xs.resolve()}}class fu{constructor(){this.Qr=new mo(pu.$r),this.Ur=new mo(pu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new pu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new pu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new is(new ts([])),n=new pu(t,e),r=new pu(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new is(new ts([])),n=new pu(t,e),r=new pu(t,e+1);let i=al();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new pu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return is.comparator(e.key,t.key)||Gi(e.Yr,t.Yr)}static Kr(e,t){return Gi(e.Yr,t.Yr)||is.comparator(e.key,t.key)}}class mu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mo(pu.$r)}checkEmpty(e){return xs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ql(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new pu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xs.resolve(s)}lookupMutationBatch(e,t){return xs.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return xs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xs.resolve(0===this.mutationQueue.length?Rs:this.tr-1)}getAllMutationBatches(e){return xs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pu(t,0),r=new pu(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),xs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mo(Gi);return t.forEach(e=>{const t=new pu(e,0),r=new pu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),xs.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;is.isDocumentKey(i)||(i=i.child(""));const s=new pu(new is(i),0);let o=new mo(Gi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),xs.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Pi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return xs.forEach(t.mutations,r=>{const i=new pu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new pu(t,0),r=this.Zr.firstAfterOrEqual(n);return xs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xs.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gu{constructor(e){this.ri=e,this.docs=new ho(is.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xs.resolve(n?n.document.mutableCopy():sa.newInvalidDocument(t))}getEntries(e,t){let n=Ja();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sa.newInvalidDocument(e))}),xs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ja();const s=t.path,o=new is(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Cs(ws(o),n)<=0||(r.has(o.key)||Ka(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ai(9500)}ii(e,t){return xs.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new yu(this)}getSize(e){return xs.resolve(this.size)}}class yu extends au{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),xs.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class vu{constructor(e){this.persistence=e,this.si=new $a(e=>Aa(e),Ra),this.lastRemoteSnapshotVersion=ys.min(),this.highestTargetId=0,this.oi=0,this._i=new fu,this.targetCount=0,this.ai=Zc.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),xs.resolve()}getLastRemoteSnapshotVersion(e){return xs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xs.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),xs.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,xs.resolve()}updateTargetData(e,t){return this.Pr(t),xs.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,xs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),xs.waitFor(i).next(()=>r)}getTargetCount(e){return xs.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return xs.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),xs.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),xs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),xs.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return xs.resolve(n)}containsKey(e,t){return xs.resolve(this._i.containsKey(t))}}class _u{constructor(e,t){this.ui={},this.overlays={},this.ci=new As(0),this.li=!1,this.li=!0,this.hi=new du,this.referenceDelegate=e(this),this.Pi=new vu(this),this.indexManager=new Qc,this.remoteDocumentCache=function(e){return new gu(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Wc(t),this.Ii=new uu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new mu(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ti("MemoryPersistence","Starting transaction:",e);const r=new bu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return xs.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class bu extends ks{constructor(e){super(),this.currentSequenceNumber=e}}class wu{constructor(e){this.persistence=e,this.Ri=new fu,this.Vi=null}static mi(e){return new wu(e)}get fi(){if(this.Vi)return this.Vi;throw Ai(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),xs.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),xs.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),xs.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xs.forEach(this.fi,n=>{const r=is.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ys.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return xs.or([()=>xs.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Su{constructor(e,t){this.persistence=e,this.pi=new $a(e=>Ms(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ou(this,t)}static mi(e,t){return new Su(e,t)}Ei(){}di(e){return xs.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return xs.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?xs.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ys.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),xs.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),xs.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),xs.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),xs.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Go(e.data.value)),t}br(e,t,n){return xs.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return xs.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=al(),r=al();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Cu(e,t.fromCache,n,r)}}class Eu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ku{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=pn()?8:Is(un())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Eu;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(ki()<=jn.DEBUG&&Ti("QueryEngine","SDK will not create cache indexes for query:",Wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xs.resolve()):(ki()<=jn.DEBUG&&Ti("QueryEngine","Query:",Wa(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(ki()<=jn.DEBUG&&Ti("QueryEngine","The SDK decides to create cache indexes for query:",Wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Va(t))):xs.resolve())}ys(e,t){if(Ma(t))return xs.resolve(null);let n=Va(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=qa(t,null,"F"),n=Va(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=al(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,qa(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Ma(t)||r.isEqual(ys.min())?xs.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?xs.resolve(null):(ki()<=jn.DEBUG&&Ti("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wa(t)),this.vs(e,s,t,bs(r,vs)).next(e=>e))})}Ds(e,t){let n=new mo(Qa(e));return t.forEach((t,r)=>{Ka(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return ki()<=jn.DEBUG&&Ti("QueryEngine","Using full collection scan to execute query:",Wa(t)),this.ps.getDocumentsMatchingQuery(e,t,Ss.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Tu="LocalStore";class xu{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ho(Gi),this.xs=new $a(e=>Aa(e),Ra),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Iu(e,t,n,r){return new xu(e,t,n,r)}async function Nu(e,t){const n=Di(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=al();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Au(e){const t=Di(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Ru(e,t,n){let r=al(),i=al();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ja();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ys.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ti(Tu,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Pu(e,t){const n=Di(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Rs),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Du(e,t){const n=Di(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,xs.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Hc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Ou(e,t,n){const r=Di(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ns(e))throw e;Ti(Tu,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Lu(e,t,n){const r=Di(e);let i=ys.min(),s=al();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Di(e),i=r.xs.get(n);return void 0!==i?xs.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Va(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ys.min(),n?s:al())).next(e=>(Mu(r,Ga(t),e),{documents:e,Qs:s})))}function Mu(e,t,n){let r=e.Os.get(t)||ys.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class ju{constructor(){this.activeTargetIds=cl()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fu{constructor(){this.Mo=new ju,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ju,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vu{Oo(e){}shutdown(){}}const zu="ConnectivityMonitor";class Uu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ti(zu,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ti(zu,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qu=null;function Bu(){return null===qu?qu=268435456+Math.round(2147483648*Math.random()):qu++,"0x"+qu.toString(16)}const Hu="RestConnection",Wu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ku{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Po?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Bu(),o=this.zo(e,t.toUriEncodedString());Ti(Hu,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=rn(l);return this.Jo(e,o,a,n,c).then(t=>(Ti(Hu,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Ii(Hu,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ci,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Wu[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Gu{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Qu="WebChannelConnection";class Yu extends Ku{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Bu();return new Promise((i,o)=>{const a=new ui;a.setWithCredentials(!0),a.listenOnce(di.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case fi.NO_ERROR:const n=a.getResponseJson();Ti(Qu,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case fi.TIMEOUT:Ti(Qu,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Li(Oi.DEADLINE_EXCEEDED,"Request time out"));break;case fi.HTTP_ERROR:const r=a.getStatus();if(Ti(Qu,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Oi).indexOf(t)>=0?t:Oi.UNKNOWN}(n.status);o(new Li(e,n.message))}else o(new Li(Oi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Li(Oi.UNAVAILABLE,"Connection failed."));break;default:Ai(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Ti(Qu,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Ti(Qu,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Bu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yi(),o=gi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ti(Qu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new Gu({Yo:t=>{d?Ti(Qu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ti(Qu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,hi.EventType.OPEN,()=>{d||(Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,hi.EventType.CLOSE,()=>{d||(d=!0,Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,hi.EventType.ERROR,t=>{d||(d=!0,Ii(Qu,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Li(Oi.UNAVAILABLE,"The operation could not be completed")))}),p(u,hi.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];Pi(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Kl[e];if(void 0!==t)return Yl(t)}(t),i=o.message;void 0===n&&(n=Oi.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new Li(n,i)),u.close()}else Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,mi.STAT_EVENT,t=>{t.stat===pi.PROXY?Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===pi.NOPROXY&&Ti(Qu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function $u(){return"undefined"!=typeof document?document:null}function Xu(e){return new mc(e,!0)}class Ju{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Ti("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Zu="PersistentStream";class eh{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ju(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Oi.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Oi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Li(Oi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ti(Zu,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ti(Zu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class th extends eh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ai(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pi(void 0===t||"string"==typeof t,58123),_o.fromBase64String(t||"")):(Pi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),_o.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Oi.UNKNOWN:Yl(e.code);return new Li(t,e.message||"")}(o);n=new ac(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kc(e,r.document.name),s=bc(r.document.updateTime),o=r.document.createTime?bc(r.document.createTime):ys.min(),a=new ra({mapValue:{fields:r.document.fields}}),l=sa.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new sc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kc(e,r.document),s=r.readTime?bc(r.readTime):ys.min(),o=sa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new sc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kc(e,r.document),s=r.removedTargetIds||[];n=new sc([],s,i,null)}else{if(!("filter"in t))return Ai(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Wl(r,i),o=e.targetId;n=new oc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ys.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ys.min():t.readTime?bc(t.readTime):ys.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ic(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pa(r)?{documents:Pc(e,r)}:{query:Dc(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=vc(e,t.resumeToken);const r=gc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ys.min())>0){n.readTime=yc(e,t.snapshotVersion.toTimestamp());const r=gc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ai(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ic(this.serializer),t.removeTarget=e,this.q_(t)}}class nh extends eh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Pi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Pi(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?bc(e.updateTime):bc(t);return n.isEqual(ys.min())&&(n=bc(t)),new Tl(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=bc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ic(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Rc(this.serializer,e))};this.q_(t)}}class rh{}class ih extends rh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Li(Oi.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,Sc(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Oi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Li(Oi.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,Sc(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Oi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Li(Oi.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(xi(t),this.aa=!1):Ti("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oh="RemoteStore";class ah{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{gh(this)&&(Ti(oh,"Restarting streams for network reachability change."),await async function(e){const t=Di(e);t.Ea.add(4),await ch(t),t.Ra.set("Unknown"),t.Ea.delete(4),await lh(t)}(this))})}),this.Ra=new sh(n,r)}}async function lh(e){if(gh(e))for(const t of e.da)await t(!0)}async function ch(e){for(const t of e.da)await t(!1)}function uh(e,t){const n=Di(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),mh(n)?ph(n):Lh(n).O_()&&dh(n,t))}function hh(e,t){const n=Di(e),r=Lh(n);n.Ia.delete(t),r.O_()&&fh(n,t),0===n.Ia.size&&(r.O_()?r.L_():gh(n)&&n.Ra.set("Unknown"))}function dh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ys.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Lh(e).Y_(t)}function fh(e,t){e.Va.Ue(t),Lh(e).Z_(t)}function ph(e){e.Va=new cc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Lh(e).start(),e.Ra.ua()}function mh(e){return gh(e)&&!Lh(e).x_()&&e.Ia.size>0}function gh(e){return 0===Di(e).Ea.size}function yh(e){e.Va=void 0}async function vh(e){e.Ra.set("Online")}async function _h(e){e.Ia.forEach((t,n)=>{dh(e,t)})}async function bh(e,t){yh(e),mh(e)?(e.Ra.ha(t),ph(e)):e.Ra.set("Unknown")}async function wh(e,t,n){if(e.Ra.set("Online"),t instanceof ac&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Ti(oh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sh(e,n)}else if(t instanceof sc?e.Va.Ze(t):t instanceof oc?e.Va.st(t):e.Va.tt(t),!n.isEqual(ys.min()))try{const t=await Au(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(_o.EMPTY_BYTE_STRING,r.snapshotVersion)),fh(e,t);const i=new Hc(r.target,t,n,r.sequenceNumber);dh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ti(oh,"Failed to raise snapshot:",t),await Sh(e,t)}}async function Sh(e,t,n){if(!Ns(t))throw t;e.Ea.add(1),await ch(e),e.Ra.set("Offline"),n||(n=()=>Au(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ti(oh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await lh(e)})}function Ch(e,t){return t().catch(n=>Sh(e,n,t))}async function Eh(e){const t=Di(e),n=Mh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Rs;for(;kh(t);)try{const e=await Pu(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Th(t,e)}catch(e){await Sh(t,e)}xh(t)&&Ih(t)}function kh(e){return gh(e)&&e.Ta.length<10}function Th(e,t){e.Ta.push(t);const n=Mh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function xh(e){return gh(e)&&!Mh(e).x_()&&e.Ta.length>0}function Ih(e){Mh(e).start()}async function Nh(e){Mh(e).ra()}async function Ah(e){const t=Mh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Rh(e,t,n){const r=e.Ta.shift(),i=Bl.from(r,t,n);await Ch(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Eh(e)}async function Ph(e,t){t&&Mh(e).X_&&await async function(e,t){if(function(e){return Ql(e)&&e!==Oi.ABORTED}(t.code)){const n=e.Ta.shift();Mh(e).B_(),await Ch(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Eh(e)}}(e,t),xh(e)&&Ih(e)}async function Dh(e,t){const n=Di(e);n.asyncQueue.verifyOperationInProgress(),Ti(oh,"RemoteStore received new credentials");const r=gh(n);n.Ea.add(3),await ch(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await lh(n)}async function Oh(e,t){const n=Di(e);t?(n.Ea.delete(2),await lh(n)):t||(n.Ea.add(2),await ch(n),n.Ra.set("Unknown"))}function Lh(e){return e.ma||(e.ma=function(e,t,n){const r=Di(e);return r.sa(),new th(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:vh.bind(null,e),t_:_h.bind(null,e),r_:bh.bind(null,e),H_:wh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),mh(e)?ph(e):e.Ra.set("Unknown")):(await e.ma.stop(),yh(e))})),e.ma}function Mh(e){return e.fa||(e.fa=function(e,t,n){const r=Di(e);return r.sa(),new nh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Nh.bind(null,e),r_:Ph.bind(null,e),ta:Ah.bind(null,e),na:Rh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Eh(e)):(await e.fa.stop(),e.Ta.length>0&&(Ti(oh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class jh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new jh(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Li(Oi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(e,t){if(xi("AsyncQueue","".concat(t,": ").concat(e)),Ns(e))return new Li(Oi.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Vh{static emptySet(e){return new Vh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||is.comparator(t.key,n.key):(e,t)=>is.comparator(e.key,t.key),this.keyedMap=el(),this.sortedSet=new ho(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Vh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zh{constructor(){this.ga=new ho(is.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ai(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Uh{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Uh(e,t,Vh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ba(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class qh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Bh{constructor(){this.queries=Hh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Di(e),r=n.queries;n.queries=Hh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Li(Oi.ABORTED,"Firestore shutting down"))}}function Hh(){return new $a(e=>Ha(e),Ba)}async function Wh(e,t){const n=Di(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new qh,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Fh(e,"Initialization of query '".concat(Wa(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Yh(n)}async function Kh(e,t){const n=Di(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gh(e,t){const n=Di(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Yh(n)}function Qh(e,t,n){const r=Di(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Yh(e){e.Ca.forEach(e=>{e.next()})}var $h,Xh;(Xh=$h||($h={})).Ma="default",Xh.Cache="cache";class Jh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Uh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$h.Cache}}class Zh{constructor(e){this.key=e}}class ed{constructor(e){this.key=e}}class td{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=al(),this.mutatedKeys=al(),this.eu=Qa(e),this.tu=new Vh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new zh,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ka(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ai(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new Uh(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=al(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ed(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Zh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=al();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const nd="SyncEngine";class rd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class id{constructor(e){this.key=e,this.hu=!1}}class sd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new $a(e=>Ha(e),Ba),this.Iu=new Map,this.Eu=new Set,this.du=new ho(is.comparator),this.Au=new Map,this.Ru=new fu,this.Vu={},this.mu=new Map,this.fu=Zc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function od(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=xd(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ld(r,t,n,!0),i}async function ad(e,t){const n=xd(e);await ld(n,t,!0,!1)}async function ld(e,t,n,r){const i=await Du(e.localStore,Va(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await cd(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&uh(e.remoteStore,i),a}async function cd(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Lu(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return wd(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await Lu(e.localStore,t,!0),o=new td(t,s.Qs),a=o.ru(s.documents),l=ic.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);wd(e,n,c.au);const u=new rd(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ud(e,t,n){const r=Di(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Ba(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ou(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hh(r.remoteStore,i.targetId),_d(r,i.targetId)}).catch(Ts)):(_d(r,i.targetId),await Ou(r.localStore,i.targetId,!0))}async function hd(e,t){const n=Di(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hh(n.remoteStore,r.targetId))}async function dd(e,t){const n=Di(e);try{const e=await function(e,t){const n=Di(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(_o.EMPTY_BYTE_STRING,ys.min()).withLastLimboFreeSnapshotVersion(ys.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=Ja(),l=al();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Ru(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ys.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return xs.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Pi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Pi(r.hu,14607):e.removedDocuments.size>0&&(Pi(r.hu,42227),r.hu=!1))}),await Ed(n,e,t)}catch(e){await Ts(e)}}function fd(e,t,n){const r=Di(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Di(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Yh(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pd(e,t,n){const r=Di(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new ho(is.comparator);e=e.insert(s,sa.newNoDocument(s,ys.min()));const n=al().add(s),i=new rc(ys.min(),new Map,new ho(Gi),e,n);await dd(r,i),r.du=r.du.remove(s),r.Au.delete(t),Cd(r)}else await Ou(r.localStore,t,!1).then(()=>_d(r,t,n)).catch(Ts)}async function md(e,t){const n=Di(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Di(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=xs.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Pi(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=al();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);vd(n,r,null),yd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ed(n,e)}catch(e){await Ts(e)}}async function gd(e,t,n){const r=Di(e);try{const e=await function(e,t){const n=Di(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Pi(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);vd(r,t,n),yd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ed(r,e)}catch(n){await Ts(n)}}function yd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function vd(e,t,n){const r=Di(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function _d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||bd(e,t)})}function bd(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(hh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Cd(e))}function wd(e,t,n){for(const r of n)r instanceof Zh?(e.Ru.addReference(r.key,t),Sd(e,r)):r instanceof ed?(Ti(nd,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||bd(e,r.key)):Ai(19791,{wu:r})}function Sd(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Ti(nd,"New document in limbo: "+n),e.Eu.add(r),Cd(e))}function Cd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new is(ts.fromString(t)),r=e.fu.next();e.Au.set(r,new id(n)),e.du=e.du.insert(n,r),uh(e.remoteStore,new Hc(Va(La(n.path)),r,"TargetPurposeLimboResolution",As.ce))}}async function Ed(e,t,n){const r=Di(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Cu.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=Di(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>xs.forEach(t,t=>xs.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>xs.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ns(e))throw e;Ti(Tu,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function kd(e,t){const n=Di(e);if(!n.currentUser.isEqual(t)){Ti(nd,"User change. New user:",t.toKey());const e=await Nu(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Li(Oi.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ed(n,e.Ls)}}function Td(e,t){const n=Di(e),r=n.Au.get(t);if(r&&r.hu)return al().add(r.key);{let e=al();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function xd(e){const t=Di(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Td.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pd.bind(null,t),t.Pu.H_=Gh.bind(null,t.eventManager),t.Pu.yu=Qh.bind(null,t.eventManager),t}function Id(e){const t=Di(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=md.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gd.bind(null,t),t}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Iu(this.persistence,new ku,e.initialUser,this.serializer)}Cu(e){return new _u(wu.mi,this.serializer)}Du(e){return new Fu}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class Ad extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pi(this.persistence.referenceDelegate instanceof Su,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new iu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Jc.withCacheSize(this.cacheSizeBytes):Jc.DEFAULT;return new _u(e=>Su.mi(e,t),this.serializer)}}class Rd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>fd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=kd.bind(null,this.syncEngine),await Oh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Bh}createDatastore(e){const t=Xu(e.databaseInfo.databaseId),n=function(e){return new Yu(e)}(e.databaseInfo);return function(e,t,n,r){return new ih(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ah(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>fd(this.syncEngine,e,0),Uu.v()?new Uu:new Vu)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new sd(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Di(e);Ti(oh,"RemoteStore shutting down."),t.Ea.add(5),await ch(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Rd.provider={build:()=>new Rd};class Pd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Dd="FirestoreClient";class Od{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Si.UNAUTHENTICATED,this.clientId=Ki.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Ti(Dd,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ti(Dd,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ld(e,t){e.asyncQueue.verifyOperationInProgress(),Ti(Dd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Nu(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Md(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jd(e);Ti(Dd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Dh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Dh(t.remoteStore,n)),e._onlineComponents=t}async function jd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ti(Dd,"Using user provided OfflineComponentProvider");try{await Ld(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Oi.FAILED_PRECONDITION||e.code===Oi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await Ld(e,new Nd)}}else Ti(Dd,"Using default OfflineComponentProvider"),await Ld(e,new Ad(void 0));return e._offlineComponents}async function Fd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ti(Dd,"Using user provided OnlineComponentProvider"),await Md(e,e._uninitializedComponentsProvider._online)):(Ti(Dd,"Using default OnlineComponentProvider"),await Md(e,new Rd))),e._onlineComponents}function Vd(e){return Fd(e).then(e=>e.syncEngine)}async function zd(e){const t=await Fd(e),n=t.eventManager;return n.onListen=od.bind(null,t.syncEngine),n.onUnlisten=ud.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ad.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=hd.bind(null,t.syncEngine),n}function Ud(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Pd({next:a=>{s.Nu(),t.enqueueAndForget(()=>Kh(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Li(Oi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Li(Oi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Jh(La(n.path),s,{includeMetadataChanges:!0,qa:!0});return Wh(e,o)}(await zd(e),e.asyncQueue,t,n,r)),r.promise}function qd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Pd({next:n=>{s.Nu(),t.enqueueAndForget(()=>Kh(e,o)),n.fromCache&&"server"===r.source?i.reject(new Li(Oi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Jh(n,s,{includeMetadataChanges:!0,qa:!0});return Wh(e,o)}(await zd(e),e.asyncQueue,t,n,r)),r.promise}function Bd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Hd=new Map,Wd="firestore.googleapis.com",Kd=!0;class Gd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Li(Oi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wd,this.ssl=Kd}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Kd;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<tu)throw new Li(Oi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Li(Oi.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Li(Oi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Li(Oi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Li(Oi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Li(Oi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Li(Oi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fi;switch(e.type){case"firstParty":return new qi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Li(Oi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Hd.get(e);t&&(Ti("ComponentProvider","Removing Datastore"),Hd.delete(e),t.terminate())}(this),Promise.resolve()}}class Yd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yd(this.firestore,e,this._query)}}class $d{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $d(this.firestore,e,this._key)}toJSON(){return{type:$d._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fs(t,$d._jsonSchema))return new $d(e,n||null,new is(ts.fromString(t.referencePath)))}}$d._jsonSchemaVersion="firestore/documentReference/1.0",$d._jsonSchema={type:ds("string",$d._jsonSchemaVersion),referencePath:ds("string")};class Xd extends Yd{constructor(e,t,n){super(e,t,La(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $d(this.firestore,null,new is(e))}withConverter(e){return new Xd(this.firestore,e,this._path)}}function Jd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),1===arguments.length&&(t=Ki.newId()),ss("doc","path",t),e instanceof Qd){const n=ts.fromString(t,...r);return os(n),new $d(e,null,new is(n))}{if(!(e instanceof $d||e instanceof Xd))throw new Li(Oi.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ts.fromString(t,...r));return os(n),new $d(e.firestore,e instanceof Xd?e.converter:null,new is(n))}}const Zd="AsyncQueue";class ef{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ju(this,"async_queue_retry"),this._c=()=>{const e=$u();e&&Ti(Zd,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=$u();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$u();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(q_){if(!Ns(q_))throw q_;Ti(Zd,"Operation failed with retryable error: "+q_)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,xi("INTERNAL UNHANDLED ERROR: ",tf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=jh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ai(47125,{Pc:tf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function tf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class nf extends Qd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ef,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ef(e),this._firestoreClient=void 0,await e}}}function rf(e){if(e._terminated)throw new Li(Oi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||sf(e),e._firestoreClient}function sf(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ro(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Bd(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Od(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class of{constructor(e){this._byteString=e}static fromBase64String(e){try{return new of(_o.fromBase64String(e))}catch(e){throw new Li(Oi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new of(_o.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:of._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fs(e,of._jsonSchema))return of.fromBase64String(e.bytes)}}of._jsonSchemaVersion="firestore/bytes/1.0",of._jsonSchema={type:ds("string",of._jsonSchemaVersion),bytes:ds("string")};class af{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Li(Oi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lf{constructor(e){this._methodName=e}}class cf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Li(Oi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Li(Oi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gi(this._lat,e._lat)||Gi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cf._jsonSchemaVersion}}static fromJSON(e){if(fs(e,cf._jsonSchema))return new cf(e.latitude,e.longitude)}}cf._jsonSchemaVersion="firestore/geoPoint/1.0",cf._jsonSchema={type:ds("string",cf._jsonSchemaVersion),latitude:ds("number"),longitude:ds("number")};class uf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:uf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fs(e,uf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new uf(e.vectorValues);throw new Li(Oi.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}uf._jsonSchemaVersion="firestore/vectorValue/1.0",uf._jsonSchema={type:ds("string",uf._jsonSchemaVersion),vectorValues:ds("object")};const hf=/^__.*__$/;class df{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ml(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class ff{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ml(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ai(40011,{Ac:e})}}class mf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mf(h(h({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(pf(this.Ac)&&hf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xu(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mf({Ac:e,methodName:t,Dc:n,path:rs.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(e){const t=e._freezeSettings(),n=Xu(e._databaseId);return new gf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vf(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);xf("Data must be an object, but it was:",o,r);const a=kf(r,o);let l,c;if(s.merge)l=new yo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=If(t,r,n);if(!o.contains(i))throw new Li(Oi.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Pf(e,i)||e.push(i)}l=new yo(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new df(new ra(a),l,c)}class _f extends lf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _f}}class bf extends lf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Sl(e.serializer,dl(e.serializer,this.Fc));return new kl(e.path,t)}isEqual(e){return e instanceof bf&&this.Fc===e.Fc}}function wf(e,t,n,r){const i=e.Cc(1,t,n);xf("Data must be an object, but it was:",i,r);const s=[],o=ra.empty();co(r,(e,r)=>{const a=Af(t,e,n);r=Rn(r);const l=i.yc(a);if(r instanceof _f)s.push(a);else{const e=Ef(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new yo(s);return new ff(o,a,i.fieldTransforms)}function Sf(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[If(t,r,n)],l=[i];if(s.length%2!=0)throw new Li(Oi.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(If(t,s[d])),l.push(s[d+1]);const c=[],u=ra.empty();for(let d=a.length-1;d>=0;--d)if(!Pf(c,a[d])){const e=a[d];let t=l[d];t=Rn(t);const n=o.yc(e);if(t instanceof _f)c.push(e);else{const r=Ef(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new yo(c);return new ff(u,h,o.fieldTransforms)}function Cf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ef(n,e.Cc(r?4:3,t))}function Ef(e,t){if(Tf(e=Rn(e)))return xf("Unsupported field value:",t,e),kf(e,t);if(e instanceof lf)return function(e,t){if(!pf(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ef(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Rn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=gs.fromDate(e);return{timestampValue:yc(t.serializer,n)}}if(e instanceof gs){const n=new gs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yc(t.serializer,n)}}if(e instanceof cf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof of)return{bytesValue:vc(t.serializer,e._byteString)};if(e instanceof $d){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:wc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof uf)return function(e,t){return{mapValue:{fields:{[Oo]:{stringValue:jo},[Fo]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ul(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(cs(e)))}(e,t)}function kf(e,t){const n={};return uo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):co(e,(e,r)=>{const i=Ef(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Tf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof gs||e instanceof cf||e instanceof of||e instanceof $d||e instanceof lf||e instanceof uf)}function xf(e,t,n){if(!Tf(n)||!ls(n)){const r=cs(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function If(e,t,n){if((t=Rn(t))instanceof af)return t._internalPath;if("string"==typeof t)return Af(e,t);throw Rf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nf=new RegExp("[~\\*/\\[\\]]");function Af(e,t,n){if(t.search(Nf)>=0)throw Rf("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new af(...t.split("."))._internalPath}catch(r){throw Rf("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Rf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Li(Oi.INVALID_ARGUMENT,a+e+l)}function Pf(e,t){return e.some(e=>e.isEqual(t))}class Df{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $d(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Of(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Of extends Df{data(){return super.data()}}function Lf(e,t){return"string"==typeof t?Af(e,t):t instanceof af?t._internalPath:t._delegate._internalPath}function Mf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Li(Oi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}class Ff extends jf{}class Vf extends Ff{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vf(e,t,n)}_apply(e){const t=this._parse(e);return Wf(e._query,t),new Yd(e.firestore,e.converter,Ua(e._query,t))}_parse(e){const t=yf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Li(Oi.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Hf(o,s);const t=[];for(const n of o)t.push(Bf(r,e,n));a={arrayValue:{values:t}}}else a=Bf(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Hf(o,s),a=Cf(n,t,o,"in"===s||"not-in"===s);return da.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class zf extends jf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zf(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Wf(n,i),n=Ua(n,i)}(e._query,t),new Yd(e.firestore,e.converter,Ua(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Uf extends Ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uf(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Li(Oi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Li(Oi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ca(t,n)}(e._query,this._field,this._direction);return new Yd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Da(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class qf extends Ff{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new qf(e,t,n)}_apply(e){return new Yd(e.firestore,e.converter,qa(e._query,this._limit,this._limitType))}}function Bf(e,t,n){if("string"==typeof(n=Rn(n))){if(""===n)throw new Li(Oi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ja(t)&&-1!==n.indexOf("/"))throw new Li(Oi.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ts.fromString(n));if(!is.isDocumentKey(r))throw new Li(Oi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qo(e,new is(r))}if(n instanceof $d)return Qo(e,n._key);throw new Li(Oi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(cs(n),"."))}function Hf(e,t){if(!Array.isArray(e)||0===e.length)throw new Li(Oi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Wf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Li(Oi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Li(Oi.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Kf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return So(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ai(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return co(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Fo].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>So(e.doubleValue));return new uf(n)}convertGeoPoint(e){return new cf(So(e.latitude),So(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=No(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ao(e));default:return null}}convertTimestamp(e){const t=wo(e);return new gs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ts.fromString(e);Pi(Bc(n),9688,{name:e});const r=new Do(n.get(1),n.get(3)),i=new is(n.popFirst(5));return r.isEqual(t)||xi("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Gf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yf extends Df{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new $f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Lf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Li(Oi.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yf._jsonSchema={type:ds("string",Yf._jsonSchemaVersion),bundleSource:ds("string","DocumentSnapshot"),bundleName:ds("string"),bundle:ds("string")};class $f extends Yf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Xf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $f(this._firestore,this._userDataWriter,n.key,n,new Qf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Li(Oi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new $f(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new $f(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Jf(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Li(Oi.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ki.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Jf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ai(61501,{type:e})}}Xf._jsonSchemaVersion="firestore/querySnapshot/1.0",Xf._jsonSchema={type:ds("string",Xf._jsonSchemaVersion),bundleSource:ds("string","QuerySnapshot"),bundleName:ds("string"),bundle:ds("string")};class Zf extends Kf{constructor(e){super(),this.firestore=e}convertBytes(e){return new of(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $d(this.firestore,null,t)}}function ep(e,t){return function(e,t){const n=new Mi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Id(e);try{const e=await function(e,t){const n=Di(e),r=gs.now(),i=t.reduce((e,t)=>e.add(t.key),al());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ja(),l=al();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Dl(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ml(e.key,t,ia(t.value.mapValue),xl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:tl(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new ho(Gi)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ed(r,e.changes),await Eh(r.remoteStore)}catch(e){const t=Fh(e,"Failed to persist write");n.reject(t)}}(await Vd(e),t,n)),n.promise}(rf(e),t)}function tp(e,t,n){const r=n.docs.get(t._key),i=new Zf(e);return new Yf(e,i,t._key,r,new Qf(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ci=e}(Kr),Ur(new Pn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new nf(new zi(e.getProvider("auth-internal")),new Hi(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Li(Oi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(e.options.projectId,t)}(s,r),s);return i=h({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Yr(bi,wi,e),Yr(bi,wi,"esm2020")}();const np=function(e,t){const n="object"==typeof e?e:Qr(),r="string"==typeof e?e:t||Po,i=qr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=en("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=us(e,Qd);const i=rn(t),s=e._getSettings(),o=h(h({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(sn("https://".concat(a)),cn("Firestore",!0)),s.host!==Wd&&s.host!==a&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=h(h({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!Tn(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Si.MOCK_USER;else{var c;t=on(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Li(Oi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Si(i)}e._authCredentials=new Vi(new ji(t,n))}}(i,...e)}return i}(Gr({apiKey:"AIzaSyDn7bqDndbozts8-J9Gv6HgCgYJWRzPSHs",authDomain:"japanese-master-e1f13.firebaseapp.com",projectId:"japanese-master-e1f13",storageBucket:"japanese-master-e1f13.firebasestorage.app",messagingSenderId:"206529901066",appId:"1:206529901066:web:ad075fb8fc652a2db125f3",measurementId:"G-67CLC24GGN"})),rp=async(e,t)=>{if(!e)return;const n=Jd(np,"users",e);try{const i=await function(e){e=us(e,$d);const t=us(e.firestore,nf);return Ud(rf(t),e._key).then(n=>tp(t,e,n))}(n);i.exists()?await function(e,t,n){e=us(e,$d);const r=us(e.firestore,nf),i=yf(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Rn(t))||t instanceof af?Sf(i,"updateDoc",e._key,t,n,a):wf(i,"updateDoc",e._key,t),ep(r,[s.toMutation(e._key,xl.exists(!0))])}(n,{totalScore:(r=t,new bf("increment",r)),lastPlayed:new Date}):await function(e,t,n){e=us(e,$d);const r=us(e.firestore,nf),i=Gf(e.converter,t,n);return ep(r,[vf(yf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xl.none())])}(n,{username:e,totalScore:t,lastPlayed:new Date})}catch(Rp){console.error("Error saving score:",Rp)}var r},ip=async()=>{try{const t=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof jf&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof zf).length,n=e.filter(e=>e instanceof Vf).length;if(t>1||t>0&&n>0)throw new Li(Oi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),ss("collection","path",t),e instanceof Qd){const n=ts.fromString(t,...r);return as(n),new Xd(e,null,n)}{if(!(e instanceof $d||e instanceof Xd))throw new Li(Oi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ts.fromString(t,...r));return as(n),new Xd(e.firestore,null,n)}}(np,"users"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Lf("orderBy",e);return Uf._create(n,t)}("totalScore","desc"),(hs("limit",e=3),qf._create("limit",e,"F"))),n=await function(e){e=us(e,Yd);const t=us(e.firestore,nf),n=rf(t),r=new Zf(t);return Mf(e._query),qd(n,e._query).then(n=>new Xf(t,r,e,n))}(t);return n.docs.map(e=>e.data())}catch(Rp){return console.error("Error fetching leaderboard:",Rp),[]}var e};const sp=function(e){let{stats:t,onStart:n}=e;const[i,s]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{const e=await ip();s(e)}catch(Rp){console.error("Error fetching leaderboard:",Rp)}})()},[]);const o=t.history&&t.history.length>0?t.history[t.history.length-1].accuracy:0;return(0,Mt.jsxs)("div",{className:"dashboard-container",children:[(0,Mt.jsxs)("div",{className:"hall-of-fame-card",children:[(0,Mt.jsx)("div",{className:"hof-header",children:(0,Mt.jsx)("h3",{children:"\ud83c\udfc6 HALL OF FAME (Top 3)"})}),(0,Mt.jsx)("div",{className:"hof-list",children:0===i.length?(0,Mt.jsx)("div",{style:{padding:"10px",color:"#ccc"},children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14..."}):i.map((e,t)=>(0,Mt.jsxs)("div",{className:"hof-item",children:[(0,Mt.jsxs)("span",{className:"rank",children:["#",t+1]}),(0,Mt.jsx)("span",{className:"name",children:e.username}),(0,Mt.jsxs)("span",{className:"xp",children:[e.totalScore," XP"]})]},t))}),(0,Mt.jsx)("div",{className:"hof-footer"})]}),(0,Mt.jsxs)("div",{className:"stats-grid",children:[(0,Mt.jsxs)("div",{className:"stat-card",children:[(0,Mt.jsx)("div",{className:"stat-value",children:t.totalCorrect||0}),(0,Mt.jsx)("div",{className:"stat-label",children:"\u0e04\u0e30\u0e41\u0e19\u0e19\u0e23\u0e27\u0e21\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13"})]}),(0,Mt.jsxs)("div",{className:"stat-card",children:[(0,Mt.jsxs)("div",{className:"stat-value",children:[o,"%"]}),(0,Mt.jsx)("div",{className:"stat-label",children:"\u0e04\u0e27\u0e32\u0e21\u0e41\u0e21\u0e48\u0e19\u0e22\u0e33\u0e25\u0e48\u0e32\u0e2a\u0e38\u0e14"})]})]}),(0,Mt.jsx)("div",{style:{marginTop:"30px"},children:(0,Mt.jsx)("button",{className:"start-btn",onClick:n,children:"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e40\u0e01\u0e21\u0e17\u0e31\u0e19\u0e17\u0e35"})})]})};const op=function(e){let{username:t}=e;const[n,i]=(0,r.useState)("dashboard"),[s,o]=(0,r.useState)({totalAttempts:0,totalCorrect:0,history:[],charStats:{}}),a=Lt?Lt.filter(e=>e.character&&""!==e.character):[];return(0,r.useEffect)(()=>{const e=localStorage.getItem("hiraganaUserStats");e&&o(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("hiraganaUserStats",JSON.stringify(s))},[s]),(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsx)("header",{children:(0,Mt.jsxs)("h1",{children:["Hiragana Mastery ",(0,Mt.jsx)("span",{className:"jp-font",children:"\u3072\u3089\u304c\u306a"})]})}),(0,Mt.jsxs)("main",{children:["dashboard"===n&&(0,Mt.jsx)(sp,{stats:s,onStart:()=>i("game")}),"game"===n&&(0,Mt.jsx)(jt,{dataset:a,onEnd:e=>{const n=[...s.history,{date:(new Date).toLocaleDateString(),score:e.score,total:e.total,accuracy:Math.round(e.score/e.total*100)}],r=h({},s.charStats);e.details.forEach(e=>{e.romaji&&(r[e.romaji]||(r[e.romaji]={correct:0,attempts:0}),r[e.romaji].attempts+=1,e.isCorrect&&(r[e.romaji].correct+=1))}),t&&rp(t,e.score),o({totalAttempts:s.totalAttempts+e.total,totalCorrect:s.totalCorrect+e.score,history:n,charStats:r}),i("dashboard")},onCancel:()=>i("dashboard")})]})]})},ap=[{character:"\u30a2",romaji:"a"},{character:"\u30a4",romaji:"i"},{character:"\u30a6",romaji:"u"},{character:"\u30a8",romaji:"e"},{character:"\u30aa",romaji:"o"},{character:"\u30ab",romaji:"ka"},{character:"\u30ad",romaji:"ki"},{character:"\u30af",romaji:"ku"},{character:"\u30b1",romaji:"ke"},{character:"\u30b3",romaji:"ko"},{character:"\u30b5",romaji:"sa"},{character:"\u30b7",romaji:"shi"},{character:"\u30b9",romaji:"su"},{character:"\u30bb",romaji:"se"},{character:"\u30bd",romaji:"so"},{character:"\u30bf",romaji:"ta"},{character:"\u30c1",romaji:"chi"},{character:"\u30c4",romaji:"tsu"},{character:"\u30c6",romaji:"te"},{character:"\u30c8",romaji:"to"},{character:"\u30ca",romaji:"na"},{character:"\u30cb",romaji:"ni"},{character:"\u30cc",romaji:"nu"},{character:"\u30cd",romaji:"ne"},{character:"\u30ce",romaji:"no"},{character:"\u30cf",romaji:"ha"},{character:"\u30d2",romaji:"hi"},{character:"\u30d5",romaji:"fu"},{character:"\u30d8",romaji:"he"},{character:"\u30db",romaji:"ho"},{character:"\u30de",romaji:"ma"},{character:"\u30df",romaji:"mi"},{character:"\u30e0",romaji:"mu"},{character:"\u30e1",romaji:"me"},{character:"\u30e2",romaji:"mo"},{character:"\u30e4",romaji:"ya"},{character:"",romaji:""},{character:"\u30e6",romaji:"yu"},{character:"",romaji:""},{character:"\u30e8",romaji:"yo"},{character:"\u30e9",romaji:"ra"},{character:"\u30ea",romaji:"ri"},{character:"\u30eb",romaji:"ru"},{character:"\u30ec",romaji:"re"},{character:"\u30ed",romaji:"ro"},{character:"\u30ef",romaji:"wa"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"\u30f2",romaji:"wo"},{character:"\u30f3",romaji:"n"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""}];const lp=function(e){let{username:t}=e;const[n,i]=(0,r.useState)("dashboard"),[s,o]=(0,r.useState)({totalAttempts:0,totalCorrect:0,history:[],charStats:{}}),a=ap.filter(e=>""!==e.character);return(0,r.useEffect)(()=>{const e=localStorage.getItem("katakanaUserStats");e&&o(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("katakanaUserStats",JSON.stringify(s))},[s]),(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsx)("header",{children:(0,Mt.jsxs)("h1",{children:["Katakana Mastery ",(0,Mt.jsx)("span",{className:"jp-font",children:"\u30ab\u30bf\u30ab\u30ca"})]})}),(0,Mt.jsxs)("main",{children:["dashboard"===n&&(0,Mt.jsx)(sp,{stats:s,onStart:()=>i("game")}),"game"===n&&(0,Mt.jsx)(jt,{dataset:a,onEnd:e=>{const n=[...s.history,{date:(new Date).toLocaleDateString(),score:e.score,total:e.total,accuracy:Math.round(e.score/e.total*100)}];t&&rp(t,e.score),o({totalAttempts:s.totalAttempts+e.total,totalCorrect:s.totalCorrect+e.score,history:n,charStats:s.charStats}),i("dashboard")},onCancel:()=>i("dashboard")})]})]})},cp=[{japanese:"\u308f\u305f\u3057",reading:"watashi",english:"I / Me"},{japanese:"\u3042\u306a\u305f",reading:"anata",english:"You"},{japanese:"\u305b\u3093\u305b\u3044",reading:"sensei",english:"Teacher"},{japanese:"\u304c\u304f\u305b\u3044",reading:"gakusei",english:"Student"},{japanese:"\u304b\u3044\u3057\u3083\u3044\u3093",reading:"kaishain",english:"Company Employee"},{japanese:"\u3057\u3083\u3044\u3093",reading:"shain",english:"Employee"},{japanese:"\u304e\u3093\u3053\u3046\u3044\u3093",reading:"ginkouin",english:"Bank Employee"},{japanese:"\u3044\u3057\u3083",reading:"isha",english:"Doctor"},{japanese:"\u3051\u3093\u304d\u3085\u3046\u3057\u3083",reading:"kenkyuusha",english:"Researcher"},{japanese:"\u3060\u3044\u304c\u304f",reading:"daigaku",english:"University"},{japanese:"\u3073\u3087\u3046\u3044\u3093",reading:"byouin",english:"Hospital"},{japanese:"\u3060\u308c",reading:"dare",english:"Who"},{japanese:"\u3055\u3044",reading:"sai",english:"...years old"},{japanese:"\u306a\u3093\u3055\u3044",reading:"nansai",english:"How old"},{japanese:"\u306f\u3044",reading:"hai",english:"Yes"},{japanese:"\u3044\u3044\u3048",reading:"iie",english:"No"},{japanese:"\u3053\u308c",reading:"kore",english:"This"},{japanese:"\u305d\u308c",reading:"sore",english:"That"},{japanese:"\u3042\u308c",reading:"are",english:"That (over there)"},{japanese:"\u307b\u3093",reading:"hon",english:"Book"},{japanese:"\u3058\u3057\u3087",reading:"jisho",english:"Dictionary"},{japanese:"\u3056\u3063\u3057",reading:"zasshi",english:"Magazine"},{japanese:"\u3057\u3093\u3076\u3093",reading:"shinbun",english:"Newspaper"},{japanese:"\u30ce\u30fc\u30c8",reading:"nooto",english:"Notebook"},{japanese:"\u3066\u3061\u3087\u3046",reading:"techou",english:"Pocket Notebook"},{japanese:"\u3081\u3044\u3057",reading:"meishi",english:"Business Card"},{japanese:"\u30ab\u30fc\u30c9",reading:"kaado",english:"Card"},{japanese:"\u3048\u3093\u3074\u3064",reading:"enpitsu",english:"Pencil"},{japanese:"\u30dc\u30fc\u30eb\u30da\u30f3",reading:"boorupen",english:"Ballpoint Pen"},{japanese:"\u304b\u304e",reading:"kagi",english:"Key"},{japanese:"\u3068\u3051\u3044",reading:"tokei",english:"Watch / Clock"},{japanese:"\u304b\u3055",reading:"kasa",english:"Umbrella"},{japanese:"\u304b\u3070\u3093",reading:"kaban",english:"Bag"},{japanese:"\u30c6\u30ec\u30d3",reading:"terebi",english:"TV"},{japanese:"\u30e9\u30b8\u30aa",reading:"rajio",english:"Radio"},{japanese:"\u30ab\u30e1\u30e9",reading:"kamera",english:"Camera"},{japanese:"\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc",reading:"konpyuutaa",english:"Computer"},{japanese:"\u304f\u308b\u307e",reading:"kuruma",english:"Car"},{japanese:"\u3064\u304f\u3048",reading:"tsukue",english:"Desk"},{japanese:"\u3044\u3059",reading:"isu",english:"Chair"},{japanese:"\u30c1\u30e7\u30b3\u30ec\u30fc\u30c8",reading:"chokoreeto",english:"Chocolate"},{japanese:"\u30b3\u30fc\u30d2\u30fc",reading:"koohii",english:"Coffee"},{japanese:"\u3048\u3044\u3054",reading:"eigo",english:"English Language"},{japanese:"\u306b\u307b\u3093\u3054",reading:"nihongo",english:"Japanese Language"},{japanese:"\u306a\u3093",reading:"nan",english:"What"},{japanese:"\u305d\u3046",reading:"sou",english:"So / True"},{japanese:"\u3053\u3053",reading:"koko",english:"Here"},{japanese:"\u305d\u3053",reading:"soko",english:"There"},{japanese:"\u3042\u305d\u3053",reading:"asoko",english:"Over there"},{japanese:"\u3069\u3053",reading:"doko",english:"Where"},{japanese:"\u304d\u3087\u3046\u3057\u3064",reading:"kyoushitsu",english:"Classroom"},{japanese:"\u3057\u3087\u304f\u3069\u3046",reading:"shokudou",english:"Canteen"},{japanese:"\u3058\u3080\u3057\u3087",reading:"jimusho",english:"Office"},{japanese:"\u304b\u3044\u304e\u3057\u3064",reading:"kaigishitsu",english:"Meeting Room"},{japanese:"\u3046\u3051\u3064\u3051",reading:"uketsuke",english:"Reception"},{japanese:"\u30ed\u30d3\u30fc",reading:"robii",english:"Lobby"},{japanese:"\u3078\u3084",reading:"heya",english:"Room"},{japanese:"\u30c8\u30a4\u30ec",reading:"toire",english:"Toilet"},{japanese:"\u304a\u3066\u3042\u3089\u3044",reading:"otearai",english:"Restroom"},{japanese:"\u304b\u3044\u3060\u3093",reading:"kaidan",english:"Stairs"},{japanese:"\u30a8\u30ec\u30d9\u30fc\u30bf\u30fc",reading:"erebeetaa",english:"Elevator"},{japanese:"\u30a8\u30b9\u30ab\u30ec\u30fc\u30bf\u30fc",reading:"esukareetaa",english:"Escalator"},{japanese:"\u304f\u306b",reading:"kuni",english:"Country"},{japanese:"\u304b\u3044\u3057\u3083",reading:"kaisha",english:"Company"},{japanese:"\u3046\u3061",reading:"uchi",english:"House / Home"},{japanese:"\u3067\u3093\u308f",reading:"denwa",english:"Telephone"},{japanese:"\u304f\u3064",reading:"kutsu",english:"Shoes"},{japanese:"\u30cd\u30af\u30bf\u30a4",reading:"nekutai",english:"Necktie"},{japanese:"\u30ef\u30a4\u30f3",reading:"wain",english:"Wine"},{japanese:"\u305f\u3070\u3053",reading:"tabako",english:"Cigarette"},{japanese:"\u3046\u308a\u3070",reading:"uriba",english:"Department / Counter"},{japanese:"\u3061\u304b",reading:"chika",english:"Basement"},{japanese:"\u304b\u3044",reading:"kai",english:"...floor"},{japanese:"\u306a\u3093\u304c\u3044",reading:"nangai",english:"What floor"},{japanese:"\u3048\u3093",reading:"en",english:"Yen"},{japanese:"\u3044\u304f\u3089",reading:"ikura",english:"How much"},{japanese:"\u3072\u3083\u304f",reading:"hyaku",english:"Hundred"},{japanese:"\u305b\u3093",reading:"sen",english:"Thousand"},{japanese:"\u307e\u3093",reading:"man",english:"Ten Thousand"},{japanese:"\u304a\u306f\u3088\u3046",reading:"ohayou",english:"Good Morning"},{japanese:"\u3053\u3093\u306b\u3061\u306f",reading:"konnichiwa",english:"Hello"},{japanese:"\u3053\u3093\u3070\u3093\u306f",reading:"konbanwa",english:"Good Evening"},{japanese:"\u304a\u3084\u3059\u307f",reading:"oyasumi",english:"Good Night"},{japanese:"\u3055\u3088\u3046\u306a\u3089",reading:"sayounara",english:"Goodbye"},{japanese:"\u3042\u308a\u304c\u3068\u3046",reading:"arigatou",english:"Thank you"},{japanese:"\u3059\u307f\u307e\u305b\u3093",reading:"sumimasen",english:"Excuse me"},{japanese:"\u304a\u306d\u304c\u3044\u3057\u307e\u3059",reading:"onegaishimasu",english:"Please"},{japanese:"\u306f\u3058\u3081\u307e\u3057\u3066",reading:"hajimemashite",english:"Nice to meet you"},{japanese:"\u307f\u305a",reading:"mizu",english:"Water"},{japanese:"\u3054\u306f\u3093",reading:"gohan",english:"Rice / Meal"},{japanese:"\u30d1\u30f3",reading:"pan",english:"Bread"},{japanese:"\u305f\u307e\u3054",reading:"tamago",english:"Egg"},{japanese:"\u306b\u304f",reading:"niku",english:"Meat"},{japanese:"\u3055\u304b\u306a",reading:"sakana",english:"Fish"},{japanese:"\u3084\u3055\u3044",reading:"yasai",english:"Vegetable"},{japanese:"\u304f\u3060\u3082\u306e",reading:"kudamono",english:"Fruit"},{japanese:"\u304a\u3061\u3083",reading:"ocha",english:"Tea / Green Tea"},{japanese:"\u3053\u3046\u3061\u3083",reading:"koucha",english:"Black Tea"},{japanese:"\u304e\u3085\u3046\u306b\u3085\u3046",reading:"gyuunyuu",english:"Milk"},{japanese:"\u30b8\u30e5\u30fc\u30b9",reading:"juusu",english:"Juice"},{japanese:"\u30d3\u30fc\u30eb",reading:"biiru",english:"Beer"},{japanese:"\u3055\u3051",reading:"sake",english:"Sake / Alcohol"},{japanese:"\u3066\u304c\u307f",reading:"tegami",english:"Letter"},{japanese:"\u30ec\u30dd\u30fc\u30c8",reading:"repooto",english:"Report"},{japanese:"\u3057\u3083\u3057\u3093",reading:"shashin",english:"Photograph"},{japanese:"\u307f\u305b",reading:"mise",english:"Shop / Store"},{japanese:"\u306b\u308f",reading:"niwa",english:"Garden"},{japanese:"\u3057\u3085\u304f\u3060\u3044",reading:"shukudai",english:"Homework"},{japanese:"\u3068\u3082\u3060\u3061",reading:"tomodachi",english:"Friend"}];const up=function(e){let{username:t}=e;const[n,i]=(0,r.useState)("dashboard"),[s,o]=(0,r.useState)({totalAttempts:0,totalCorrect:0,history:[],charStats:{}}),a=cp.map(e=>({character:e.japanese,romaji:e.english,original:e}));return(0,r.useEffect)(()=>{const e=localStorage.getItem("vocabUserStats");e&&o(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("vocabUserStats",JSON.stringify(s))},[s]),(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsx)("header",{children:(0,Mt.jsxs)("h1",{children:["Vocabulary Challenge ",(0,Mt.jsx)("span",{className:"jp-font",children:"\u5358\u8a9e"})]})}),(0,Mt.jsxs)("main",{children:["dashboard"===n&&(0,Mt.jsx)(sp,{stats:s,onStart:()=>i("game")}),"game"===n&&(0,Mt.jsx)(jt,{dataset:a,onEnd:e=>{const n=[...s.history,{date:(new Date).toLocaleDateString(),score:e.score,total:e.total,accuracy:Math.round(e.score/e.total*100)}];t&&rp(t,e.score),o({totalAttempts:s.totalAttempts+e.total,totalCorrect:s.totalCorrect+e.score,history:n,charStats:s.charStats}),i("dashboard")},onCancel:()=>i("dashboard")})]})]})};const hp=function(){return(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsxs)("header",{children:[(0,Mt.jsx)(xt,{to:"/",className:"back-link",children:"\u2190 \u0e01\u0e25\u0e31\u0e1a\u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"}),(0,Mt.jsxs)("h1",{children:["Hiragana Chart ",(0,Mt.jsx)("span",{className:"jp-font",children:"\u3072\u3089\u304c\u306a"})]})]}),(0,Mt.jsx)("main",{className:"chart-container",children:(0,Mt.jsx)("div",{className:"character-grid",children:Lt.map((e,t)=>(0,Mt.jsx)("div",{className:"char-card ".concat(e.character?"":"empty"),children:e.character?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("div",{className:"char-jp",children:e.character}),(0,Mt.jsx)("div",{className:"char-ro",children:e.romaji})]}):(0,Mt.jsx)("div",{className:"char-empty"})},t))})})]})};const dp=function(){return(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsxs)("header",{children:[(0,Mt.jsx)(xt,{to:"/",className:"back-link",children:"\u2190 \u0e01\u0e25\u0e31\u0e1a\u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"}),(0,Mt.jsxs)("h1",{children:["Katakana Chart ",(0,Mt.jsx)("span",{className:"jp-font",children:"\u30ab\u30bf\u30ab\u30ca"})]})]}),(0,Mt.jsx)("main",{className:"chart-container",children:(0,Mt.jsx)("div",{className:"character-grid",children:ap.map((e,t)=>(0,Mt.jsx)("div",{className:"char-card ".concat(e.character?"":"empty"),children:e.character?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("div",{className:"char-jp",children:e.character}),(0,Mt.jsx)("div",{className:"char-ro",children:e.romaji})]}):(0,Mt.jsx)("div",{className:"char-empty"})},t))})})]})},fp="@firebase/database",pp="1.1.0";let mp="";function gp(e){mp=e}class yp{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:_n(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vp{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Sn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const _p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new yp(t)}}catch(q_){}return new vp},bp=_p("localStorage"),wp=_p("sessionStorage"),Sp=new qn("@firebase/database"),Cp=function(){let e=1;return function(){return e++}}(),Ep=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ut(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new In;n.update(t);const r=n.digest();return Ht.encodeByteArray(r)},kp=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=kp.apply(null,n):e+="object"===typeof n?bn(n):n,e+=" "}return e};let Tp=null,xp=!0;const Ip=function(e,t){Ut(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Sp.logLevel=jn.VERBOSE,Tp=Sp.log.bind(Sp),t&&wp.set("logging_enabled",!0)):"function"===typeof e?Tp=e:(Tp=null,wp.remove("logging_enabled"))},Np=function(){if(!0===xp&&(xp=!1,null===Tp&&!0===wp.get("logging_enabled")&&Ip(!0)),Tp){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=kp.apply(null,t);Tp(r)}},Ap=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Np(e,...n)}},Rp=function(){const e="FIREBASE INTERNAL ERROR: "+kp(...arguments);Sp.error(e)},Pp=function(){const e="FIREBASE FATAL ERROR: ".concat(kp(...arguments));throw Sp.error(e),new Error(e)},Dp=function(){const e="FIREBASE WARNING: "+kp(...arguments);Sp.warn(e)},Op=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Lp="[MIN_NAME]",Mp="[MAX_NAME]",jp=function(e,t){if(e===t)return 0;if(e===Lp||t===Mp)return-1;if(t===Lp||e===Mp)return 1;{const n=Wp(e),r=Wp(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Fp=function(e,t){return e===t?0:e<t?-1:1},Vp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+bn(t))},zp=function(e){if("object"!==typeof e||null===e)return bn(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=bn(t[r]),n+=":",n+=zp(e[t[r]]);return n+="}",n},Up=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function qp(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Bp=function(e){Ut(!Op(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Hp=new RegExp("^-?(0*)\\d{1,10}$"),Wp=function(e){if(Hp.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Kp=function(e){try{e()}catch(q_){setTimeout(()=>{const t=q_.stack||"";throw Dp("Exception was thrown by user callback.",t),q_},Math.floor(0))}},Gp=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Qp{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Br(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Dp('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Yp{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(Np("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dp(e)}}class $p{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}$p.OWNER="owner";const Xp="5",Jp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zp="ac",em="websocket",tm="long_polling";class nm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function rm(e,t,n){let r;if(Ut("string"===typeof t,"typeof type must == string"),Ut("object"===typeof n,"typeof params must == object"),t===em)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==tm)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return qp(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class im{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Sn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Yt(this.counters_)}}const sm={},om={};function am(e){const t=e.toString();return sm[t]||(sm[t]=new im),sm[t]}class lm{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Kp(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const cm="start";class um{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ap(e),this.stats_=am(t),this.urlFn=e=>(this.appCheckToken&&(e[Zp]=this.appCheckToken),rm(t,tm,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lm(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(fn()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hm(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===cm)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[cm]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Xp,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Zp]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Jp.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){um.forceAllow_=!0}static forceDisallow(){um.forceDisallow_=!0}static isAvailable(){return!fn()&&(!!um.forceAllow_||!um.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=bn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Kt(t),r=Up(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(fn())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=bn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hm{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,fn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Cp(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hm.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(q_){Np("frame writing exception"),q_.stack&&Np(q_.stack),Np(q_)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Np("No IE domain setting required")}catch(q_){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){fn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Np("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(q_){}},Math.floor(1))}}let dm=null;"undefined"!==typeof MozWebSocket?dm=MozWebSocket:"undefined"!==typeof WebSocket&&(dm=WebSocket);class fm{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ap(this.connId),this.stats_=am(t),this.connURL=fm.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Xp,!fn()&&"undefined"!==typeof location&&location.hostname&&Jp.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Zp]=r),i&&(s.p=i),rm(e,em,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bp.set("previous_websocket_failure",!0);try{let e;if(fn()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Xp,"/").concat(mp,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/hiragana-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new dm(this.connURL,[],e)}catch(q_){this.log_("Error instantiating WebSocket.");const t=q_.message||q_.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){fm.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dm&&!fm.forceDisallow_}static previouslyFailed(){return bp.isInMemoryStorage||!0===bp.get("previous_websocket_failure")}markConnectionHealthy(){bp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=_n(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ut(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=bn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Up(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(q_){this.log_("Exception thrown from WebSocket.send():",q_.message||q_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fm.responsesRequiredToBeHealthy=2,fm.healthyTimeout=3e4;class pm{static get ALL_TRANSPORTS(){return[um,fm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=fm&&fm.isAvailable();let n=t&&!fm.previouslyFailed();if(e.webSocketOnly&&(t||Dp("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[fm];else{const e=this.transports_=[];for(const t of pm.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);pm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pm.globalTransportInitialized_=!1;class mm{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ap("c:"+this.id+":"),this.transportManager_=new pm(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Gp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vp("t",e),n=Vp("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vp("t",e),n=Vp("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vp("t",e);if("d"in e){const n=e.d;if("h"===t){const e=h({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Rp("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xp!==n&&Dp("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Gp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gm{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ym{constructor(e){this.allowedEvents_=e,this.listeners_={},Ut(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Ut(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vm extends ym{static getInstance(){return new vm}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||hn()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ut("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _m{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bm(){return new _m("")}function wm(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Sm(e){return e.pieces_.length-e.pieceNum_}function Cm(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new _m(e.pieces_,t)}function Em(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function km(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Tm(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new _m(t,0)}function xm(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof _m)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new _m(n,0)}function Im(e){return e.pieceNum_>=e.pieces_.length}function Nm(e,t){const n=wm(e),r=wm(t);if(null===n)return t;if(n===r)return Nm(Cm(e),Cm(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Am(e,t){if(Sm(e)!==Sm(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Rm(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Sm(e)>Sm(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Pm{constructor(e,t){this.errorPrefix_=t,this.parts_=km(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=An(this.parts_[n]);Dm(this)}}function Dm(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Om(e))}function Om(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Lm extends ym{static getInstance(){return new Lm}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Ut("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Mm=1e3;class jm extends gm{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=jm.nextPersistentConnectionId_++,this.log_=Ap("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!fn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Lm.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&vm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(bn(i)),Ut(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new nn,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Ut(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ut(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;jm.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Sn(e,"w")){const n=Cn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Dp("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=wn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=wn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ut(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bn(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Rp("Unrecognized action received from server: "+bn(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ut(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mm,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Mm),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+jm.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Ut(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Np("getToken() completed but was canceled"):(Np("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new mm(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{Dp(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(Rp){this.log_("Failed to get token: "+Rp),s||(this.repoInfo_.nodeAdmin&&Dp(Rp),a())}}}interrupt(e){Np("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Np("Resuming connection for reason: "+e),delete this.interruptReasons_[e],En(this.interruptReasons_)&&(this.reconnectDelay_=Mm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>zp(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new _m(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Np("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Np("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";fn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+mp.replace(/\./g,"-")]=1,hn()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vm.getInstance().currentlyOnline();return En(this.interruptReasons_)&&e}}jm.nextPersistentConnectionId_=0,jm.nextConnectionId_=0;class Fm{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Fm(e,t)}}class Vm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Fm(Lp,e),r=new Fm(Lp,t);return 0!==this.compare(n,r)}minPost(){return Fm.MIN}}let zm;class Um extends Vm{static get __EMPTY_NODE(){return zm}static set __EMPTY_NODE(e){zm=e}compare(e,t){return jp(e.name,t.name)}isDefinedOn(e){throw qt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Fm.MIN}maxPost(){return new Fm(Mp,zm)}makePost(e,t){return Ut("string"===typeof e,"KeyIndex indexValue must always be a string."),new Fm(e,zm)}toString(){return".key"}}const qm=new Um;class Bm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Hm{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Hm.RED,this.left=null!=r?r:Wm.EMPTY_NODE,this.right=null!=i?i:Wm.EMPTY_NODE}copy(e,t,n,r,i){return new Hm(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wm.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Wm.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Hm.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Hm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Hm.RED=!0,Hm.BLACK=!1;class Wm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wm.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Wm(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Hm.BLACK,null,null))}remove(e){return new Wm(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hm.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Bm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Bm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Bm(this.root_,null,this.comparator_,!0,e)}}function Km(e,t){return jp(e.name,t.name)}function Gm(e,t){return jp(e,t)}let Qm;Wm.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Hm(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ym=function(e){return"number"===typeof e?"number:"+Bp(e):"string:"+e},$m=function(e){if(e.isLeafNode()){const t=e.val();Ut("string"===typeof t||"number"===typeof t||"object"===typeof t&&Sn(t,".sv"),"Priority must be a string or number.")}else Ut(e===Qm||e.isEmpty(),"priority of unexpected type.");Ut(e===Qm||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Xm,Jm,Zm;class eg{static set __childrenNodeConstructor(e){Xm=e}static get __childrenNodeConstructor(){return Xm}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eg.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ut(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),$m(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new eg(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:eg.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Im(e)?this:".priority"===wm(e)?this.priorityNode_:eg.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:eg.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=wm(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ut(".priority"!==n||1===Sm(e),".priority must be the last token in a path"),this.updateImmediateChild(n,eg.__childrenNodeConstructor.EMPTY_NODE.updateChild(Cm(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ym(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Bp(this.value_):this.value_,this.lazyHash_=Ep(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===eg.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof eg.__childrenNodeConstructor?-1:(Ut(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=eg.VALUE_TYPE_ORDER.indexOf(t),i=eg.VALUE_TYPE_ORDER.indexOf(n);return Ut(r>=0,"Unknown leaf type: "+t),Ut(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}eg.VALUE_TYPE_ORDER=["object","boolean","number","string"];const tg=new class extends Vm{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?jp(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Fm.MIN}maxPost(){return new Fm(Mp,new eg("[PRIORITY-POST]",Zm))}makePost(e,t){const n=Jm(e);return new Fm(t,new eg("[PRIORITY-POST]",n))}toString(){return".priority"}},ng=Math.log(2);class rg{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/ng,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ig=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Hm(a,o.node,Hm.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Hm(a,o.node,Hm.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Hm(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Hm.BLACK):(a(r,Hm.BLACK),a(r,Hm.RED))}return s}(new rg(e.length));return new Wm(r||t,s)};let sg;const og={};class ag{static get Default(){return Ut(og&&tg,"ChildrenNode.ts has not been loaded"),sg=sg||new ag({".priority":og},{".priority":tg}),sg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Cn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wm?t:null}hasIndex(e){return Sn(this.indexSet_,e.toString())}addIndex(e,t){Ut(e!==qm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Fm.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?ig(n,e.getCompare()):og;const a=e.toString(),l=h({},this.indexSet_);l[a]=e;const c=h({},this.indexes_);return c[a]=s,new ag(c,l)}addToIndexes(e,t){const n=kn(this.indexes_,(n,r)=>{const i=Cn(this.indexSet_,r);if(Ut(i,"Missing index implementation for "+r),n===og){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Fm.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),ig(n,i.getCompare())}return og}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Fm(e.name,r))),i.insert(e,e.node)}});return new ag(n,this.indexSet_)}removeFromIndexes(e,t){const n=kn(this.indexes_,n=>{if(n===og)return n;{const r=t.get(e.name);return r?n.remove(new Fm(e.name,r)):n}});return new ag(n,this.indexSet_)}}let lg;class cg{static get EMPTY_NODE(){return lg||(lg=new cg(new Wm(Gm),null,ag.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$m(this.priorityNode_),this.children_.isEmpty()&&Ut(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lg}updatePriority(e){return this.children_.isEmpty()?this:new cg(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?lg:t}}getChild(e){const t=wm(e);return null===t?this:this.getImmediateChild(t).getChild(Cm(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ut(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Fm(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?lg:this.priorityNode_;return new cg(r,s,i)}}updateChild(e,t){const n=wm(e);if(null===n)return t;{Ut(".priority"!==wm(e)||1===Sm(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Cm(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(tg,(s,o)=>{t[s]=o.val(e),n++,i&&cg.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ym(this.getPriority().val())+":"),this.forEachChild(tg,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":Ep(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Fm(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Fm(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Fm(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,Fm.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,Fm.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ug?-1:0}withIndex(e){if(e===qm||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new cg(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===qm||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(tg),n=t.getIterator(tg);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===qm?null:this.indexMap_.get(e.toString())}}cg.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const ug=new class extends cg{constructor(){super(new Wm(Gm),cg.EMPTY_NODE,ag.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return cg.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Fm,{MIN:{value:new Fm(Lp,cg.EMPTY_NODE)},MAX:{value:new Fm(Mp,ug)}}),Um.__EMPTY_NODE=cg.EMPTY_NODE,eg.__childrenNodeConstructor=cg,Qm=ug,function(e){Zm=e}(ug);function hg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return cg.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ut(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new eg(e,hg(t))}if(e instanceof Array){let n=cg.EMPTY_NODE;return qp(e,(t,r)=>{if(Sn(e,t)&&"."!==t.substring(0,1)){const e=hg(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(hg(t))}{const n=[];let r=!1;if(qp(e,(e,t)=>{if("."!==e.substring(0,1)){const i=hg(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Fm(e,i)))}}),0===n.length)return cg.EMPTY_NODE;const i=ig(n,Km,e=>e.name,Gm);if(r){const e=ig(n,tg.getCompare());return new cg(i,hg(t),new ag({".priority":e},{".priority":tg}))}return new cg(i,hg(t),ag.Default)}}!function(e){Jm=e}(hg);class dg extends Vm{constructor(e){super(),this.indexPath_=e,Ut(!Im(e)&&".priority"!==wm(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?jp(e.name,t.name):i}makePost(e,t){const n=hg(e),r=cg.EMPTY_NODE.updateChild(this.indexPath_,n);return new Fm(t,r)}maxPost(){const e=cg.EMPTY_NODE.updateChild(this.indexPath_,ug);return new Fm(Mp,e)}toString(){return km(this.indexPath_,0).join("/")}}const fg=new class extends Vm{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?jp(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Fm.MIN}maxPost(){return Fm.MAX}makePost(e,t){const n=hg(e);return new Fm(t,n)}toString(){return".value"}};function pg(e){return{type:"value",snapshotNode:e}}function mg(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function gg(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yg(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class vg{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Ut(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(gg(t,o)):Ut(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(mg(t,n)):s.trackChildChange(yg(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(tg,(e,r)=>{t.hasChild(e)||n.trackChildChange(gg(e,r))}),t.isLeafNode()||t.forEachChild(tg,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(yg(t,r,i))}else n.trackChildChange(mg(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?cg.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _g{constructor(e){this.indexedFilter_=new vg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_g.getStartPost_(e),this.endPost_=_g.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Fm(t,n))||(n=cg.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=cg.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(cg.EMPTY_NODE);const i=this;return t.forEachChild(tg,(e,t)=>{i.matches(new Fm(e,t))||(r=r.updateImmediateChild(e,cg.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class bg{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new _g(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Fm(t,n))||(n=cg.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=cg.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=cg.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(cg.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,cg.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ut(o.numChildren()===this.limit_,"");const a=new Fm(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(yg(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(gg(t,e));const n=o.updateImmediateChild(t,cg.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(mg(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(gg(l.name,l.node)),i.trackChildChange(mg(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,cg.EMPTY_NODE)):e}}class wg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tg}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ut(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ut(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lp}hasEnd(){return this.endSet_}getIndexEndValue(){return Ut(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ut(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mp}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ut(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tg}copy(){const e=new wg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Sg(e,t){const n=e.copy();return n.index_=t,n}function Cg(e){const t={};if(e.isDefault())return t;let n;if(e.index_===tg?n="$priority":e.index_===fg?n="$value":e.index_===qm?n="$key":(Ut(e.index_ instanceof dg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=bn(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=bn(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+bn(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=bn(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+bn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Eg(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==tg&&(t.i=e.index_.toString()),t}class kg extends gm{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ut(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ap("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=kg.getListenId_(e,n),o={};this.listens_[s]=o;const a=Cg(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Cn(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=kg.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Cg(e._queryParams),n=e._path.toString(),r=new nn;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=_n(a.responseText)}catch(q_){Dp("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Dp("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class Tg{constructor(){this.rootNode_=cg.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xg(){return{value:null,children:new Map}}function Ig(e,t,n){if(Im(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=wm(t);e.children.has(r)||e.children.set(r,xg());Ig(e.children.get(r),t=Cm(t),n)}}function Ng(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{Ng(r,new _m(t.toString()+"/"+e),n)})}class Ag{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=h({},e);return this.last_&&qp(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class Rg{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ag(e);const n=1e4+2e4*Math.random();Gp(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;qp(e,(e,r)=>{r>0&&Sn(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Gp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pg;function Dg(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pg||(Pg={}));class Og{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Pg.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Im(this.path)){if(null!=this.affectedTree.value)return Ut(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _m(e));return new Og(bm(),t,this.revert)}}return Ut(wm(this.path)===e,"operationForChild called for unrelated child."),new Og(Cm(this.path),this.affectedTree,this.revert)}}class Lg{constructor(e,t){this.source=e,this.path=t,this.type=Pg.LISTEN_COMPLETE}operationForChild(e){return Im(this.path)?new Lg(this.source,bm()):new Lg(this.source,Cm(this.path))}}class Mg{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Pg.OVERWRITE}operationForChild(e){return Im(this.path)?new Mg(this.source,bm(),this.snap.getImmediateChild(e)):new Mg(this.source,Cm(this.path),this.snap)}}class jg{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Pg.MERGE}operationForChild(e){if(Im(this.path)){const t=this.children.subtree(new _m(e));return t.isEmpty()?null:t.value?new Mg(this.source,bm(),t.value):new jg(this.source,bm(),t)}return Ut(wm(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jg(this.source,Cm(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Fg{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Im(e))return this.isFullyInitialized()&&!this.filtered_;const t=wm(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Vg{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function zg(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw qt("Should only compare child_ events.");const r=new Fm(t.childName,t.snapshotNode),i=new Fm(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Ug(e,t){return{eventCache:e,serverCache:t}}function qg(e,t,n,r){return Ug(new Fg(t,n,r),e.serverCache)}function Bg(e,t,n,r){return Ug(e.eventCache,new Fg(t,n,r))}function Hg(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Wg(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Kg;class Gg{static fromObject(e){let t=new Gg(null);return qp(e,(e,n)=>{t=t.set(new _m(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Kg||(Kg=new Wm(Fp)),Kg);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bm(),value:this.value};if(Im(e))return null;{const n=wm(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Cm(e),t);if(null!=i){return{path:xm(new _m(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Im(e))return this;{const t=wm(e),n=this.children.get(t);return null!==n?n.subtree(Cm(e)):new Gg(null)}}set(e,t){if(Im(e))return new Gg(t,this.children);{const n=wm(e),r=(this.children.get(n)||new Gg(null)).set(Cm(e),t),i=this.children.insert(n,r);return new Gg(this.value,i)}}remove(e){if(Im(e))return this.children.isEmpty()?new Gg(null):new Gg(null,this.children);{const t=wm(e),n=this.children.get(t);if(n){const r=n.remove(Cm(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Gg(null):new Gg(this.value,i)}return this}}get(e){if(Im(e))return this.value;{const t=wm(e),n=this.children.get(t);return n?n.get(Cm(e)):null}}setTree(e,t){if(Im(e))return t;{const n=wm(e),r=(this.children.get(n)||new Gg(null)).setTree(Cm(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Gg(this.value,i)}}fold(e){return this.fold_(bm(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(xm(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,bm(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Im(e))return null;{const r=wm(e),i=this.children.get(r);return i?i.findOnPath_(Cm(e),xm(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bm(),t)}foreachOnPath_(e,t,n){if(Im(e))return this;{this.value&&n(t,this.value);const r=wm(e),i=this.children.get(r);return i?i.foreachOnPath_(Cm(e),xm(t,r),n):new Gg(null)}}foreach(e){this.foreach_(bm(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(xm(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Qg{constructor(e){this.writeTree_=e}static empty(){return new Qg(new Gg(null))}}function Yg(e,t,n){if(Im(t))return new Qg(new Gg(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Nm(i,t);return s=s.updateChild(o,n),new Qg(e.writeTree_.set(i,s))}{const r=new Gg(n),i=e.writeTree_.setTree(t,r);return new Qg(i)}}}function $g(e,t,n){let r=e;return qp(n,(e,n)=>{r=Yg(r,xm(t,e),n)}),r}function Xg(e,t){if(Im(t))return Qg.empty();{const n=e.writeTree_.setTree(t,new Gg(null));return new Qg(n)}}function Jg(e,t){return null!=Zg(e,t)}function Zg(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Nm(n.path,t)):null}function ey(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(tg,(e,n)=>{t.push(new Fm(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new Fm(e,n.value))}),t}function ty(e,t){if(Im(t))return e;{const n=Zg(e,t);return new Qg(null!=n?new Gg(n):e.writeTree_.subtree(t))}}function ny(e){return e.writeTree_.isEmpty()}function ry(e,t){return iy(bm(),e.writeTree_,t)}function iy(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(Ut(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=iy(xm(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(xm(e,".priority"),r)),n}}function sy(e,t){return vy(t,e)}function oy(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Ut(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&ay(t,r.path)?i=!1:Rm(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=cy(e.allWrites,ly,bm()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Xg(e.visibleWrites,r.path);else{qp(r.children,t=>{e.visibleWrites=Xg(e.visibleWrites,xm(r.path,t))})}return!0}return!1}function ay(e,t){if(e.snap)return Rm(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Rm(xm(e.path,n),t))return!0;return!1}function ly(e){return e.visible}function cy(e,t,n){let r=Qg.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Rm(n,e)?(t=Nm(n,e),r=Yg(r,t,s.snap)):Rm(e,n)&&(t=Nm(e,n),r=Yg(r,bm(),s.snap.getChild(t)));else{if(!s.children)throw qt("WriteRecord should have .snap or .children");if(Rm(n,e))t=Nm(n,e),r=$g(r,t,s.children);else if(Rm(e,n))if(t=Nm(e,n),Im(t))r=$g(r,bm(),s.children);else{const e=Cn(s.children,wm(t));if(e){const n=e.getChild(Cm(t));r=Yg(r,bm(),n)}}}}}return r}function uy(e,t,n,r,i){if(r||i){const s=ty(e.visibleWrites,t);if(!i&&ny(s))return n;if(i||null!=n||Jg(s,bm())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Rm(e.path,t)||Rm(t,e.path))};return ry(cy(e.allWrites,s,t),n||cg.EMPTY_NODE)}return null}{const r=Zg(e.visibleWrites,t);if(null!=r)return r;{const r=ty(e.visibleWrites,t);if(ny(r))return n;if(null!=n||Jg(r,bm())){return ry(r,n||cg.EMPTY_NODE)}return null}}}function hy(e,t,n,r){return uy(e.writeTree,e.treePath,t,n,r)}function dy(e,t){return function(e,t,n){let r=cg.EMPTY_NODE;const i=Zg(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(tg,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=ty(e.visibleWrites,t);return n.forEachChild(tg,(e,t)=>{const n=ry(ty(i,new _m(e)),t);r=r.updateImmediateChild(e,n)}),ey(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return ey(ty(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function fy(e,t,n,r){return function(e,t,n,r,i){Ut(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=xm(t,n);if(Jg(e.visibleWrites,s))return null;{const t=ty(e.visibleWrites,s);return ny(t)?i.getChild(n):ry(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function py(e,t){return function(e,t){return Zg(e.visibleWrites,t)}(e.writeTree,xm(e.treePath,t))}function my(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=ty(e.visibleWrites,t),c=Zg(l,bm());if(null!=c)a=c;else{if(null==n)return[];a=ry(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function gy(e,t,n){return function(e,t,n,r){const i=xm(t,n),s=Zg(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return ry(ty(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function yy(e,t){return vy(xm(e.treePath,t),e.writeTree)}function vy(e,t){return{treePath:e,writeTree:t}}class _y{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ut("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ut(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,yg(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,gg(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,mg(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw qt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,yg(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const by=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class wy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Fg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gy(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wg(this.viewCache_),i=my(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Sy(e,t,n,r,i){const s=new _y;let o,a;if(n.type===Pg.OVERWRITE){const l=n;l.source.fromUser?o=ky(e,t,l.path,l.snap,r,i,s):(Ut(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Im(l.path),o=Ey(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Pg.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=xm(n,r);Ty(t,wm(c))&&(a=ky(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=xm(n,r);Ty(t,wm(c))||(a=ky(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):(Ut(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Iy(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Pg.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=py(r,n))return t;{const a=new wy(r,t,i),l=t.eventCache.getNode();let c;if(Im(n)||".priority"===wm(n)){let n;if(t.serverCache.isFullyInitialized())n=hy(r,Wg(t));else{const e=t.serverCache.getNode();Ut(e instanceof cg,"serverChildren would be complete if leaf node"),n=dy(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=wm(n);let u=gy(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,Cm(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,cg.EMPTY_NODE,Cm(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=hy(r,Wg(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=py(r,bm()),qg(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=py(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Im(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ey(e,t,n,l.getNode().getChild(n),i,s,a,o);if(Im(n)){let r=new Gg(null);return l.getNode().forEachChild(qm,(e,t)=>{r=r.set(new _m(e),t)}),Iy(e,t,n,r,i,s,a,o)}return t}{let c=new Gg(null);return r.foreach((e,t)=>{const r=xm(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),Iy(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Pg.LISTEN_COMPLETE)throw qt("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Bg(t,s.getNode(),s.isFullyInitialized()||Im(n),s.isFiltered());return Cy(e,o,n,r,by,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Hg(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(pg(Hg(t)))}}(t,o,l),{viewCache:o,changes:l}}function Cy(e,t,n,r,i,s){const o=t.eventCache;if(null!=py(r,n))return t;{let a,l;if(Im(n))if(Ut(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Wg(t),i=dy(r,n instanceof cg?n:cg.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=hy(r,Wg(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=wm(n);if(".priority"===c){Ut(1===Sm(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=fy(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=Cm(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=fy(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=gy(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return qg(t,a,o.isFullyInitialized()||Im(n),e.filter.filtersNodes())}}function Ey(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Im(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=wm(n);if(!l.isCompleteForPath(n)&&Sm(n)>1)return t;const i=Cm(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,by,null)}const h=Bg(t,c,l.isFullyInitialized()||Im(n),u.filtersNodes());return Cy(e,h,n,i,new wy(i,h,s),a)}function ky(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new wy(i,t,s);if(Im(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=qg(t,c,!0,e.filter.filtersNodes());else{const i=wm(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=qg(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Cm(n),c=a.getNode().getImmediateChild(i);let h;if(Im(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===Em(s)&&e.getChild(Tm(s)).isEmpty()?e:e.updateChild(s,r):cg.EMPTY_NODE}if(c.equals(h))l=t;else{l=qg(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Ty(e,t){return e.eventCache.isCompleteForChild(t)}function xy(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function Iy(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Im(n)?r:new Gg(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=xy(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ey(e,c,new _m(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=xy(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ey(e,c,new _m(n),l,i,s,o,a)}}),c}class Ny{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new vg(n.getIndex()),i=(s=n).loadsAllData()?new vg(s.getIndex()):s.hasLimit()?new bg(s):new _g(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(cg.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(cg.EMPTY_NODE,a.getNode(),null),u=new Fg(l,o.isFullyInitialized(),r.filtersNodes()),h=new Fg(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ug(h,u),this.eventGenerator_=new Vg(this.query_)}get query(){return this.query_}}function Ay(e,t){const n=Wg(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Im(t)&&!n.getImmediateChild(wm(t)).isEmpty())?n.getChild(t):null}function Ry(e){return 0===e.eventRegistrations_.length}function Py(e,t,n){const r=[];if(n){Ut(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Dy(e,t,n,r){t.type===Pg.MERGE&&null!==t.source.queryId&&(Ut(Wg(e.viewCache_),"We should always have a full cache before handling merges"),Ut(Hg(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Sy(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Ut(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ut(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ut(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Oy(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Oy(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),zg(e,i,"child_removed",t,r,n),zg(e,i,"child_added",t,r,n),zg(e,i,"child_moved",s,r,n),zg(e,i,"child_changed",t,r,n),zg(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Ly,My;class jy{constructor(){this.views=new Map}}function Fy(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Ut(null!=s,"SyncTree gave us an op for an invalid query."),Dy(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Dy(s,t,n,r));return i}}function Vy(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=hy(n,i?r:null),s=!1;e?s=!0:r instanceof cg?(e=dy(n,r),s=!1):(e=cg.EMPTY_NODE,s=!1);const o=Ug(new Fg(e,s,!1),new Fg(r,i,!1));return new Ny(t,o)}return o}function zy(e,t,n,r,i,s){const o=Vy(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(tg,(e,t)=>{r.push(mg(e,t))});return n.isFullyInitialized()&&r.push(pg(n.getNode())),Oy(e,r,n.getNode(),t)}(o,n)}function Uy(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=Ky(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(Py(c,n,r)),Ry(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(Py(t,n,r)),Ry(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!Ky(e)&&s.push(new(Ut(Ly,"Reference.ts has not been loaded"),Ly)(t._repo,t._path)),{removed:s,events:o}}function qy(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function By(e,t){let n=null;for(const r of e.views.values())n=n||Ay(r,t);return n}function Hy(e,t){if(t._queryParams.loadsAllData())return Gy(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Wy(e,t){return null!=Hy(e,t)}function Ky(e){return null!=Gy(e)}function Gy(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Qy=1;class Yy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Gg(null),this.pendingWriteTree_={visibleWrites:Qg.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $y(e,t,n,r,i){return function(e,t,n,r,i){Ut(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Yg(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?rv(e,new Mg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Xy(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(oy(e.pendingWriteTree_,t)){let t=new Gg(null);return null!=r.snap?t=t.set(bm(),!0):qp(r.children,e=>{t=t.set(new _m(e),!0)}),rv(e,new Og(r.path,t,n))}return[]}function Jy(e,t,n){return rv(e,new Mg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Zy(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Wy(o,t))){const l=Uy(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>Ky(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Ky(t)){return[Gy(t)]}{let e=[];return t&&(e=qy(t)),qp(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=ov(e,r);e.listenProvider_.startListening(dv(i),av(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(dv(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(lv(t));e.listenProvider_.stopListening(dv(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=lv(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function ev(e,t,n,r){const i=cv(e,r);if(null!=i){const r=uv(i),s=r.path,o=r.queryId,a=Nm(s,t);return hv(e,s,new Mg(Dg(o),a,n))}return[]}function tv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=Nm(e,i);s=s||By(t,n),o=o||Ky(t)});let a,l=e.syncPointTree_.get(i);if(l?(o=o||Ky(l),s=s||By(l,bm())):(l=new jy,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=cg.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=By(t,bm());n&&(s=s.updateImmediateChild(e,n))})}const c=Wy(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=lv(t);Ut(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Qy++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=zy(l,t,n,sy(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=Hy(l,t);u=u.concat(function(e,t,n){const r=t._path,i=av(e,t),s=ov(e,n),o=e.listenProvider_.startListening(dv(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Ut(!Ky(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!Im(e)&&t&&Ky(t))return[Gy(t).query];{let e=[];return t&&(e=e.concat(qy(t).map(e=>e.query))),qp(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(dv(r),av(e,r))}}return o}(e,t,n))}return u}function nv(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=By(n,Nm(e,t));if(r)return r});return uy(r,t,i,n,!0)}function rv(e,t){return iv(t,e.syncPointTree_,null,sy(e.pendingWriteTree_,bm()))}function iv(e,t,n,r){if(Im(e.path))return sv(e,t,n,r);{const i=t.get(bm());null==n&&null!=i&&(n=By(i,bm()));let s=[];const o=wm(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=yy(r,o);s=s.concat(iv(a,l,e,t))}return i&&(s=s.concat(Fy(i,e,r,n))),s}}function sv(e,t,n,r){const i=t.get(bm());null==n&&null!=i&&(n=By(i,bm()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=yy(r,t),l=e.operationForChild(t);l&&(s=s.concat(sv(l,i,o,a)))}),i&&(s=s.concat(Fy(i,e,r,n))),s}function ov(e,t){const n=t.query,r=av(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||cg.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=cv(e,n);if(r){const n=uv(r),i=n.path,s=n.queryId,o=Nm(i,t);return hv(e,i,new Lg(Dg(s),o))}return[]}(e,n._path,r):function(e,t){return rv(e,new Lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Zy(e,n,null,r)}}}}function av(e,t){const n=lv(t);return e.queryToTagMap.get(n)}function lv(e){return e._path.toString()+"$"+e._queryIdentifier}function cv(e,t){return e.tagToQueryMap.get(t)}function uv(e){const t=e.indexOf("$");return Ut(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new _m(e.substr(0,t))}}function hv(e,t,n){const r=e.syncPointTree_.get(t);Ut(r,"Missing sync point for query tag that we're tracking");return Fy(r,n,sy(e.pendingWriteTree_,t),null)}function dv(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ut(My,"Reference.ts has not been loaded"),My)(e._repo,e._path):e}class fv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fv(t)}node(){return this.node_}}class pv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xm(this.path_,e);return new pv(this.syncTree_,t)}node(){return nv(this.syncTree_,this.path_)}}const mv=function(e,t,n){return e&&"object"===typeof e?(Ut(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?gv(e[".sv"],t,n):"object"===typeof e[".sv"]?yv(e[".sv"],t):void Ut(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},gv=function(e,t,n){if("timestamp"===e)return n.timestamp;Ut(!1,"Unexpected server value: "+e)},yv=function(e,t,n){e.hasOwnProperty("increment")||Ut(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Ut(!1,"Unexpected increment value: "+r);const i=t.node();if(Ut(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},vv=function(e,t,n,r){return bv(t,new pv(n,e),r)},_v=function(e,t,n){return bv(e,new fv(t),n)};function bv(e,t,n){const r=e.getPriority().val(),i=mv(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=mv(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new eg(s,hg(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new eg(i))),r.forEachChild(tg,(e,r)=>{const i=bv(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class wv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Sv(e,t){let n=t instanceof _m?t:new _m(t),r=e,i=wm(n);for(;null!==i;){const e=Cn(r.node.children,i)||{children:{},childCount:0};r=new wv(i,r,e),n=Cm(n),i=wm(n)}return r}function Cv(e){return e.node.value}function Ev(e,t){e.node.value=t,Nv(e)}function kv(e){return e.node.childCount>0}function Tv(e,t){qp(e.node.children,(n,r)=>{t(new wv(n,e,r))})}function xv(e,t,n,r){n&&!r&&t(e),Tv(e,e=>{xv(e,t,!0,r)}),n&&r&&t(e)}function Iv(e){return new _m(null===e.parent?e.name:Iv(e.parent)+"/"+e.name)}function Nv(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Cv(e)&&!kv(e)}(n),i=Sn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Nv(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Nv(e))}(e.parent,e.name,e)}const Av=/[\[\].#$\/\u0000-\u001F\u007F]/,Rv=/[\[\].#$\u0000-\u001F\u007F]/,Pv=10485760,Dv=function(e){return"string"===typeof e&&0!==e.length&&!Av.test(e)},Ov=function(e){return"string"===typeof e&&0!==e.length&&!Rv.test(e)},Lv=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Op(e)||e&&"object"===typeof e&&Sn(e,".sv")},Mv=function(e,t,n){const r=n instanceof _m?new Pm(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Om(r));if("function"===typeof t)throw new Error(e+"contains a function "+Om(r)+" with contents = "+t.toString());if(Op(t))throw new Error(e+"contains "+t.toString()+" "+Om(r));if("string"===typeof t&&t.length>Pv/3&&An(t)>Pv)throw new Error(e+"contains a string greater than "+Pv+" utf8 bytes "+Om(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(qp(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Dv(t)))throw new Error(e+" contains an invalid key ("+t+") "+Om(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=An(t),Dm(e)}(r,t),Mv(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=An(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+Om(r)+" in addition to actual children.")}},jv=function(e,t,n,r){if((!r||void 0!==n)&&!Ov(n))throw new Error(Nn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fv=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Dv(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ov(e)}(n))throw new Error(Nn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Vv{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zv(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Am(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Uv(e,t,n){zv(e,n),Bv(e,e=>Am(e,t))}function qv(e,t,n){zv(e,n),Bv(e,e=>Rm(e,t)||Rm(t,e))}function Bv(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Hv(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Hv(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Tp&&Np("event: "+n.toString()),Kp(r)}}}const Wv="repo_interrupt";class Kv{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xg(),this.transactionQueueTree_=new wv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Gv(e,t,n){if(e.stats_=am(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new kg(e.repoInfo_,(t,n,r,i)=>{$v(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Xv(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bn(n)}catch(q_){throw new Error("Invalid authOverride provided: "+q_)}}e.persistentConnection_=new jm(e.repoInfo_,t,(t,n,r,i)=>{$v(e,t,n,r,i)},t=>{Xv(e,t)},t=>{!function(e,t){qp(t,(t,n)=>{Jv(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return om[n]||(om[n]=t()),om[n]}(e.repoInfo_,()=>new Rg(e.stats_,e.server_)),e.infoData_=new Tg,e.infoSyncTree_=new Yy({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Jy(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),Jv(e,"connected",!1),e.serverSyncTree_=new Yy({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);qv(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Qv(e){const t=e.infoData_.getNode(new _m(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Yv(e){return(t=(t={timestamp:Qv(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function $v(e,t,n,r,i){e.dataUpdateCount++;const s=new _m(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=kn(n,e=>hg(e));o=function(e,t,n,r){const i=cv(e,r);if(i){const r=uv(i),s=r.path,o=r.queryId,a=Nm(s,t),l=Gg.fromObject(n);return hv(e,s,new jg(Dg(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=hg(n);o=ev(e.serverSyncTree_,s,t,i)}else if(r){const t=kn(n,e=>hg(e));o=function(e,t,n){const r=Gg.fromObject(n);return rv(e,new jg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=hg(n);o=Jy(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=s_(e,s)),qv(e.eventQueue_,a,o)}function Xv(e,t){Jv(e,"connected",t),!1===t&&function(e){n_(e,"onDisconnectEvents");const t=Yv(e),n=xg();Ng(e.onDisconnect_,bm(),(r,i)=>{const s=vv(r,i,e.serverSyncTree_,t);Ig(n,r,s)});let r=[];Ng(n,bm(),(t,n)=>{r=r.concat(Jy(e.serverSyncTree_,t,n));const i=u_(e,t);s_(e,i)}),e.onDisconnect_=xg(),qv(e.eventQueue_,bm(),r)}(e)}function Jv(e,t,n){const r=new _m("/.info/"+t),i=hg(n);e.infoData_.updateSnapshot(r,i);const s=Jy(e.infoSyncTree_,r,i);qv(e.eventQueue_,r,s)}function Zv(e){return e.nextWriteId_++}function e_(e,t,n){let r;r=".info"===wm(t._path)?Zy(e.infoSyncTree_,t,n):Zy(e.serverSyncTree_,t,n),Uv(e.eventQueue_,t._path,r)}function t_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Wv)}function n_(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Np(t,...r)}function r_(e,t,n){return nv(e.serverSyncTree_,t,n)||cg.EMPTY_NODE}function i_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||c_(e,t),Cv(t)){const n=a_(e,t);Ut(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=r_(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Ut(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Nm(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{n_(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Xy(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();c_(e,Sv(e.transactionQueueTree_,t)),i_(e,e.transactionQueueTree_),qv(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Kp(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Dp("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}s_(e,t)}},o)}(e,Iv(t),n)}else kv(t)&&Tv(t,t=>{i_(e,t)})}function s_(e,t){const n=o_(e,t),r=Iv(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=Nm(n,s.path);let c,u=!1;if(Ut(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(Xy(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(Xy(e.serverSyncTree_,s.currentWriteId,!0));else{const n=r_(e,s.path,o);s.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){Mv("transaction failed: Data returned ",r,s.path);let t=hg(r);"object"===typeof r&&null!=r&&Sn(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=Yv(e),c=_v(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Zv(e),o.splice(o.indexOf(a),1),i=i.concat($y(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Xy(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",i=i.concat(Xy(e.serverSyncTree_,s.currentWriteId,!0))}qv(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(c),!1,null))))}c_(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Kp(r[a]);i_(e,e.transactionQueueTree_)}(e,a_(e,n),r),r}function o_(e,t){let n,r=e.transactionQueueTree_;for(n=wm(t);null!==n&&void 0===Cv(r);)r=Sv(r,n),n=wm(t=Cm(t));return r}function a_(e,t){const n=[];return l_(e,t,n),n.sort((e,t)=>e.order-t.order),n}function l_(e,t,n){const r=Cv(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Tv(t,t=>{l_(e,t,n)})}function c_(e,t){const n=Cv(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ev(t,n.length>0?n:void 0)}Tv(t,t=>{c_(e,t)})}function u_(e,t){const n=Iv(o_(e,t)),r=Sv(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{h_(e,t)}),h_(e,r),xv(r,t=>{h_(e,t)}),n}function h_(e,t){const n=Cv(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ut(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ut(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Xy(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ev(t,void 0):n.length=s+1,qv(e.eventQueue_,Iv(t),i);for(let e=0;e<r.length;e++)Kp(r[e])}}const d_=function(e,t){const n=f_(e),r=n.namespace;"firebase.com"===n.domain&&Pp(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Pp("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dp("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new nm(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new _m(n.pathString)}},f_=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(q_){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Dp("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},p_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class m_{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bn(this.snapshot.exportVal())}}class g_{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class y_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ut(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class v_{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Im(this._path)?null:Em(this._path)}get ref(){return new w_(this._repo,this._path)}get _queryIdentifier(){const e=Eg(this._queryParams),t=zp(e);return"{}"===t?"default":t}get _queryObject(){return Eg(this._queryParams)}isEqual(e){if(!((e=Rn(e))instanceof v_))return!1;const t=this._repo===e._repo,n=Am(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function __(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function b_(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===qm){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Lp)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Mp)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===tg){if(null!=t&&!Lv(t)||null!=n&&!Lv(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ut(e.getIndex()instanceof dg||e.getIndex()===fg,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class w_ extends v_{constructor(e,t){super(e,t,new wg,!1)}get parent(){const e=Tm(this._path);return null===e?null:new w_(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class S_{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new _m(e),n=E_(this.ref,e);return new S_(this._node.getChild(t),n,tg)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new S_(n,E_(this.ref,t),tg)))}hasChild(e){const t=new _m(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function C_(e,t){return(e=Rn(e))._checkNotDeleted("ref"),void 0!==t?E_(e._root,t):e._root}function E_(e,t){var n,r,i,s;return null===wm((e=Rn(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),jv(n,r,i,s)):jv("child","path",t,!1),new w_(e._repo,xm(e._path,t))}class k_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new m_("value",this,new S_(e.snapshotNode,new w_(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new g_(this,e,t):null}matches(e){return e instanceof k_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class T_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new g_(this,e,t):null}createEvent(e,t){Ut(null!=e.childName,"Child events should have a childName.");const n=E_(new w_(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new m_(e.type,this,new S_(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof T_&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function x_(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{e_(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new y_(n,s||void 0),a="value"===t?new k_(o):new T_(t,o);return function(e,t,n){let r;r=".info"===wm(t._path)?tv(e.infoSyncTree_,t,n):tv(e.serverSyncTree_,t,n),Uv(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>e_(e._repo,e,a)}function I_(e,t,n,r){return x_(e,"value",t,n,r)}class N_{}class A_ extends N_{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new v_(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class R_ extends N_{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){__(e,"orderByChild");const t=new _m(this._path);if(Im(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new dg(t),r=Sg(e._queryParams,n);return b_(r),new v_(e._repo,e._path,r,!0)}}!function(e){Ut(!Ly,"__referenceConstructor has already been defined"),Ly=e}(w_),function(e){Ut(!My,"__referenceConstructor has already been defined"),My=e}(w_);const P_={};let D_=!1;function O_(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Pp("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Np("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=d_(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/hiragana-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=d_(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new $p($p.OWNER):new Yp(e.name,e.options,t);Fv("Invalid Firebase Database URL",l),Im(l.path)||Pp("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=P_[t.name];i||(i={},P_[t.name]=i);let s=i[e.toURLString()];s&&Pp("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Kv(e,D_,n,r),i[e.toURLString()]=s,s}(c,e,u,new Qp(e,n));return new L_(h,e)}class L_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Gv(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new w_(this._repo,bm())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=P_[t];n&&n[e.key]===e||Pp("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),t_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pp("Cannot call "+e+" on a deleted database.")}}function M_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr(),t=arguments.length>1?arguments[1]:void 0;const n=qr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=en("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Rn(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Tn(r,s.repoInfo_.emulatorOptions))return;Pp("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Pp('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new $p($p.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:on(r.mockUserToken,e.app.options.projectId);o=new $p(t)}rn(t)&&(sn(t),cn("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=rn(t.substring(0,i));e.repoInfo_=new nm(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}(n,...e)}return n}jm.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},jm.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){gp(Kr),Ur(new Pn("database",(e,t)=>{let{instanceIdentifier:n}=t;return O_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),Yr(fp,pp,e),Yr(fp,pp,"esm2020")}();const j_=function(){const[e,t]=(0,r.useState)("hiragana"),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{o(!0);const t=function(e){let t=Rn(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}(C_(M_(),"scores/".concat(e)),function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jv("orderByChild","path",e,!1),new R_(e)}("score"),function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new A_(e)}(10)),n=I_(t,t=>{const n=t.val(),r=[];if(n)Object.keys(n).forEach(e=>{r.push(n[e])}),r.sort((e,t)=>t.score-e.score);else{const t=[{username:"Note IT",score:150},{username:"Kenji",score:120},{username:"Sakura",score:95},{username:"Ryu",score:80},{username:"Momo",score:45}];"katakana"===e&&t.forEach(e=>e.score-=10),"vocab"===e&&t.forEach(e=>e.score+=20)}i([{username:"Sensei Note",score:2500},{username:"Ninja A",score:1850},{username:"Samurai B",score:1200},{username:"Student C",score:890},{username:"Guest",score:50}]),o(!1)});return()=>n()},[e]),(0,Mt.jsxs)("div",{className:"leaderboard-card",children:[(0,Mt.jsxs)("div",{className:"leaderboard-header",children:[(0,Mt.jsx)("h2",{children:"\ud83c\udfc6 Hall of Fame"}),(0,Mt.jsx)("p",{children:"\u0e2a\u0e38\u0e14\u0e22\u0e2d\u0e14\u0e1c\u0e39\u0e49\u0e1e\u0e34\u0e0a\u0e34\u0e15\u0e20\u0e32\u0e29\u0e32\u0e0d\u0e35\u0e48\u0e1b\u0e38\u0e48\u0e19"})]}),(0,Mt.jsxs)("div",{className:"leaderboard-tabs",children:[(0,Mt.jsx)("button",{className:"hiragana"===e?"active":"",onClick:()=>t("hiragana"),children:"Hiragana"}),(0,Mt.jsx)("button",{className:"katakana"===e?"active":"",onClick:()=>t("katakana"),children:"Katakana"}),(0,Mt.jsx)("button",{className:"vocab"===e?"active":"",onClick:()=>t("vocab"),children:"Vocab"})]}),(0,Mt.jsx)("div",{className:"ranking-list",children:s?(0,Mt.jsx)("p",{className:"loading-text",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14..."}):n.map((e,t)=>(0,Mt.jsxs)("div",{className:"rank-item rank-".concat(t+1),children:[(0,Mt.jsxs)("div",{className:"rank-number",children:[0===t&&"\ud83e\udd47",1===t&&"\ud83e\udd48",2===t&&"\ud83e\udd49",t>2&&"#".concat(t+1)]}),(0,Mt.jsx)("div",{className:"rank-info",children:(0,Mt.jsx)("span",{className:"rank-name",children:e.username})}),(0,Mt.jsxs)("div",{className:"rank-score",children:[e.score," ",(0,Mt.jsx)("small",{children:"XP"})]})]},t))})]})};const F_=function(e){let{onLogin:t}=e;const[n,i]=(0,r.useState)("");return(0,Mt.jsx)("div",{className:"app-container",style:{display:"flex",alignItems:"center",height:"100vh"},children:(0,Mt.jsxs)("div",{className:"game-card",style:{width:"100%",maxWidth:"400px"},children:[(0,Mt.jsx)("h1",{className:"jp-font",style:{fontSize:"3rem",marginBottom:"10px"},children:"\u65e5\u672c\u8a9e"}),(0,Mt.jsx)("h2",{style:{marginBottom:"30px"},children:"Japanese Master"}),(0,Mt.jsx)("p",{style:{color:"#7f8c8d",marginBottom:"20px"},children:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e43\u0e2a\u0e48\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e23\u0e34\u0e48\u0e21\u0e1c\u0e08\u0e0d\u0e20\u0e31\u0e22"}),(0,Mt.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&t(n.trim())},children:[(0,Mt.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"\u0e0a\u0e37\u0e48\u0e2d\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13 (\u0e40\u0e0a\u0e48\u0e19 NoteKung)",style:{width:"100%",padding:"15px",fontSize:"1.2rem",borderRadius:"12px",border:"2px solid #e2e8f0",marginBottom:"20px",textAlign:"center"},maxLength:15,required:!0}),(0,Mt.jsx)("button",{type:"submit",className:"start-btn",children:"\ud83d\ude80 \u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19"})]})]})})};function V_(){return(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsx)(j_,{}),(0,Mt.jsxs)("header",{className:"home-header",style:{marginTop:"20px"},children:[(0,Mt.jsxs)("h1",{children:["Japanese Master ",(0,Mt.jsx)("span",{className:"jp-font",children:"JP"})]}),(0,Mt.jsx)("p",{children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e1a\u0e17\u0e40\u0e23\u0e35\u0e22\u0e19\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e23\u0e34\u0e48\u0e21\u0e40\u0e01\u0e47\u0e1a\u0e04\u0e30\u0e41\u0e19\u0e19!"})]}),(0,Mt.jsxs)("div",{className:"menu-section",children:[(0,Mt.jsx)("h3",{children:"\ud83c\udfae \u0e41\u0e1a\u0e1a\u0e1d\u0e36\u0e01\u0e2b\u0e31\u0e14 (Games)"}),(0,Mt.jsx)(xt,{to:"/hiragana-game",className:"menu-btn",children:"\u0e1d\u0e36\u0e01\u0e2e\u0e34\u0e23\u0e32\u0e07\u0e32\u0e19\u0e30 (Hiragana)"}),(0,Mt.jsx)(xt,{to:"/katakana-game",className:"menu-btn",children:"\u0e1d\u0e36\u0e01\u0e04\u0e32\u0e15\u0e32\u0e04\u0e32\u0e19\u0e30 (Katakana)"}),(0,Mt.jsx)(xt,{to:"/vocabulary-game",className:"menu-btn",children:"\u0e17\u0e32\u0e22\u0e04\u0e33\u0e28\u0e31\u0e1e\u0e17\u0e4c (Vocabulary)"})]}),(0,Mt.jsxs)("div",{className:"menu-section",children:[(0,Mt.jsx)("h3",{children:"\ud83d\udcd6 \u0e15\u0e32\u0e23\u0e32\u0e07\u0e15\u0e31\u0e27\u0e2d\u0e31\u0e01\u0e29\u0e23 (Charts)"}),(0,Mt.jsx)(xt,{to:"/hiragana-chart",className:"menu-btn outline",children:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e2e\u0e34\u0e23\u0e32\u0e07\u0e32\u0e19\u0e30"}),(0,Mt.jsx)(xt,{to:"/katakana-chart",className:"menu-btn outline",children:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e04\u0e32\u0e15\u0e32\u0e04\u0e32\u0e19\u0e30"})]})]})}const z_=function(){const[e,t]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("username");e&&t(e)},[]);const n=e=>{localStorage.setItem("username",e),t(e)};return e?(0,Mt.jsx)(kt,{children:(0,Mt.jsxs)("div",{className:"app-container",children:[(0,Mt.jsxs)("nav",{style:{display:"flex",justifyContent:"space-between",padding:"10px 20px",background:"#f0f2f5",marginBottom:"20px"},children:[(0,Mt.jsx)("div",{children:(0,Mt.jsx)(xt,{to:"/",style:{textDecoration:"none",fontWeight:"bold",color:"#333"},children:"\ud83c\udfe0 \u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"})}),(0,Mt.jsxs)("div",{children:["\ud83d\udc64 ",e," | ",(0,Mt.jsx)("button",{onClick:()=>{localStorage.removeItem("username"),t(null)},style:{cursor:"pointer",border:"none",background:"none",color:"red"},children:"\u0e2d\u0e2d\u0e01"})]})]}),(0,Mt.jsxs)(Ke,{children:[(0,Mt.jsx)(He,{path:"/",element:(0,Mt.jsx)(V_,{})}),(0,Mt.jsx)(He,{path:"/hiragana-game",element:(0,Mt.jsx)(op,{username:e})}),(0,Mt.jsx)(He,{path:"/vocabulary-game",element:(0,Mt.jsx)(up,{username:e})}),(0,Mt.jsx)(He,{path:"/chart-hiragana",element:(0,Mt.jsx)(hp,{})})," // \u2705 \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35 //",(0,Mt.jsx)(He,{path:"/chart-katakana",element:(0,Mt.jsx)(dp,{})})," // \u2705 \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35 //",(0,Mt.jsx)(He,{path:"/katakana-game",element:(0,Mt.jsx)(lp,{username:e})})]})]})}):(0,Mt.jsx)(F_,{onLogin:n})},U_=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)})};s.createRoot(document.getElementById("root")).render((0,Mt.jsx)(r.StrictMode,{children:(0,Mt.jsx)(z_,{})})),U_()})();
//# sourceMappingURL=main.ec605ef9.js.map