/*! For license information please see main.7165f031.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,n){var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var x=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var I=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case _:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case k:return"SuspenseList";case x:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return R(e(t))}catch(wi){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},j=[],F=-1;function z(e){return{current:e}}function V(e){0>F||(e.current=j[F],j[F]=null,F--)}function U(e,t){F++,j[F]=e.current,e.current=t}var q,B,H=z(null),W=z(null),K=z(null),G=z(null);function Q(e,t){switch(U(K,t),U(W,e),U(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=_h(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(H),U(H,e)}function Y(){V(H),V(W),V(K)}function $(e){null!==e.memoizedState&&U(G,e);var t=H.current,n=_h(t,e.type);t!==n&&(U(W,e),U(H,n))}function X(e){W.current===e&&(V(H),V(W)),G.current===e&&(V(G),hd._currentValue=M)}function J(e){if(void 0===q)try{throw Error()}catch(wi){var t=wi.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||"",B=-1<wi.stack.indexOf("\n    at")?" (<anonymous>)":-1<wi.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+q+e+B}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(wi){var r=wi}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(wi){return"\nError generating stack: "+wi.message+"\n"+wi.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,oe=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function _e(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(we(e)/Se|0)|0},we=Math.log,Se=Math.LN2;var Ee=256,ke=262144,Ce=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=Te(r):0!==(o&=a)?i=Te(o):n||0!==(n=a&~e)&&(i=Te(n)):0!==(a=r&~s)?i=Te(a):0!==o?i=Te(o):n||0!==(n=r&~e)&&(i=Te(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function Ie(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Me(n))&(e.suspendedLanes|t))?0:n}function Me(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:xd(e.type)}function ze(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Ve=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Ve,qe="__reactProps$"+Ve,Be="__reactContainer$"+Ve,He="__reactEvents$"+Ve,We="__reactListeners$"+Ve,Ke="__reactHandles$"+Ve,Ge="__reactResources$"+Ve,Qe="__reactMarker$"+Ve;function Ye(e){delete e[Ue],delete e[qe],delete e[He],delete e[We],delete e[Ke]}function $e(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Be]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=jh(e);null!==e;){if(n=e[Ue])return n;e=jh(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[Ue]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},at={};function lt(e,t,n){if(i=t,re.call(at,i)||!re.call(ot,i)&&(st.test(i)?at[i]=!0:(ot[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ht(t)):null!=n?bt(e,o,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ht(a):e.removeAttribute("name")}function _t(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),ft(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Tt(e,s,t[s])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Dt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Mt=null;function jt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[qe]||null;if(!i)throw Error(o(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ft=!1;function zt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Lt||null!==Mt)&&(eu(),Lt&&(t=Lt,e=Mt,Mt=Lt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[qe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),qt=!1;if(Ut)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Jd){qt=!1}var Ht=null,Wt=null,Kt=null;function Gt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,i="value"in Ht?Ht.value:Ht.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Kt=i.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function $t(){return!1}function Xt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:$t,this.isPropagationStopped=$t,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Xt(tn),rn=f({},tn,{view:0,detail:0}),sn=Xt(rn),on=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),an=Xt(on),ln=Xt(f({},on,{dataTransfer:0})),cn=Xt(f({},rn,{relatedTarget:0})),un=Xt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Xt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Xt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Xt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_n=Xt(f({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Xt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=Xt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Xt(f({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Xt(f({},tn,{newState:0,oldState:0})),kn=[9,13,27,32],Cn=Ut&&"CompositionEvent"in window,Tn=null;Ut&&"documentMode"in document&&(Tn=document.documentMode);var xn=Ut&&"TextEvent"in window&&!Tn,In=Ut&&(!Cn||Tn&&8<Tn&&11>=Tn),Nn=String.fromCharCode(32),An=!1;function Pn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Mn(e,t,n,r){Lt?Mt?Mt.push(r):Mt=[r]:Lt=r,0<(t=ih(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,Fn=null;function zn(e){$u(e,0)}function Vn(e){if(pt(Je(e)))return e}function Un(e,t){if("change"===e)return t}var qn=!1;if(Ut){var Bn;if(Ut){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"===typeof Wn.oninput}Bn=Hn}else Bn=!1;qn=Bn&&(!document.documentMode||9<document.documentMode)}function Kn(){jn&&(jn.detachEvent("onpropertychange",Gn),Fn=jn=null)}function Gn(e){if("value"===e.propertyName&&Vn(Fn)){var t=[];Mn(t,Fn,e,Ot(e)),zt(zn,t)}}function Qn(e,t,n){"focusin"===e?(Kn(),Fn=n,(jn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Fn)}function $n(e,t){if("click"===e)return Vn(t)}function Xn(e,t){if("input"===e||"change"===e)return Vn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Jn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=Ut&&"documentMode"in document&&11>=document.documentMode,or=null,ar=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=ih(ar,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Ut&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),_r=mr("transitionrun"),br=mr("transitionstart"),wr=mr("transitioncancel"),Sr=mr("transitionend"),Er=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Er.set(e,t),rt(t,[e])}kr.push("scrollEnd");var Tr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},xr=[],Ir=0,Nr=0;function Ar(){for(var e=Ir,t=Nr=Ir=0;t<e;){var n=xr[t];xr[t++]=null;var r=xr[t];xr[t++]=null;var i=xr[t];xr[t++]=null;var s=xr[t];if(xr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Pr(e,t,n,r){xr[Ir++]=e,xr[Ir++]=t,xr[Ir++]=n,xr[Ir++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Pr(e,t,n,r),Lr(e)}function Dr(e,t){return Pr(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-be(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Lr(e){if(50<Wc)throw Wc=0,Kc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function jr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new jr(e,t,n,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)zr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case x:return(e=Fr(31,n,t,i)).elementType=x,e.lanes=s,e;case y:return Br(n.children,i,s,t);case v:a=8,i|=24;break;case _:return(e=Fr(12,n,t,2|i)).elementType=_,e.lanes=s,e;case E:return(e=Fr(13,n,t,i)).elementType=E,e.lanes=s,e;case k:return(e=Fr(19,n,t,i)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case b:a=9;break e;case S:a=11;break e;case C:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Br(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Gr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Gr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],$r=0,Xr=null,Jr=0,Zr=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Yr[$r++]=Jr,Yr[$r++]=Xr,Xr=e,Jr=t}function si(e,t,n){Zr[ei++]=ni,Zr[ei++]=ri,Zr[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-be(r)-1;r&=~(1<<i),n+=1;var s=32-be(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ni=1<<32-be(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function oi(e){null!==e.return&&(ii(e,1),si(e,1,0))}function ai(e){for(;e===Xr;)Xr=Yr[--$r],Yr[$r]=null,Jr=Yr[--$r],Yr[$r]=null;for(;e===ti;)ti=Zr[--ei],Zr[ei]=null,ri=Zr[--ei],Zr[ei]=null,ni=Zr[--ei],Zr[ei]=null}function li(e,t){Zr[ei++]=ni,Zr[ei++]=ri,Zr[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,hi=!1,di=null,fi=!1,pi=Error(o(519));function mi(e){throw Si(Qr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[qe]=r,n){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)Xu(Qu[n],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),_t(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),Et(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||uh(t.textContent,n)?(null!=r.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=r.onScroll&&Xu("scroll",t),null!=r.onScrollEnd&&Xu("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||mi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!hi)return yi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bh(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ui=Mh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ui=Mh(e)}else 27===n?(n=ui,xh(e.type)?(e=Lh,Lh=null,ui=e):ui=n):ui=ci?Oh(e.stateNode.nextSibling):null;return!0}function _i(){ui=ci=null,hi=!1}function bi(){var e=di;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),di=null),e}function Si(e){null===di?di=[e]:di.push(e)}var Ei=z(null),ki=null,Ci=null;function Ti(e,t,n){U(Ei,t._currentValue),t._currentValue=n}function xi(e){e._currentValue=Ei.current,V(Ei)}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ni(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ii(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Ii(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ai(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Jn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(hd):e=[hd])}i=i.return}null!==e&&Ni(t,e,n,r),t.flags|=262144}function Pi(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ri(e){ki=e,Ci=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Di(e){return Li(ki,e)}function Oi(e,t){return null===ki&&Ri(e),Li(e,t)}function Li(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ci){if(null===e)throw Error(o(308));Ci=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ci=Ci.next=t;return n}var Mi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ji=r.unstable_scheduleCallback,Fi=r.unstable_NormalPriority,zi={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vi(){return{controller:new Mi,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&ji(Fi,function(){e.controller.abort()})}var qi=null,Bi=0,Hi=0,Wi=null;function Ki(){if(0===--Bi&&null!==qi){null!==Wi&&(Wi.status="fulfilled");var e=qi;qi=null,Hi=0,Wi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gi=O.S;O.S=function(e,t){Oc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===qi){var n=qi=[];Bi=0,Hi=Bu(),Wi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bi++,t.then(Ki,Ki)}(0,t),null!==Gi&&Gi(e,t)};var Qi=z(null);function Yi(){var e=Qi.current;return null!==e?e:mc.pooledCache}function $i(e,t){U(Qi,null===t?Qi.current:t.pool)}function Xi(){var e=Yi();return null===e?null:{parent:zi._currentValue,pool:e}}var Ji=Error(o(460)),Zi=Error(o(474)),es=Error(o(542)),ts={then:function(){}};function ns(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw ss=t,Ji}}function is(e){try{return(0,e._init)(e._payload)}catch(wi){if(null!==wi&&"object"===typeof wi&&"function"===typeof wi.then)throw ss=wi,Ji;throw wi}}var ss=null;function os(){if(null===ss)throw Error(o(459));var e=ss;return ss=null,e}function as(e){if(e===Ji||e===es)throw Error(o(483))}var ls=null,cs=0;function us(e){var t=cs;return cs+=1,null===ls&&(ls=[]),rs(ls,e,t)}function hs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Vr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&is(s)===t.type)?(hs(t=i(t,n.props),n),t.return=e,t):(hs(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Br(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return hs(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case T:return d(e,t=is(t),n)}if(D(t)||A(t))return(t=Br(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,us(t),n);if(t.$$typeof===w)return d(e,Oi(e,t),n);ds(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=is(n),r)}if(D(n)||A(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,us(n),r);if(n.$$typeof===w)return f(e,t,Oi(e,n),r);ds(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,r=is(r),i)}if(D(r)||A(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,us(r),i);if(r.$$typeof===w)return p(e,t,n,Oi(t,r),i);ds(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===y){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===T&&is(_)===c.type){n(l,c.sibling),hs(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((h=Br(u.props.children,l.mode,h,u.key)).return=l,l=h):(hs(h=qr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Kr(u,l.mode,h)).return=l,l=h}return a(l);case T:return v(l,c,u=is(u),h)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),hi&&ii(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return hi&&ii(i,m),c}for(h=r(h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),hi&&ii(i,m),c}(l,c,u,h);if(A(u)){if("function"!==typeof(_=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),hi&&ii(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return hi&&ii(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),hi&&ii(i,g),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return v(l,c,us(u),h);if(u.$$typeof===w)return v(l,c,Oi(l,u),h);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=Hr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{cs=0;var i=v(e,t,n,r);return ls=null,i}catch(wi){if(wi===Ji||wi===es)throw wi;var s=Fr(29,wi,null,e.mode);return s.lanes=r,s.return=e,s}}}var ps=fs(!0),ms=fs(!1),gs=!1;function ys(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Pr(e,r,t,n),Lr(e)}function ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Ss(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Es=!1;function ks(){if(Es){if(null!==Wi)throw Wi}}function Cs(e,t,n,r){Es=!1;var i=e.updateQueue;gs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=-536870913&a.lane,p=d!==a.lane;if(p?(yc&d)===d:(r&d)===d){0!==d&&d===Hi&&(Es=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;d=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(y,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:gs=!0}}null!==(d=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[d]:p.push(d))}else p={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),Cc|=o,e.lanes=o,e.memoizedState=h}}function Ts(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function xs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ts(n[e],t)}var Is=z(null),Ns=z(0);function As(e,t){U(Ns,e=Ec),U(Is,t),Ec=e|t.baseLanes}function Ps(){U(Ns,Ec),U(Is,Is.current)}function Rs(){Ec=Ns.current,V(Is),V(Ns)}var Ds=z(null),Os=null;function Ls(e){var t=e.alternate;U(Vs,1&Vs.current),U(Ds,e),null===Os&&(null===t||null!==Is.current||null!==t.memoizedState)&&(Os=e)}function Ms(e){U(Vs,Vs.current),U(Ds,e),null===Os&&(Os=e)}function js(e){22===e.tag?(U(Vs,Vs.current),U(Ds,e),null===Os&&(Os=e)):Fs()}function Fs(){U(Vs,Vs.current),U(Ds,Ds.current)}function zs(e){V(Ds),Os===e&&(Os=null),V(Vs)}var Vs=z(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Rh(n)||Dh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qs=0,Bs=null,Hs=null,Ws=null,Ks=!1,Gs=!1,Qs=!1,Ys=0,$s=0,Xs=null,Js=0;function Zs(){throw Error(o(321))}function eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function to(e,t,n,r,i,s){return qs=s,Bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?ya:va,Qs=!1,s=n(r,i),Qs=!1,Gs&&(s=ro(t,n,r,i)),no(e),s}function no(e){O.H=ga;var t=null!==Hs&&null!==Hs.next;if(qs=0,Ws=Hs=Bs=null,Ks=!1,$s=0,Xs=null,t)throw Error(o(300));null===e||Oa||null!==(e=e.dependencies)&&Pi(e)&&(Oa=!0)}function ro(e,t,n,r){Bs=e;var i=0;do{if(Gs&&(Xs=null),$s=0,Gs=!1,25<=i)throw Error(o(301));if(i+=1,Ws=Hs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=_a,s=t(n,r)}while(Gs);return s}function io(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?uo(t):t,e=e.useState()[0],(null!==Hs?Hs.memoizedState:null)!==e&&(Bs.flags|=1024),t}function so(){var e=0!==Ys;return Ys=0,e}function oo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ao(e){if(Ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ks=!1}qs=0,Ws=Hs=Bs=null,Gs=!1,$s=Ys=0,Xs=null}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ws?Bs.memoizedState=Ws=e:Ws=Ws.next=e,Ws}function co(){if(null===Hs){var e=Bs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===Ws?Bs.memoizedState:Ws.next;if(null!==t)Ws=t,Hs=e;else{if(null===e){if(null===Bs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===Ws?Bs.memoizedState=Ws=e:Ws=Ws.next=e}return Ws}function uo(e){var t=$s;return $s+=1,null===Xs&&(Xs=[]),e=rs(Xs,e,t),t=Bs,null===(null===Ws?t.memoizedState:Ws.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?ya:va),e}function ho(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return uo(e);if(e.$$typeof===w)return Di(e)}throw Error(o(438,String(e)))}function fo(e){var t=null,n=Bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Bs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=I;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function mo(e){return go(co(),Hs,e)}function go(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(yc&d)===d:(qs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Hi&&(h=!0);else{if((qs&f)===f){u=u.next,f===Hi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,Bs.lanes|=f,Cc|=f}d=u.action,Qs&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,Bs.lanes|=d,Cc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Jn(s,e.memoizedState)&&(Oa=!0,h&&null!==(n=Wi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function yo(e){var t=co(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Jn(s,t.memoizedState)||(Oa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function vo(e,t,n){var r=Bs,i=co(),s=hi;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Jn((Hs||i).memoizedState,n);if(a&&(i.memoizedState=n,Oa=!0),i=i.queue,Bo(wo.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Ws&&1&Ws.memoizedState.tag){if(r.flags|=2048,Fo(9,{destroy:void 0},bo.bind(null,r,i,n,t),null),null===mc)throw Error(o(349));s||0!==(127&qs)||_o(r,t,n)}return n}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bo(e,t,n,r){t.value=n,t.getSnapshot=r,So(t)&&Eo(e)}function wo(e,t,n){return n(function(){So(t)&&Eo(e)})}function So(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(vm){return!0}}function Eo(e){var t=Dr(e,2);null!==t&&Yc(t,e,2)}function ko(e){var t=lo();if("function"===typeof e){var n=e;if(e=n(),Qs){_e(!0);try{n()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function Co(e,t,n,r){return e.baseState=n,go(e,Hs,"function"===typeof r?r:po)}function To(e,t,n,r,i){if(fa(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,xo(t,s)):(s.next=n.next,t.pending=n.next=s)}}function xo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),Io(e,t,a)}catch(vm){Ao(e,t,vm)}finally{null!==s&&null!==o.types&&(s.types=o.types),O.T=s}}else try{Io(e,t,s=n(i,r))}catch(c){Ao(e,t,c)}}function Io(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){No(e,t,n)},function(n){return Ao(e,t,n)}):No(e,t,n)}function No(e,t,n){t.status="fulfilled",t.value=n,Po(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,xo(e,n)))}function Ao(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Po(t),t=t.next}while(t!==r)}e.action=null}function Po(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ro(e,t){return t}function Do(e,t){if(hi){var n=mc.formState;if(null!==n){e:{var r=Bs;if(hi){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Oh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Oh(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=lo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:t},n.queue=r,n=ua.bind(null,Bs,r),r.dispatch=n,r=ko(!1),s=da.bind(null,Bs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=lo()).queue=i,n=To.bind(null,Bs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Oo(e){return Lo(co(),Hs,e)}function Lo(e,t,n){if(t=go(e,t,Ro)[0],e=mo(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=uo(t)}catch(wi){if(wi===Ji)throw es;throw wi}else r=t;var i=(t=co()).queue,s=i.dispatch;return n!==t.memoizedState&&(Bs.flags|=2048,Fo(9,{destroy:void 0},Mo.bind(null,i,n),null)),[r,s,e]}function Mo(e,t){e.action=t}function jo(e){var t=co(),n=Hs;if(null!==n)return Lo(t,n,e);co(),t=t.memoizedState;var r=(n=co()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Fo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return co().memoizedState}function Vo(e,t,n,r){var i=lo();Bs.flags|=e,i.memoizedState=Fo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Uo(e,t,n,r){var i=co();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Hs&&null!==r&&eo(r,Hs.memoizedState.deps)?i.memoizedState=Fo(t,s,n,r):(Bs.flags|=e,i.memoizedState=Fo(1|t,s,n,r))}function qo(e,t){Vo(8390656,8,e,t)}function Bo(e,t){Uo(2048,8,e,t)}function Ho(e){var t=co().memoizedState;return function(e){Bs.flags|=4;var t=Bs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Wo(e,t){return Uo(4,2,e,t)}function Ko(e,t){return Uo(4,4,e,t)}function Go(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Qo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=co();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=co();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&eo(t,r[1]))return r[0];if(r=e(),Qs){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[r,t],r}function Jo(e,t,n){return void 0===n||0!==(1073741824&qs)&&0===(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),Bs.lanes|=e,Cc|=e,n)}function Zo(e,t,n,r){return Jn(n,t)?n:null!==Is.current?(e=Jo(e,n,r),Jn(e,t)||(Oa=!0),e):0===(42&qs)||0!==(1073741824&qs)&&0===(261930&yc)?(Oa=!0,e.memoizedState=n):(e=Qc(),Bs.lanes|=e,Cc|=e,t)}function ea(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,da(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);ha(e,t,u,Gc())}else ha(e,t,r,Gc())}catch(vm){ha(e,t,{then:function(){},status:"rejected",reason:vm},Gc())}finally{L.p=s,null!==o&&null!==a.types&&(o.types=a.types),O.T=o}}function ta(){}function na(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=ra(e).queue;ea(e,i,t,M,null===n?ta:function(){return ia(e),n(r)})}function ra(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ia(e){var t=ra(e);null===t.next&&(t=e.alternate.memoizedState),ha(e,t.next.queue,{},Gc())}function sa(){return Di(hd)}function oa(){return co().memoizedState}function aa(){return co().memoizedState}function la(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=bs(t,e=_s(n),n);return null!==r&&(Yc(r,t,n),ws(r,t,n)),t={cache:Vi()},void(e.payload=t)}t=t.return}}function ca(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fa(e)?pa(t,n):null!==(n=Rr(e,t,n,r))&&(Yc(n,e,r),ma(n,t,r))}function ua(e,t,n){ha(e,t,n,Gc())}function ha(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fa(e))pa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o))return Pr(e,t,i,0),null===mc&&Ar(),!1}catch(vm){}if(null!==(n=Rr(e,t,i,r)))return Yc(n,e,r),ma(n,t,r),!0}return!1}function da(e,t,n,r){if(r={lane:2,revertLane:Bu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fa(e)){if(t)throw Error(o(479))}else null!==(t=Rr(e,n,r,2))&&Yc(t,e,2)}function fa(e){var t=e.alternate;return e===Bs||null!==t&&t===Bs}function pa(e,t){Gs=Ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ma(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var ga={readContext:Di,use:ho,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};ga.useEffectEvent=Zs;var ya={readContext:Di,use:ho,useCallback:function(e,t){return lo().memoizedState=[e,void 0===t?null:t],e},useContext:Di,useEffect:qo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){Vo(4,2,e,t)},useMemo:function(e,t){var n=lo();t=void 0===t?null:t;var r=e();if(Qs){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=lo();if(void 0!==n){var i=n(t);if(Qs){_e(!0);try{n(t)}finally{_e(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ca.bind(null,Bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},lo().memoizedState=e},useState:function(e){var t=(e=ko(e)).queue,n=ua.bind(null,Bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yo,useDeferredValue:function(e,t){return Jo(lo(),e,t)},useTransition:function(){var e=ko(!1);return e=ea.bind(null,Bs,e.queue,!0,!1),lo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Bs,i=lo();if(hi){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===mc)throw Error(o(349));0!==(127&yc)||_o(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qo(wo.bind(null,r,s,e),[e]),r.flags|=2048,Fo(9,{destroy:void 0},bo.bind(null,r,s,n,t),null),n},useId:function(){var e=lo(),t=mc.identifierPrefix;if(hi){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-be(ni)-1)).toString(32)+n),0<(n=Ys++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Js++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sa,useFormState:Do,useActionState:Do,useOptimistic:function(e){var t=lo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=da.bind(null,Bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:fo,useCacheRefresh:function(){return lo().memoizedState=la.bind(null,Bs)},useEffectEvent:function(e){var t=lo(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},va={readContext:Di,use:ho,useCallback:$o,useContext:Di,useEffect:Bo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:mo,useRef:zo,useState:function(){return mo(po)},useDebugValue:Yo,useDeferredValue:function(e,t){return Zo(co(),Hs.memoizedState,e,t)},useTransition:function(){var e=mo(po)[0],t=co().memoizedState;return["boolean"===typeof e?e:uo(e),t]},useSyncExternalStore:vo,useId:oa,useHostTransitionStatus:sa,useFormState:Oo,useActionState:Oo,useOptimistic:function(e,t){return Co(co(),0,e,t)},useMemoCache:fo,useCacheRefresh:aa};va.useEffectEvent=Ho;var _a={readContext:Di,use:ho,useCallback:$o,useContext:Di,useEffect:Bo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:yo,useRef:zo,useState:function(){return yo(po)},useDebugValue:Yo,useDeferredValue:function(e,t){var n=co();return null===Hs?Jo(n,e,t):Zo(n,Hs.memoizedState,e,t)},useTransition:function(){var e=yo(po)[0],t=co().memoizedState;return["boolean"===typeof e?e:uo(e),t]},useSyncExternalStore:vo,useId:oa,useHostTransitionStatus:sa,useFormState:jo,useActionState:jo,useOptimistic:function(e,t){var n=co();return null!==Hs?Co(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:fo,useCacheRefresh:aa};function ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}_a.useEffectEvent=Ho;var wa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=_s(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),ws(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=_s(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),ws(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=_s(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bs(e,r,n))&&(Yc(t,e,n),ws(t,e,n))}};function Sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(i,s))}function Ea(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function ka(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Ca(e){Tr(e)}function Ta(e){console.error(e)}function xa(e){Tr(e)}function Ia(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Na(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Aa(e,t,n){return(n=_s(n)).tag=3,n.payload={element:null},n.callback=function(){Ia(e,t)},n}function Pa(e){return(e=_s(e)).tag=3,e}function Ra(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Na(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Na(t,n,r),"function"!==typeof i&&(null===jc?jc=new Set([this]):jc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Da=Error(o(461)),Oa=!1;function La(e,t,n,r){t.child=null===e?ms(t,null,n,r):ps(t,e.child,n,r)}function Ma(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ri(t),r=to(e,t,n,o,s,i),a=so(),null===e||Oa?(hi&&a&&oi(t),t.flags|=1,La(e,t,r,i),t.child):(oo(e,t,i),sl(e,t,i))}function ja(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||zr(s)||void 0!==s.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fa(e,t,s,r,i))}if(s=e.child,!ol(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(o,r)&&e.ref===t.ref)return sl(e,t,i)}return t.flags|=1,(e=Vr(s,r)).ref=t.ref,e.return=t,t.child=e}function Fa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Zn(s,r)&&e.ref===t.ref){if(Oa=!1,t.pendingProps=r=s,!ol(e,i))return t.lanes=e.lanes,sl(e,t,i);0!==(131072&e.flags)&&(Oa=!0)}}return Wa(e,t,n,r,i)}function za(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Ua(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Ua(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$i(0,null!==s?s.cachePool:null),null!==s?As(t,s):Ps(),js(t)}else null!==s?($i(0,s.cachePool),As(t,s),Fs(),t.memoizedState=null):(null!==e&&$i(0,null),Ps(),Fs());return La(e,t,i,n),t.child}function Va(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ua(e,t,n,r,i){var s=Yi();return s=null===s?null:{parent:zi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&$i(0,null),Ps(),js(t),null!==e&&Ai(e,t,r,!0),t.childLanes=i,null}function qa(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ba(e,t,n){return ps(t,e.child,null,n),(e=qa(t,t.pendingProps)).flags|=2,zs(t),t.memoizedState=null,e}function Ha(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wa(e,t,n,r,i){return Ri(t),n=to(e,t,n,r,void 0,i),r=so(),null===e||Oa?(hi&&r&&oi(t),t.flags|=1,La(e,t,n,i),t.child):(oo(e,t,i),sl(e,t,i))}function Ka(e,t,n,r,i,s){return Ri(t),t.updateQueue=null,n=ro(t,r,n,i),no(e),r=so(),null===e||Oa?(hi&&r&&oi(t),t.flags|=1,La(e,t,n,s),t.child):(oo(e,t,s),sl(e,t,s))}function Ga(e,t,n,r,i){if(Ri(t),null===t.stateNode){var s=Mr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Di(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=wa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ys(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Di(o):Mr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ba(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&wa.enqueueReplaceState(s,s.state,null),Cs(t,r,s,i),ks(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ka(n,a);s.props=l;var c=s.context,u=n.contextType;o=Mr,"object"===typeof u&&null!==u&&(o=Di(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&Ea(t,s,r,o),gs=!1;var d=t.memoizedState;s.state=d,Cs(t,r,s,i),ks(),c=t.memoizedState,a||d!==c||gs?("function"===typeof h&&(ba(t,n,h,r),c=t.memoizedState),(l=gs||Sa(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,vs(e,t),u=ka(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Mr,"object"===typeof c&&null!==c&&(l=Di(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Ea(t,s,r,l),gs=!1,d=t.memoizedState,s.state=d,Cs(t,r,s,i),ks();var f=t.memoizedState;o!==h||d!==f||gs||null!==e&&null!==e.dependencies&&Pi(e.dependencies)?("function"===typeof a&&(ba(t,n,a,r),f=t.memoizedState),(u=gs||Sa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Pi(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ha(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ps(t,e.child,null,i),t.child=ps(t,null,n,i)):La(e,t,n,i),t.memoizedState=s.state,e=t.child):e=sl(e,t,i),e}function Qa(e,t,n,r){return _i(),t.flags|=256,La(e,t,n,r),t.child}var Ya={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $a(e){return{baseLanes:e,cachePool:Xi()}}function Xa(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ic),e}function Ja(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Vs.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hi){if(s?Ls(t):Fs(),(e=ui)?null!==(e=null!==(e=Ph(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Dh(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Fs(),l=el({mode:"hidden",children:l},s=t.mode),i=Br(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=$a(n),i.childLanes=Xa(e,r,n),t.memoizedState=Ya,Va(null,i)):(Ls(t),Za(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(a)256&t.flags?(Ls(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fs(),t.child=e.child,t.flags|=128,t=null):(Fs(),l=i.fallback,s=t.mode,i=el({mode:"visible",children:i.children},s),(l=Br(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,ps(t,e.child,null,n),(i=t.child).memoizedState=$a(n),i.childLanes=Xa(e,r,n),t.memoizedState=Ya,t=Va(null,i));else if(Ls(t),Dh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,Si({value:i,source:null,stack:null}),t=tl(e,t,n)}else if(Oa||Ai(e,t,n,!1),r=0!==(n&e.childLanes),Oa||r){if(null!==(r=mc)&&(0!==(i=Le(r,n))&&i!==c.retryLane))throw c.retryLane=i,Dr(e,i),Yc(r,e,i),Da;Rh(l)||au(),t=tl(e,t,n)}else Rh(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Oh(l.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=Za(t,i.children)).flags|=4096);return t}return s?(Fs(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Vr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Vr(u,l):(l=Br(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Va(null,i),i=t.child,null===(l=e.child.memoizedState)?l=$a(n):(null!==(s=l.cachePool)?(c=zi._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Xi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Xa(e,r,n),t.memoizedState=Ya,Va(e.child,i)):(Ls(t),e=(n=e.child).sibling,(n=Vr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Za(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return ps(t,e.child,null,n),(e=Za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function rl(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=s)}function il(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var o=Vs.current,a=0!==(2&o);if(a?(o=1&o|2,t.flags|=128):o&=1,U(Vs,o),La(e,t,r,n),r=hi?Jr:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rl(t,!0,n,null,s,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function sl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Cc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ai(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Vr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pi(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oa=!0;else{if(!ol(e,n)&&0===(128&t.flags))return Oa=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Ti(0,zi,e.memoizedState.cache),_i();break;case 27:case 5:$(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Ti(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ls(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ja(e,t,n):(Ls(t),null!==(e=sl(e,t,n))?e.sibling:null);Ls(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ai(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return il(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(Vs,Vs.current),r)break;return null;case 22:return t.lanes=0,za(e,t,n,t.pendingProps);case 24:Ti(0,zi,e.memoizedState.cache)}return sl(e,t,n)}(e,t,n);Oa=0!==(131072&e.flags)}else Oa=!1,hi&&0!==(1048576&t.flags)&&si(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=is(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===S){t.tag=11,t=Ma(null,t,e,r,n);break e}if(i===C){t.tag=14,t=ja(null,t,e,r,n);break e}}throw t=R(e)||e,Error(o(306,t,""))}zr(e)?(r=ka(e,r),t.tag=1,t=Ga(null,t,e,r,n)):(t.tag=0,t=Wa(null,t,e,r,n))}return t;case 0:return Wa(e,t,t.type,t.pendingProps,n);case 1:return Ga(e,t,r=t.type,i=ka(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,vs(e,t),Cs(t,r,null,n);var a=t.memoizedState;if(r=a.cache,Ti(0,zi,r),r!==s.cache&&Ni(t,[zi],n,!0),ks(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Qa(e,t,r,n);break e}if(r!==i){Si(i=Qr(Error(o(424)),t)),t=Qa(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Oh(e.firstChild),ci=t,hi=!0,di=null,fi=!0,n=ms(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_i(),r===i){t=sl(e,t,n);break e}La(e,t,r,n)}t=t.child}return t;case 26:return Ha(e,t),null===e?(n=Kh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=yh(K.current).createElement(n))[Ue]=t,r[qe]=e,fh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&hi&&(r=t.stateNode=Fh(t.type,t.pendingProps,K.current),ci=t,fi=!0,i=ui,xh(t.type)?(Lh=i,ui=Oh(r.firstChild)):ui=i),La(e,t,t.pendingProps.children,n),Ha(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Oh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Oh(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),$(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,bh(i,s)?r=null:null!==a&&bh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=to(e,t,io,null,null,n),hd._currentValue=i),Ha(e,t),La(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Oh(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Ja(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ps(t,null,r,n):La(e,t,r,n),t.child;case 11:return Ma(e,t,t.type,t.pendingProps,n);case 7:return La(e,t,t.pendingProps,n),t.child;case 8:case 12:return La(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ti(0,t.type,r.value),La(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ri(t),r=r(i=Di(i)),t.flags|=1,La(e,t,r,n),t.child;case 14:return ja(e,t,t.type,t.pendingProps,n);case 15:return Fa(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=qa(t,r),t.lanes=536870912,Va(null,e);if(Ms(t),(e=ui)?null!==(e=null!==(e=Ph(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return qa(t,r)}var s=e.memoizedState;if(null!==s){var a=s.dehydrated;if(Ms(t),i)if(256&t.flags)t.flags&=-257,t=Ba(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Oa||Ai(e,t,n,!1),i=0!==(n&e.childLanes),Oa||i){if(null!==(r=mc)&&0!==(a=Le(r,n))&&a!==s.retryLane)throw s.retryLane=a,Dr(e,a),Yc(r,e,a),Da;au(),t=Ba(e,t,n)}else e=s.treeContext,ui=Oh(a.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=qa(t,r)).flags|=4096;return t}return(e=Vr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return za(e,t,n,t.pendingProps);case 24:return Ri(t),r=Di(zi),null===e?(null===(i=Yi())&&(i=mc,s=Vi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ys(t),Ti(0,zi,i)):(0!==(e.lanes&n)&&(vs(e,t),Cs(t,null,null,n),ks()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ti(0,zi,r)):(r=s.cache,Ti(0,zi,r),r!==i.cache&&Ni(t,[zi],n,!0))),La(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw ss=ts,Zi;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sd(t)){if(!iu())throw ss=ts,Zi;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Nc|=t)}function dl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(ai(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xi(zi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,bi())),fl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ll(t),null!==s?(fl(t),ul(t,s)):(fl(t),cl(t,i,0,0,n))):s?s!==e.memoizedState?(ll(t),fl(t),ul(t,s)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,i,0,0,n)),null;case 27:if(X(t),n=K.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return fl(t),null}e=H.current,vi(t)?gi(t):(e=Fh(i,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if(X(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return fl(t),null}if(s=H.current,vi(t))gi(t);else{var a=yh(K.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=a.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?a.createElement(i,{is:r.is}):a.createElement(i)}}s[Ue]=t,s[qe]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)s.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(fh(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=K.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||uh(e.nodeValue,n)))||mi(t,!0)}else(e=yh(e).createTextNode(r))[Ue]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Ue]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(zs(t),t):(zs(t),null);if(0!==(128&t.flags))throw Error(o(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Ue]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),i=!1}else i=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(zs(t),t):(zs(t),null)}return zs(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&eh(t.stateNode.containerInfo),fl(t),null;case 10:return xi(t.type),fl(t),null;case 19:if(V(Vs),null===(r=t.memoizedState))return fl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)dl(r,!1);else{if(0!==kc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Us(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(Vs,1&Vs.current|2),hi&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Lc&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Us(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!hi)return fl(t),null}else 2*le()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Vs.current,U(Vs,i?1&n|2:1&n),hi&&ii(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return zs(t),Rs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&hl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xi(zi),fl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ml(e,t){switch(ai(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xi(zi),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(zs(t),null===t.alternate)throw Error(o(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Vs),null;case 4:return Y(),null;case 10:return xi(t.type),null;case 22:case 23:return zs(t),Rs(),null!==e&&V(Qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xi(zi),null;default:return null}}function gl(e,t){switch(ai(t),t.tag){case 3:xi(zi),Y();break;case 26:case 27:case 5:X(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&zs(t);break;case 13:zs(t);break;case 19:V(Vs);break;case 10:xi(t.type);break;case 22:case 23:zs(t),Rs(),null!==e&&V(Qi);break;case 24:xi(zi)}}function yl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(vm){ku(t,t.return,vm)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(vm){ku(i,l,vm)}}}r=r.next}while(r!==s)}}catch(vm){ku(t,t.return,vm)}}function _l(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{xs(t,n)}catch(vm){ku(e,e.return,vm)}}}function bl(e,t,n){n.props=ka(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(vm){ku(e,t,vm)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(vm){ku(e,t,vm)}}function Sl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(vm){ku(e,t,vm)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){ku(e,t,i)}else n.current=null}function El(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(vm){ku(e,e.return,vm)}}function kl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||hh(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&hh(e,t,f,p,r,d)}}return void vt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||hh(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&hh(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hh(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&hh(e,t,a,i,r,s)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else hh(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else hh(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&hh(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:hh(e,t,u,f,r,p)}return;default:if(It(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dh(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||dh(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&hh(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||hh(e,t,d,f,r,p)}(r,e.type,n,t),r[qe]=t}catch(vm){ku(e,e.return,vm)}}function Cl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&xh(e.type)||4===e.tag}function Tl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&xh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&xh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(xl(e,t,n),e=e.sibling;null!==e;)xl(e,t,n),e=e.sibling}function Il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&xh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Il(e,t,n),e=e.sibling;null!==e;)Il(e,t,n),e=e.sibling}function Nl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fh(t,r,n),t[Ue]=e,t[qe]=n}catch(vm){ku(e,e.return,vm)}}var Al=!1,Pl=!1,Rl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Ol=null;function Ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&yl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(vm){ku(n,n.return,vm)}else{var i=ka(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){ku(n,n.return,o)}}64&r&&_l(n),512&r&&wl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{xs(e,t)}catch(vm){ku(n,n.return,vm)}}break;case 27:null===t&&4&r&&Nl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&El(n),512&r&&wl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Ul(e,n);break;case 13:Yl(e,n),4&r&&ql(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Iu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||Pl,i=Al;var s=Pl;Al=r,(Pl=t)&&!s?Xl(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Al=i,Pl=s}break;case 30:break;default:Yl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jl=null,Fl=!1;function zl(e,t,n){for(n=n.child;null!==n;)Vl(e,t,n),n=n.sibling}function Vl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Pl||Sl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||Sl(n,t);var r=jl,i=Fl;xh(n.type)&&(jl=n.stateNode,Fl=!1),zl(e,t,n),zh(n.stateNode),jl=r,Fl=i;break;case 5:Pl||Sl(n,t);case 6:if(r=jl,i=Fl,jl=null,zl(e,t,n),Fl=i,null!==(jl=r))if(Fl)try{(9===jl.nodeType?jl.body:"HTML"===jl.nodeName?jl.ownerDocument.body:jl).removeChild(n.stateNode)}catch(vm){ku(n,t,vm)}else try{jl.removeChild(n.stateNode)}catch(vm){ku(n,t,vm)}break;case 18:null!==jl&&(Fl?(Ih(9===(e=jl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wd(e)):Ih(jl,n.stateNode));break;case 4:r=jl,i=Fl,jl=n.stateNode.containerInfo,Fl=!0,zl(e,t,n),jl=r,Fl=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),Pl||vl(4,n,t),zl(e,t,n);break;case 1:Pl||(Sl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Pl=(r=Pl)||null!==n.memoizedState,zl(e,t,n),Pl=r;break;default:zl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wd(e)}catch(vm){ku(t,t.return,vm)}}}function ql(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wd(e)}catch(vm){ku(t,t.return,vm)}}function Bl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Nu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(xh(l.type)){jl=l.stateNode,Fl=!1;break e}break;case 5:jl=l.stateNode,Fl=!1;break e;case 3:case 4:jl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===jl)throw Error(o(160));Vl(s,a,i),jl=null,Fl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Gl(e),4&r&&(vl(3,e,e.return),yl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Gl(e),512&r&&(Pl||null===n||Sl(n,n.return)),64&r&&Al&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Wl;if(Hl(t,e),Gl(e),512&r&&(Pl||null===n||Sl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Qe]||s[Ue]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),fh(s,r,n),s[Ue]=e,et(s),r=s;break e;case"link":var a=rd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}fh(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=rd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}fh(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Ue]=e,et(s),r=s}e.stateNode=r}else id(i,e.type,e.stateNode);else e.stateNode=Jh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?id(i,e.type,e.stateNode):Jh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&kl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Gl(e),512&r&&(Pl||null===n||Sl(n,n.return)),null!==n&&4&r&&kl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Gl(e),512&r&&(Pl||null===n||Sl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(vm){ku(e,e.return,vm)}}4&r&&null!=e.stateNode&&kl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Rl=!0);break;case 6:if(Hl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(vm){ku(e,e.return,vm)}}break;case 3:if(nd=null,i=Wl,Wl=qh(t.containerInfo),Hl(t,e),Wl=i,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(vm){ku(e,e.return,vm)}Rl&&(Rl=!1,Ql(e));break;case 4:r=Wl,Wl=qh(e.stateNode.containerInfo),Hl(t,e),Gl(e),Wl=r;break;case 12:default:Hl(t,e),Gl(e);break;case 31:case 19:Hl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bl(e,r)));break;case 13:Hl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Al,h=Pl;if(Al=u||i,Pl=h||c,Hl(t,e),Pl=h,Al=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Al||Pl||$l(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(vm){ku(c,c.return,vm)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(vm){ku(c,c.return,vm)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Nh(p,!0):Nh(c.stateNode,!1)}catch(vm){ku(c,c.return,vm)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Bl(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Cl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;Il(e,Tl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),Il(e,Tl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;xl(e,Tl(e),a);break;default:throw Error(o(161))}}catch(vm){ku(e,e.return,vm)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function $l(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),$l(t);break;case 1:Sl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),$l(t);break;case 27:zh(t.stateNode);case 26:case 5:Sl(t,t.return),$l(t);break;case 22:null===t.memoizedState&&$l(t);break;default:$l(t)}e=e.sibling}}function Xl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Xl(i,s,n),yl(4,s);break;case 1:if(Xl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(vm){ku(r,r.return,vm)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ts(l[i],a)}catch(vm){ku(r,r.return,vm)}}n&&64&o&&_l(s),wl(s,s.return);break;case 27:Nl(s);case 26:case 5:Xl(i,s,n),n&&null===r&&4&o&&El(s),wl(s,s.return);break;case 12:Xl(i,s,n);break;case 31:Xl(i,s,n),n&&4&o&&Ul(i,s);break;case 13:Xl(i,s,n),n&&4&o&&ql(i,s);break;case 22:null===s.memoizedState&&Xl(i,s,n),wl(s,s.return);break;case 30:break;default:Xl(i,s,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&i&&yl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){ec(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(vm){ku(t,t.return,vm)}}else ec(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ec(e,t,n,r):rc(e,t):2&s._visibility?ec(e,t,n,r):(s._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Jl(o,t);break;case 24:ec(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function nc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:nc(s,o,a,l,i),yl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?nc(s,o,a,l,i):rc(s,o):(u._visibility|=2,nc(s,o,a,l,i)),i&&2048&c&&Jl(o.alternate,o);break;case 24:nc(s,o,a,l,i),i&&2048&c&&Zl(o.alternate,o);break;default:nc(s,o,a,l,i)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:rc(n,r),2048&i&&Jl(r.alternate,r);break;case 24:rc(n,r),2048&i&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var ic=8192;function sc(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)oc(e,t,n),e=e.sibling}function oc(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Gh(r.href),s=t.querySelector(Qh(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ad.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Yh(r),(i=Vh.get(i))&&ed(r,i),et(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fh(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ad.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var r=Wl;Wl=qh(e.stateNode.containerInfo),sc(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ic,ic=16777216,sc(e,t,n),ic=r):sc(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,hc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,hc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function hc(e,t){for(;null!==Ol;){var n=Ol;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ol=r;else e:for(n=e;null!==Ol;){var i=(r=Ol).sibling,s=r.return;if(Ml(r),r===n){Ol=null;break e}if(null!==i){i.return=s,Ol=i;break e}Ol=s}}}var dc={getCacheForType:function(e){var t=Di(zi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Di(zi).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,pc=0,mc=null,gc=null,yc=0,vc=0,_c=null,bc=!1,wc=!1,Sc=!1,Ec=0,kc=0,Cc=0,Tc=0,xc=0,Ic=0,Nc=0,Ac=null,Pc=null,Rc=!1,Dc=0,Oc=0,Lc=1/0,Mc=null,jc=null,Fc=0,zc=null,Vc=null,Uc=0,qc=0,Bc=null,Hc=null,Wc=0,Kc=null;function Gc(){return 0!==(2&pc)&&0!==yc?yc&-yc:null!==O.T?Bu():Fe()}function Qc(){if(0===Ic)if(0===(536870912&yc)||hi){var e=ke;0===(3932160&(ke<<=1))&&(ke=262144),Ic=e}else Ic=536870912;return null!==(e=Ds.current)&&(e.flags|=32),Ic}function Yc(e,t,n){(e!==mc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,yc,Ic,!1)),Re(e,n),0!==(2&pc)&&e===mc||(e===mc&&(0===(2&pc)&&(Tc|=n),4===kc&&Zc(e,yc,Ic,!1)),Mu(e))}function $c(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ie(e,t),i=r?function(e,t){var n=pc;pc|=2;var r=su(),i=ou();mc!==e||yc!==t?(Mc=null,Lc=le()+500,nu(e,t)):wc=Ie(e,t);e:for(;;)try{if(0!==vc&&null!==gc){t=gc;var s=_c;t:switch(vc){case 1:vc=0,_c=null,fu(e,t,s,1);break;case 2:case 9:if(ns(s)){vc=0,_c=null,du(t);break}t=function(){2!==vc&&9!==vc||mc!==e||(vc=7),Mu(e)},s.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ns(s)?(vc=0,_c=null,du(t)):(vc=0,_c=null,fu(e,t,s,7));break;case 5:var a=null;switch(gc.tag){case 26:a=gc.memoizedState;case 5:case 27:var l=gc;if(a?sd(a):l.stateNode.complete){vc=0,_c=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}vc=0,_c=null,fu(e,t,s,5);break;case 6:vc=0,_c=null,fu(e,t,s,6);break;case 8:tu(),kc=6;break e;default:throw Error(o(462))}}uu();break}catch(h){ru(e,h)}return Ci=ki=null,O.H=r,O.A=i,pc=n,null!==gc?0:(mc=null,yc=0,Ar(),kc)}(e,t):lu(e,t,!0),s=r;;){if(0===i){wc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Jc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=Ac;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,a).flags|=256),2!==(a=lu(l,a,!1))){if(Sc&&!c){l.errorRecoveryDisabledLanes|=s,Tc|=s,i=4;break e}s=Pc,Pc=i,null!==s&&(null===Pc?Pc=s:Pc.push.apply(Pc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Ic,!bc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Dc+300-le())){if(Zc(r,t,Ic,!bc),0!==xe(r,0,!0))break e;Uc=t,r.timeoutHandle=Sh(Xc.bind(null,r,n,Pc,Mc,Rc,t,Ic,Tc,Nc,bc,s,"Throttled",-0,0),i)}else Xc(r,n,Pc,Mc,Rc,t,Ic,Tc,Nc,bc,s,null,-0,0)}break}i=lu(e,t,!1),s=!1}Mu(e)}function Xc(e,t,n,r,i,s,o,a,l,c,u,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){oc(t,s,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&s)===s?Dc-le():(4194048&s)===s?Oc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&cd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===od&&(od=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,o=i.initiatorType,a=i.duration;if(s&&a&&ph(o)){for(o=0,a=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>a)break;var u=l.transferSize,h=l.initiatorType;u&&ph(h)&&(o+=u*((l=l.responseEnd)<a?1:(a-c)/(l-c)))}if(--r,t+=8*(s+o)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(h,p),null!==p)return Uc=s,e.cancelPendingCommit=p(gu.bind(null,e,t,s,n,r,i,o,a,l,u,h,null,d,f)),void Zc(e,s,o,!c)}gu(e,t,s,n,r,i,o,a,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch(vm){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~xc,t&=~Tc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-be(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&De(e,n,t)}function eu(){return 0!==(6&pc)||(ju(0,!1),!1)}function tu(){if(null!==gc){if(0===vc)var e=gc.return;else Ci=ki=null,ao(e=gc),ls=null,cs=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Eh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,tu(),mc=e,gc=n=Vr(e.current,null),yc=t,vc=0,_c=null,bc=!1,wc=Ie(e,t),Sc=!1,Nc=Ic=xc=Tc=Cc=kc=0,Pc=Ac=null,Rc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),s=1<<i;t|=e[i],r&=~s}return Ec=t,Ar(),n}function ru(e,t){Bs=null,O.H=ga,t===Ji||t===es?(t=os(),vc=3):t===Zi?(t=os(),vc=4):vc=t===Da?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,_c=t,null===gc&&(kc=1,Ia(e,Qr(t,e.current)))}function iu(){var e=Ds.current;return null===e||((4194048&yc)===yc?null===Os:((62914560&yc)===yc||0!==(536870912&yc))&&e===Os)}function su(){var e=O.H;return O.H=ga,null===e?ga:e}function ou(){var e=O.A;return O.A=dc,e}function au(){kc=4,bc||(4194048&yc)!==yc&&null!==Ds.current||(wc=!0),0===(134217727&Cc)&&0===(134217727&Tc)||null===mc||Zc(mc,yc,Ic,!1)}function lu(e,t,n){var r=pc;pc|=2;var i=su(),s=ou();mc===e&&yc===t||(Mc=null,nu(e,t)),t=!1;var o=kc;e:for(;;)try{if(0!==vc&&null!==gc){var a=gc,l=_c;switch(vc){case 8:tu(),o=6;break e;case 3:case 2:case 9:case 6:null===Ds.current&&(t=!0);var c=vc;if(vc=0,_c=null,fu(e,a,l,c),n&&wc){o=0;break e}break;default:c=vc,vc=0,_c=null,fu(e,a,l,c)}}cu(),o=kc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Ci=ki=null,pc=r,O.H=i,O.A=s,null===gc&&(mc=null,yc=0,Ar()),o}function cu(){for(;null!==gc;)hu(gc)}function uu(){for(;null!==gc&&!oe();)hu(gc)}function hu(e){var t=al(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ka(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Ka(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:ao(t);default:gl(n,t),t=al(n,t=gc=Ur(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function fu(e,t,n,r){Ci=ki=null,ao(t),ls=null,cs=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ai(t,n,i,!0),null!==(n=Ds.current)){switch(n.tag){case 31:case 13:return null===Os?au():null===n.alternate&&0===kc&&(kc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===ts?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Cu(e,r,i)),!1;case 22:return n.flags|=65536,r===ts?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Cu(e,r,i)),!1}throw Error(o(435,n.tag))}return Cu(e,r,i),au(),!1}if(hi)return null!==(t=Ds.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&Si(Qr(e=Error(o(422),{cause:r}),n))):(r!==pi&&Si(Qr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Qr(r,n),Ss(e,i=Aa(e.stateNode,r,i)),4!==kc&&(kc=2)),!1;var s=Error(o(520),{cause:r});if(s=Qr(s,n),null===Ac?Ac=[s]:Ac.push(s),4!==kc&&(kc=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Ss(n,e=Aa(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===jc||!jc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ra(i=Pa(i),e,n,r),Ss(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,yc))return kc=1,Ia(e,Qr(n,e.current)),void(gc=null)}catch(vm){if(null!==i)throw gc=i,vm;return kc=1,Ia(e,Qr(n,e.current)),void(gc=null)}32768&t.flags?(hi||1===r?e=!0:wc||0!==(536870912&yc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ds.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,bc);e=t.return;var n=pl(t.alternate,t,Ec);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===kc&&(kc=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);kc=6,gc=null}function gu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Fc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-be(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Nr,a,l,c),e===mc&&(gc=mc=null,yc=0),Vc=t,zc=e,Uc=n,qc=s,Bc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(de,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,mh=bd,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:e,selectionRange:n},bd=!1,Ol=t;null!==Ol;)if(e=(t=Ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ol=e;else for(;null!==Ol;){switch(s=(t=Ol).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=ka(n.type,i);e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(vm){ku(n,n.return,vm)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ah(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ah(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Ol=e;break}Ol=t.return}}(e,t)}finally{pc=a,L.p=i,O.T=r}}Fc=1,yu(),vu(),_u()}}function yu(){if(1===Fc){Fc=0;var e=zc,t=Vc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=pc;pc|=4;try{Kl(t,e);var s=gh,o=rr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&nr(a.ownerDocument.documentElement,a)){if(null!==l&&ir(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=tr(a,m),v=tr(a,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var _=h.createRange();_.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(_),f.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),f.addRange(_))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}bd=!!mh,gh=mh=null}finally{pc=i,L.p=r,O.T=n}}e.current=t,Fc=2}}function vu(){if(2===Fc){Fc=0;var e=zc,t=Vc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=pc;pc|=4;try{Ll(e,t.alternate,t)}finally{pc=i,L.p=r,O.T=n}}Fc=3}}function _u(){if(4===Fc||3===Fc){Fc=0,ae();var e=zc,t=Vc,n=Uc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Vc=zc=null,bu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(jc=null),je(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&Uc)&&wu(),Mu(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,ju(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function wu(){return yu(),vu(),_u(),Su()}function Su(){if(5!==Fc)return!1;var e=zc,t=qc;qc=0;var n=je(Uc),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Bc,Bc=null;var s=zc,a=Uc;if(Fc=0,Vc=zc=null,Uc=0,0!==(6&pc))throw Error(o(331));var l=pc;if(pc|=4,cc(s.current),tc(s,s.current,a,n),pc=l,ju(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{L.p=i,O.T=r,bu(e,t)}}function Eu(e,t,n){t=Qr(n,t),null!==(e=bs(e,t=Aa(e.stateNode,t,2),2))&&(Re(e,2),Mu(e))}function ku(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===jc||!jc.has(r))){e=Qr(n,e),null!==(r=bs(t,n=Pa(2),2))&&(Ra(n,r,t,e),Re(r,2),Mu(r));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Sc=!0,i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(yc&n)===n&&(4===kc||3===kc&&(62914560&yc)===yc&&300>le()-Dc?0===(2&pc)&&nu(e,0):xc|=n,Nc===yc&&(Nc=0)),Mu(e)}function xu(e,t){0===t&&(t=Ae()),null!==(e=Dr(e,t))&&(Re(e,t),Mu(e))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),xu(e,n)}var Au=null,Pu=null,Ru=!1,Du=!1,Ou=!1,Lu=0;function Mu(e){e!==Pu&&null===e.next&&(null===Pu?Au=Pu=e:Pu=Pu.next=e),Du=!0,Ru||(Ru=!0,Ch(function(){0!==(6&pc)?ie(ue,Fu):zu()}))}function ju(e,t){if(!Ou&&Du){Ou=!0;do{for(var n=!1,r=Au;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,qu(r,s))}else s=yc,0===(3&(s=xe(r,r===mc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ie(r,s)||(n=!0,qu(r,s));r=r.next}}while(n);Ou=!1}}function Fu(){zu()}function zu(){Du=Ru=!1;var e=0;0!==Lu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wh&&(wh=e,!0);return wh=null,!1}()&&(e=Lu);for(var t=le(),n=null,r=Au;null!==r;){var i=r.next,s=Vu(r,t);0===s?(r.next=null,null===n?Au=i:n.next=i,null===i&&(Pu=n)):(n=r,(0!==e||0!==(3&s))&&(Du=!0)),r=i}0!==Fc&&5!==Fc||ju(e,!1),0!==Lu&&(Lu=0)}function Vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-be(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Ne(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=yc,n=xe(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ie(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),je(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=Uu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=yc;return 0===(r=xe(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:($c(e,r,t),Vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function qu(e,t){if(wu())return null;$c(e,t,!0)}function Bu(){if(0===Lu){var e=Hi;0===e&&(e=Ee,0===(261888&(Ee<<=1))&&(Ee=256)),Lu=e}return Lu}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<kr.length;Ku++){var Gu=kr[Ku];Cr(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Cr(gr,"onAnimationEnd"),Cr(yr,"onAnimationIteration"),Cr(vr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(_r,"onTransitionRun"),Cr(br,"onTransitionStart"),Cr(wr,"onTransitionCancel"),Cr(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function $u(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(vm){Tr(vm)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(vm){Tr(vm)}i.currentTarget=null,s=l}}}}function Xu(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(th(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),th(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function eh(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ju("selectionchange",!1,t))}}function th(e,t,n,r){switch(xd(t)){case 2:var i=wd;break;case 8:i=Sd;break;default:i=Ed}n=i.bind(null,t,n,e),i=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nh(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=$e(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}zt(function(){var r=s,i=Ot(n),o=[];e:{var a=Er.get(e);if(void 0!==a){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gr:case yr:case vr:c=un;break;case Sr:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n;break;case"toggle":case"beforetoggle":c=En}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Vt(m,f))&&h.push(rh(m,g,p)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Be])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=an,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=_n,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?a:Je(c),p=null==u?a:Je(u),(a=new h(g,m+"leave",c,n,i)).target=d,a.relatedTarget=p,g=null,$e(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=sh,m=u,p=0,g=f=c;g;g=h(g))p++;g=0;for(var y=m;y;y=h(y))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==c&&oh(o,a,c,h,!1),null!==u&&null!==d&&oh(o,d,u,h,!0)}if("select"===(c=(a=r?Je(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=Un;else if(Ln(a))if(qn)v=Xn;else{v=Yn;var _=Qn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&It(r.elementType)&&(v=Un):v=$n;switch(v&&(v=v(e,r))?Mn(o,v,n,i):(_&&_(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&bt(a,"number",a.value)),_=r?Je(r):window,e){case"focusin":(Ln(_)||"true"===_.contentEditable)&&(or=_,ar=r,lr=null);break;case"focusout":lr=ar=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(o,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(o,n,i)}var b;if(Cn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Dn?Pn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(In&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Dn&&(b=Gt()):(Wt="value"in(Ht=i)?Ht.value:Ht.textContent,Dn=!0)),0<(_=ih(r,w)).length&&(w=new dn(w,e,null,n,i),o.push({event:w,listeners:_}),b?w.data=b:null!==(b=Rn(n))&&(w.data=b))),(b=xn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(An=!0,Nn);case"textInput":return(e=t.data)===Nn&&An?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Cn&&Pn(e,t)?(e=Gt(),Kt=Wt=Ht=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ih(r,"onBeforeInput")).length&&(_=new dn("onBeforeInput","beforeinput",null,n,i),o.push({event:_,listeners:w}),_.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Hu((i[qe]||null).action),o=r.submitter;o&&null!==(t=(t=o[qe]||null)?Hu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new nn("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=o?Wu(i,o):new FormData(i);na(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Wu(i,o):new FormData(i),na(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}$u(o,t)})}function rh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Vt(e,n))&&r.unshift(rh(e,i,s)),null!=(i=Vt(e,t))&&r.push(rh(e,i,s))),3===e.tag)return r;e=e.return}return[]}function sh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function oh(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Vt(n,s))&&o.unshift(rh(n,c,l)):i||null!=(c=Vt(n,s))&&o.push(rh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ah=/\r\n?/g,lh=/\u0000|\uFFFD/g;function ch(e){return("string"===typeof e?e:""+e).replace(ah,"\n").replace(lh,"")}function uh(e,t){return t=ch(t),ch(e)===t}function hh(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":xt(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&hh(e,t,"name",i.name,i,null),hh(e,t,"formEncType",i.formEncType,i,null),hh(e,t,"formMethod",i.formMethod,i,null),hh(e,t,"formTarget",i.formTarget,i,null)):(hh(e,t,"encType",i.encType,i,null),hh(e,t,"method",i.method,i,null),hh(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Nt.get(n)||n,r)}}function dh(e,t,n,r,i,s){switch(n){case"style":xt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[qe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function fh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:hh(e,t,r,a,n,null)}}return s&&hh(e,t,"srcSet",n.srcSet,n,null),void(i&&hh(e,t,"src",n.src,n,null));case"input":Xu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:hh(e,t,i,h,n,null)}}return void _t(e,r,l,c,u,a,s,!1);case"select":for(s in Xu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:hh(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Xu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:hh(e,t,a,l,n,null)}return void Et(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else hh(e,t,c,i,n,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(i=0;i<Qu.length;i++)Xu(Qu[i],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:hh(e,t,u,i,n,null)}return;default:if(It(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&dh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&hh(e,t,l,i,n,null))}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var mh=null,gh=null;function yh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _h(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wh=null;var Sh="function"===typeof setTimeout?setTimeout:void 0,Eh="function"===typeof clearTimeout?clearTimeout:void 0,kh="function"===typeof Promise?Promise:void 0,Ch="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof kh?function(e){return kh.resolve(null).then(e).catch(Th)}:Sh;function Th(e){setTimeout(function(){throw e})}function xh(e){return"head"===e}function Ih(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Wd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)zh(e.ownerDocument.documentElement);else if("head"===n){zh(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var o=s.nextSibling,a=s.nodeName;s[Qe]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}else"body"===n&&zh(e.ownerDocument.body);n=i}while(n);Wd(t)}function Nh(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ah(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ah(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ph(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Oh(e.nextSibling)))return null}return e}function Rh(e){return"$?"===e.data||"$~"===e.data}function Dh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Oh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Lh=null;function Mh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Oh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function jh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fh(e,t,n){switch(t=yh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function zh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Vh=new Map,Uh=new Set;function qh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bh=L.d;L.d={f:function(){var e=Bh.f(),t=eu();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?ia(t):Bh.r(e)},D:function(e){Bh.D(e),Wh("dns-prefetch",e,null)},C:function(e,t){Bh.C(e,t),Wh("preconnect",e,t)},L:function(e,t,n){Bh.L(e,t,n);var r=Hh;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=Gh(e);break;case"script":s=$h(e)}Vh.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Vh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Qh(s))||"script"===t&&r.querySelector(Xh(s))||(fh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Bh.m(e,t);var n=Hh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=$h(e)}if(!Vh.has(s)&&(e=f({rel:"modulepreload",href:e},t),Vh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xh(s)))return}fh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Bh.X(e,t);var n=Hh;if(n&&e){var r=Ze(n).hoistableScripts,i=$h(e),s=r.get(i);s||((s=n.querySelector(Xh(i)))||(e=f({src:e,async:!0},t),(t=Vh.get(i))&&td(e,t),et(s=n.createElement("script")),fh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Bh.S(e,t,n);var r=Hh;if(r&&e){var i=Ze(r).hoistableStyles,s=Gh(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Qh(s)))a.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vh.get(s))&&ed(e,n);var l=o=r.createElement("link");et(l),fh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Zh(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Bh.M(e,t);var n=Hh;if(n&&e){var r=Ze(n).hoistableScripts,i=$h(e),s=r.get(i);s||((s=n.querySelector(Xh(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Vh.get(i))&&td(e,t),et(s=n.createElement("script")),fh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Hh="undefined"===typeof document?null:document;function Wh(e,t,n){var r=Hh;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Uh.has(i)||(Uh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(fh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kh(e,t,n,r){var i,s,a,l,c=(c=K.current)?qh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gh(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gh(n.href);var u=Ze(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Vh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vh.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),fh(s,"link",a),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=$h(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Gh(e){return'href="'+yt(e)+'"'}function Qh(e){return'link[rel="stylesheet"]['+e+"]"}function Yh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function $h(e){return'[src="'+yt(e)+'"]'}function Xh(e){return"script[async]"+e}function Jh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fh(r,"style",i),Zh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Gh(n.href);var s=e.querySelector(Qh(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Yh(n),(i=Vh.get(i))&&ed(r,i),et(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fh(s,"link",r),t.state.loading|=4,Zh(s,n.precedence,e),t.instance=s;case"script":return s=$h(n.src),(i=e.querySelector(Xh(s)))?(t.instance=i,et(i),i):(r=n,(i=Vh.get(s))&&td(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),fh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zh(r,n.precedence,e));return t.instance}function Zh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function td(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nd=null;function rd(e,t,n){if(null===nd){var r=new Map,i=nd=new Map;i.set(n,r)}else(r=(i=nd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Qe]||s[Ue]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var od=0;function ad(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ld=null;function cd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ld=new Map,t.forEach(ud,e),ld=null,ad.call(e))}function ud(e,t){if(!(4&t.state.loading)){var n=ld.get(e);if(n)var r=n.get(null);else{n=new Map,ld.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var hd={$$typeof:w,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function dd(e,t,n,r,i,s,o,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fd(e,t,n,r,i,s,o,a,l,c,u,h){return e=new dd(e,t,n,o,l,c,u,h,a),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=Vi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ys(s),e}function pd(e){return e?e=Mr:Mr}function md(e,t,n,r,i,s){i=pd(i),null===r.context?r.context=i:r.pendingContext=i,(r=_s(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(Yc(n,0,t),ws(n,e,t))}function gd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yd(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Yc(t,0,67108864),yd(e,67108864)}}function _d(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Dr(e,t=Me(t));null!==n&&Yc(n,0,t),yd(e,t)}}var bd=!0;function wd(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,Ed(e,t,n,r)}finally{L.p=s,O.T=i}}function Sd(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,Ed(e,t,n,r)}finally{L.p=s,O.T=i}}function Ed(e,t,n,r){if(bd){var i=kd(r);if(null===i)nh(e,t,r,Cd,n),Md(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nd=jd(Nd,e,t,n,r,i),!0;case"dragenter":return Ad=jd(Ad,e,t,n,r,i),!0;case"mouseover":return Pd=jd(Pd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rd.set(s,jd(Rd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dd.set(s,jd(Dd.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Md(e,r),4&t&&-1<Ld.indexOf(e)){for(;null!==i;){var s=Xe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=Te(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-be(o);a.entanglements[1]|=l,o&=~l}Mu(s),0===(6&pc)&&(Lc=le()+500,ju(0,!1))}}break;case 31:case 13:null!==(a=Dr(s,2))&&Yc(a,0,2),eu(),yd(s,2)}if(null===(s=kd(r))&&nh(e,t,r,Cd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else nh(e,t,r,null,n)}}function kd(e){return Td(e=Ot(e))}var Cd=null;function Td(e){if(Cd=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Cd=e,null}function xd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Id=!1,Nd=null,Ad=null,Pd=null,Rd=new Map,Dd=new Map,Od=[],Ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Md(e,t){switch(e){case"focusin":case"focusout":Nd=null;break;case"dragenter":case"dragleave":Ad=null;break;case"mouseover":case"mouseout":Pd=null;break;case"pointerover":case"pointerout":Rd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(t.pointerId)}}function jd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Xe(t))&&vd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Fd(e){var t=$e(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void ze(e.priority,function(){_d(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void ze(e.priority,function(){_d(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=kd(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&vd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Vd(e,t,n){zd(e)&&n.delete(t)}function Ud(){Id=!1,null!==Nd&&zd(Nd)&&(Nd=null),null!==Ad&&zd(Ad)&&(Ad=null),null!==Pd&&zd(Pd)&&(Pd=null),Rd.forEach(Vd),Dd.forEach(Vd)}function qd(e,t){e.blockedOn===t&&(e.blockedOn=null,Id||(Id=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ud)))}var Bd=null;function Hd(e){Bd!==e&&(Bd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bd===e&&(Bd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Td(r||n))continue;break}var s=Xe(n);null!==s&&(e.splice(t,3),t-=3,na(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Wd(e){function t(t){return qd(t,e)}null!==Nd&&qd(Nd,e),null!==Ad&&qd(Ad,e),null!==Pd&&qd(Pd,e),Rd.forEach(t),Dd.forEach(t);for(var n=0;n<Od.length;n++){var r=Od[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Od.length&&null===(n=Od[0]).blockedOn;)Fd(n),null===n.blockedOn&&Od.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[qe]||null;if("function"===typeof s)o||Hd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[qe]||null)a=o.formAction;else if(null!==Td(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Hd(n)}}}function Kd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Gd(e){this._internalRoot=e}function Qd(e){this._internalRoot=e}Qd.prototype.render=Gd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));md(t.current,Gc(),e,t,null,null)},Qd.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;md(e.current,2,null,e,null,null),eu(),t[Be]=null}},Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Od.length&&0!==t&&t<Od[n].priority;n++);Od.splice(n,0,e),0===n&&Fd(e)}};var Yd=i.version;if("19.2.3"!==Yd)throw Error(o(527,Yd,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return h(i),e;if(s===r)return h(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var $d={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{ye=Xd.inject($d),ve=Xd}catch(Zd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=Ca,s=Ta,l=xa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fd(e,1,!1,null,0,n,r,null,i,s,l,Kd),e[Be]=t.current,eh(e),new Gd(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=Ca,l=Ta,c=xa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fd(e,1,!0,t,0,r,i,u,s,l,c,Kd)).context=pd(null),n=t.current,(i=_s(r=Me(r=Gc()))).callback=null,bs(n,i,r),n=r,t.current.lanes=n,Re(t,n),Mu(t),e[Be]=t.current,eh(e),new Qd(t)},t.version="19.2.3"},43(e,t,n){e.exports=n(288)},288(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var w=b.prototype=new _;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray;function E(){}var k={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function T(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return A((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+N(e,0):s,S(o)?(i="",null!=u&&(i=u.replace(I,"$&/")+"/"),A(o,t,i,"",function(e){return e})):null!=o&&(x(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+u,o=T(l.type,c,l.props)),t.push(o)),1;u=0;var h,f=""===s?".":s+":";if(S(e))for(var m=0;m<e.length;m++)u+=A(s=e[m],t,i,a=f+N(s,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,a=f+N(s,m++),o);else if("object"===a){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!C.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return T(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return T(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(E,D)}catch(vm){D(vm)}finally{null!==t&&null!==n.types&&(t.types=n.types),k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useEffectEvent=function(e){return k.H.useEffectEvent(e)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.2.3"},391(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579(e,t,n){e.exports=n(799)},672(e,t,n){var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},799(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853(e,t,n){e.exports=n(896)},896(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,k||(k=!0,E());else{var t=r(u);null!==t&&R(S,t.startTime-e)}}var E,k=!1,C=-1,T=5,x=-1;function I(){return!!y||!(t.unstable_now()-x<T)}function N(){if(y=!1,k){var e=t.unstable_now();x=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(C),C=-1),p=!0;var s=f;try{t:{for(w(e),d=r(c);null!==d&&!(d.expirationTime>e&&I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===r(c)&&i(c),w(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&R(S,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?E():k=!1}}}if("function"===typeof b)E=function(){b(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){v(N,0)};function R(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(_(C),C=-1):g=!0,R(S,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,k||(k=!0,E()))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".6bd0a423.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="hiragana-game:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/hiragana-game/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,[o,a,l]=r,c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkhiragana_game=self.webpackChunkhiragana_game||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n.t(r,2),s=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],f=["page"],p=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var v="popstate";function _(){return T(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=C(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),E("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:k(t))},function(e,t){w("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function S(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function C(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function T(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return x(e)}null==c&&(c=0,o.replaceState(h(h({},o.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(v,d),l=e,()=>{i.removeEventListener(v,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=E(p.location,e,t);n&&n(r,e),c=u()+1;let h=S(r,c),d=p.createHref(r);try{o.pushState(h,"",d)}catch(vm){if(vm instanceof DOMException&&"DataCloneError"===vm.name)throw vm;i.location.assign(d)}s&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let r=E(p.location,e,t);n&&n(r,e),c=u();let i=S(r,c),h=p.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:p.location,delta:0})},go:e=>o.go(e)};return p}function x(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function I(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let i=H(("string"===typeof t?C(t):t).pathname||"/",n);if(null==i)return null;let s=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=B(i);o=V(s[a],e,r)}return o}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;b(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=J([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:z(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of P(e.path))s(e,t,!0,r);else s(e,t)}),t}function P(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=P(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var R=/^:[\w-]+$/,D=3,O=2,L=1,M=10,j=-2,F=e=>"*"===e;function z(e,t){let n=e.split("/"),r=n.length;return n.some(F)&&(r+=j),t&&(r+=O),n.filter(e=>!F(e)).reduce((e,t)=>e+(R.test(t)?D:""===t?L:M),r)}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:J([s,u.pathname]),pathnameBase:Z(J([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=J([s,u.pathnameBase]))}return o}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=q(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function B(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(vm){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(vm,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var W=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K=e=>W.test(e);function G(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function Q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Y(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function $(e){let t=Y(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function X(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=C(e):(r=h({},e),b(!r.pathname||!r.pathname.includes("?"),Q("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),Q("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),Q("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:i="",hash:s=""}="string"===typeof e?C(e):e;if(r)if(K(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),w(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?G(r.substring(1),"/"):G(r,n)}else t=n;return{pathname:t,search:ee(i),hash:te(s)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ee=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",te=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ne=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function re(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function ie(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function oe(e,t){let n=e;if("string"!==typeof n||!W.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(se)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=H(r.pathname,t);r.origin===e.origin&&null!=s?n=s+r.search+r.hash:i=!0}catch(s){w(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:i,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ae=["POST","PUT","PATCH","DELETE"],le=(new Set(ae),["GET",...ae]);new Set(le),Symbol("ResetLoaderData");var ce=r.createContext(null);ce.displayName="DataRouter";var ue=r.createContext(null);ue.displayName="DataRouterState";var he=r.createContext(!1);function de(){return r.useContext(he)}var fe=r.createContext({isTransitioning:!1});fe.displayName="ViewTransition";var pe=r.createContext(new Map);pe.displayName="Fetchers";var me=r.createContext(null);me.displayName="Await";var ge=r.createContext(null);ge.displayName="Navigation";var ye=r.createContext(null);ye.displayName="Location";var ve=r.createContext({outlet:null,matches:[],isDataRoute:!1});ve.displayName="Route";var _e=r.createContext(null);_e.displayName="RouteError";var be="REACT_ROUTER_ERROR";function we(){return null!=r.useContext(ye)}function Se(){return b(we(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ye).location}var Ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ke(e){r.useContext(ge).static||r.useLayoutEffect(e)}function Ce(){let{isDataRoute:e}=r.useContext(ve);return e?function(){let{router:e}=Me("useNavigate"),t=Fe("useNavigate"),n=r.useRef(!1);ke(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(n.current,Ee),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,h({fromRouteId:t},i)))},[e,t]);return i}():function(){b(we(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ce),{basename:t,navigator:n}=r.useContext(ge),{matches:i}=r.useContext(ve),{pathname:s}=Se(),o=JSON.stringify($(i)),a=r.useRef(!1);ke(()=>{a.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(a.current,Ee),!a.current)return;if("number"===typeof r)return void n.go(r);let l=X(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:J([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,o,s,e]);return l}()}r.createContext(null);function Te(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ve),{pathname:i}=Se(),s=JSON.stringify($(n));return r.useMemo(()=>X(e,JSON.parse(s),i,"path"===t),[e,s,i,t])}function xe(e,t,n,i,s){b(we(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=r.useContext(ge),{matches:a}=r.useContext(ve),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Ue(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=Se();if(t){var g;let e="string"===typeof t?C(t):t;b("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=I(e,{pathname:v});w(f||null!=_,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),w(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=Oe(_&&_.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:J([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:J([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,i,s);return t&&S?r.createElement(ye.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},S):S}function Ie(){let e=ze(),t=re(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,a)}var Ne=r.createElement(Ie,null),Ae=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(be,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ne(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?r.createElement(ve.Provider,{value:this.props.routeContext},r.createElement(_e.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?r.createElement(Re,{error:e},t):t}};Ae.contextType=he;var Pe=new WeakMap;function Re(e){let{children:t,error:n}=e,{basename:i}=r.useContext(ge);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(be,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Pe.get(n);if(t)throw t;let s=oe(e.location,i);if(se&&!Pe.get(n)){if(!s.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:e.replace}));throw Pe.set(n,t),t}window.location.href=s.absoluteURL||s.to}return r.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(s.absoluteURL||s.to)})}}return t}function De(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(ce);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ve.Provider,{value:t},i)}function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}let c=n&&i?(e,t)=>{var r,s;i(e,{location:n.location,params:null!==(r=null===(s=n.matches)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.params)&&void 0!==r?r:{},unstable_pattern:ie(n.matches),errorInfo:t})}:void 0;return s.reduceRight((e,i,u)=>{let h,d=!1,f=null,p=null;n&&(h=o&&i.route.id?o[i.route.id]:void 0,f=i.route.errorElement||Ne,a&&(l<0&&0===u?(Ue("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,u+1)),g=()=>{let t;return t=h?f:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(De,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?r.createElement(Ae,{location:n.location,revalidation:n.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function Le(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(e){let t=r.useContext(ce);return b(t,Le(e)),t}function je(e){let t=r.useContext(ue);return b(t,Le(e)),t}function Fe(e){let t=function(e){let t=r.useContext(ve);return b(t,Le(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ze(){var e;let t=r.useContext(_e),n=je("useRouteError"),i=Fe("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ve={};function Ue(e,t,n){t||Ve[e]||(Ve[e]=!0,w(!1,n))}var qe={};function Be(e,t){e||qe[t]||(qe[t]=!0,console.warn(t))}i.useOptimistic;r.memo(function(e){let{routes:t,future:n,state:r,onError:i}=e;return xe(t,void 0,r,i,n)});function He(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function We(e){let{basename:t="/",children:n=null,location:i,navigationType:s="POP",navigator:o,static:a=!1,unstable_useTransitions:l}=e;b(!we(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:o,static:a,unstable_useTransitions:l,future:{}}),[c,o,a,l]);"string"===typeof i&&(i=C(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=r.useMemo(()=>{let e=H(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}},[c,h,d,f,p,m,s]);return w(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(h).concat(d).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:r.createElement(ge.Provider,{value:u},r.createElement(ye.Provider,{children:n,value:g}))}function Ke(e){let{children:t,location:n}=e;return xe(Ge(t),n)}r.Component;function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Ge(e.props.children,s));b(e.type===He,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ge(e.props.children,s)),n.push(o)}),n}var Qe="get",Ye="application/x-www-form-urlencoded";function $e(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var Xe=null;var Je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ze(e){return null==e||Je.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ye,'"')),null)}function et(e,t){let n,r,i,s,o;if($e(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?H(o,t):null,n=e.getAttribute("method")||Qe,i=Ze(e.getAttribute("enctype"))||Ye,s=new FormData(e)}else if(function(e){return $e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?H(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Qe,i=Ze(e.getAttribute("formenctype"))||Ze(o.getAttribute("enctype"))||Ye,s=new FormData(o,e),!function(){if(null===Xe)try{new FormData(document.createElement("form"),0),Xe=!1}catch(e){Xe=!0}return Xe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if($e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qe,r=null,i=Ye,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function tt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function nt(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===H(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function rt(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(vm){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(vm),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function it(e){return null!=e&&"string"===typeof e.page}function st(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ot(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function at(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function lt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!it(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function ct(e,t){return"lazy"===e.mode&&!0===t}function ut(){let e=r.useContext(ce);return tt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ht(){let e=r.useContext(ue);return tt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var dt=r.createContext(void 0);function ft(){let e=r.useContext(dt);return tt(e,"You must render this element inside a <HydratedRouter> element"),e}function pt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mt(e,t,n){if(n&&!_t)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}dt.displayName="FrameworkContext";function gt(e){let{page:t}=e,n=o(e,f),{router:i}=ut(),s=r.useMemo(()=>I(i.routes,t,i.basename),[i.routes,t,i.basename]);return s?r.createElement(vt,h({page:t,matches:s},n)):null}function yt(e){let{manifest:t,routeModules:n}=ft(),[i,s]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return lt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await rt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(st).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),i}function vt(e){let{page:t,matches:n}=e,i=o(e,p),s=Se(),{manifest:a,routeModules:l}=ft(),{basename:c}=ut(),{loaderData:u,matches:d}=ht(),f=r.useMemo(()=>ot(t,n,d,a,s,"data"),[t,n,d,a,s]),m=r.useMemo(()=>ot(t,n,d,a,s,"assets"),[t,n,d,a,s]),g=r.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=nt(t,c,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[c,u,s,a,f,n,t,l]),y=r.useMemo(()=>at(m,a),[m,a]),v=yt(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",h({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",h({key:t,nonce:i.nonce},n))}))}var _t=!1;function bt(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:s,routeDiscovery:a,ssr:l}=ft(),{router:c,static:u,staticContext:f}=ut(),{matches:p}=ht(),m=de(),g=ct(a,l);s&&(s.didRenderScripts=!0);let y=mt(p,null,i);r.useEffect(()=>{_t=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let s=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=u?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];tt(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach(e=>{let n=I(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return h(h({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),r.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),_=_t||m?[]:(b=t.entry.imports.concat(at(y,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof t.sri?t.sri:{};return Be(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),_t||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),_.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function wt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function St(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(re(t))return r.createElement(Et,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(Et,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function Et(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:s,children:o}=e,{routeModules:a}=ft();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!s?o:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,i?r.createElement(bt,null):null)))}var kt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{kt&&(window.__reactRouterVersion="7.11.0")}catch(Nb){}function Ct(e){let{basename:t,children:n,unstable_useTransitions:i,window:s}=e,o=r.useRef();null==o.current&&(o.current=_({window:s,v5Compat:!0}));let a=o.current,[l,c]=r.useState({action:a.action,location:a.location}),u=r.useCallback(e=>{!1===i?c(e):r.startTransition(()=>c(e))},[i]);return r.useLayoutEffect(()=>a.listen(u),[a,u]),r.createElement(We,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:i})}var Tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=r.forwardRef(function(e,t){let{onClick:n,discover:i="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:u,target:d,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y}=e,v=o(e,m),{basename:_,unstable_useTransitions:w}=r.useContext(ge),S="string"===typeof f&&Tt.test(f),E=oe(f,_);f=E.to;let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(we(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(ge),{hash:s,pathname:o,search:a}=Te(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:J([n,o])),i.createHref({pathname:l,search:a,hash:s})}(f,{relative:a}),[T,x,I]=function(e,t){let n=r.useContext(dt),[i,s]=r.useState(!1),[o,a]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:pt(l,p),onBlur:pt(c,m),onMouseEnter:pt(u,p),onMouseLeave:pt(h,m),onTouchStart:pt(d,p)}]:[!1,f,{}]}(s,v),N=function(e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=Ce(),h=Se(),d=Te(e,{relative:o});return r.useCallback(f=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(f,t)){f.preventDefault();let t=void 0!==n?n:k(h)===k(d),p=()=>u(e,{replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:l});c?r.startTransition(()=>p()):p()}},[h,u,d,n,i,t,e,s,o,a,l,c])}(f,{replace:c,state:u,target:d,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:w});let A=r.createElement("a",h(h(h({},v),I),{},{href:E.absoluteURL||C,onClick:E.isExternal||l?n:function(e){n&&n(e),e.defaultPrevented||N(e)},ref:wt(t,x),target:d,"data-discover":S||"render"!==i?void 0:"true"}));return T&&!S?r.createElement(r.Fragment,null,A,r.createElement(gt,{page:C})):A});xt.displayName="Link";var It=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,f=o(e,g),p=Te(c,{relative:f.relative}),m=Se(),y=r.useContext(ue),{navigator:v,basename:_}=r.useContext(ge),w=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(fe);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Pt("useViewTransitionState"),s=Te(e,{relative:t});if(!n.isTransitioning)return!1;let o=H(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=H(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=U(s.pathname,a)||null!=U(s.pathname,o)}(p)&&!0===u,S=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=m.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(E=E.toLowerCase(),k=k?k.toLowerCase():null,S=S.toLowerCase()),k&&_&&(k=H(k,_)||k);const C="/"!==S&&S.endsWith("/")?S.length-1:S.length;let T,x=E===S||!a&&E.startsWith(S)&&"/"===E.charAt(C),I=null!=k&&(k===S||!a&&k.startsWith(S)&&"/"===k.charAt(S.length)),N={isActive:x,isPending:I,isTransitioning:w},A=x?n:void 0;T="function"===typeof s?s(N):[s,x?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(N):l;return r.createElement(xt,h(h({},f),{},{"aria-current":A,className:T,ref:t,style:P,to:c,viewTransition:u}),"function"===typeof d?d(N):d)});It.displayName="NavLink";var Nt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:a,replace:l,state:c,method:u=Qe,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:v}=e,_=o(e,y),{unstable_useTransitions:w}=r.useContext(ge),S=Ot(),E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ge),i=r.useContext(ve);b(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o=h({},Te(e||".",{relative:t})),a=Se();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:J([n,o.pathname]));return k(o)}(d,{relative:p}),C="get"===u.toLowerCase()?"get":"post",T="string"===typeof d&&Tt.test(d);return r.createElement("form",h(h({ref:t,method:C,action:E,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u,o=()=>S(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:v});w&&!1!==s?r.startTransition(()=>o()):o()}},_),{},{"data-discover":T||"render"!==n?void 0:"true"}))});function At(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Pt(e){let t=r.useContext(ce);return b(t,At(e)),t}Nt.displayName="Form";var Rt=0,Dt=()=>"__".concat(String(++Rt),"__");function Ot(){let{router:e}=Pt("useSubmit"),{basename:t}=r.useContext(ge),n=Fe("useRouteId"),i=e.fetch,s=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:l,formData:c,body:u}=et(e,t);if(!1===r.navigate){let e=r.fetcherKey||Dt();await i(e,n,r.action||o,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await s(r.action||o,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,s,t,n])}const Lt=[{character:"\u3042",romaji:"a"},{character:"\u3044",romaji:"i"},{character:"\u3046",romaji:"u"},{character:"\u3048",romaji:"e"},{character:"\u304a",romaji:"o"},{character:"\u304b",romaji:"ka"},{character:"\u304d",romaji:"ki"},{character:"\u304f",romaji:"ku"},{character:"\u3051",romaji:"ke"},{character:"\u3053",romaji:"ko"},{character:"\u3055",romaji:"sa"},{character:"\u3057",romaji:"shi"},{character:"\u3059",romaji:"su"},{character:"\u305b",romaji:"se"},{character:"\u305d",romaji:"so"},{character:"\u305f",romaji:"ta"},{character:"\u3061",romaji:"chi"},{character:"\u3064",romaji:"tsu"},{character:"\u3066",romaji:"te"},{character:"\u3068",romaji:"to"},{character:"\u306a",romaji:"na"},{character:"\u306b",romaji:"ni"},{character:"\u306c",romaji:"nu"},{character:"\u306d",romaji:"ne"},{character:"\u306e",romaji:"no"},{character:"\u306f",romaji:"ha"},{character:"\u3072",romaji:"hi"},{character:"\u3075",romaji:"fu"},{character:"\u3078",romaji:"he"},{character:"\u307b",romaji:"ho"},{character:"\u307e",romaji:"ma"},{character:"\u307f",romaji:"mi"},{character:"\u3080",romaji:"mu"},{character:"\u3081",romaji:"me"},{character:"\u3082",romaji:"mo"},{character:"\u3084",romaji:"ya"},{character:"",romaji:""},{character:"\u3086",romaji:"yu"},{character:"",romaji:""},{character:"\u3088",romaji:"yo"},{character:"\u3089",romaji:"ra"},{character:"\u308a",romaji:"ri"},{character:"\u308b",romaji:"ru"},{character:"\u308c",romaji:"re"},{character:"\u308d",romaji:"ro"},{character:"\u308f",romaji:"wa"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"\u3092",romaji:"wo"},{character:"\u3093",romaji:"n"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""}],Mt=!1,jt=!1,Ft="${JSCORE_VERSION}",zt=function(e,t){if(!e)throw Vt(t)},Vt=function(e){return new Error("Firebase Database ("+Ft+") INTERNAL ASSERT FAILED: "+e)},Ut=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},qt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ut(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Bt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Bt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ht=function(e){const t=Ut(e);return qt.encodeByteArray(t,!0)},Wt=function(e){return Ht(e).replace(/\./g,"")},Kt=function(e){try{return qt.decodeString(e,!0)}catch(Nb){console.error("base64Decode failed: ",Nb)}return null};function Gt(e){return Qt(void 0,e)}function Qt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Yt(n)&&(e[n]=Qt(e[n],t[n]));return e}function Yt(e){return"__proto__"!==e}function $t(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Xt=()=>{try{return $t().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/hiragana-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Nb){return}const t=e&&Kt(e[1]);return t&&JSON.parse(t)})()}catch(Nb){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Nb))}},Jt=e=>{const t=(e=>{var t;return null===(t=Xt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Zt=()=>{var e;return null===(e=Xt())||void 0===e?void 0:e.config};class en{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function tn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function nn(e){return(await fetch(e,{credentials:"include"})).ok}function rn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=h({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Wt(JSON.stringify({alg:"none",type:"JWT"})),Wt(JSON.stringify(s)),""].join(".")}const sn={};let on=!1;function an(e,t){if("undefined"===typeof window||"undefined"===typeof document||!tn(window.location.host)||sn[e]===t||sn[e]||on)return;function n(e){return"__firebase__banner__".concat(e)}sn[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(sn))sn[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{on=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function ln(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function cn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function un(){var e;const t=null===(e=Xt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Nb){return!1}}function hn(){return!0===Mt||!0===jt}function dn(){return!un()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fn(){try{return"object"===typeof indexedDB}catch(Nb){return!1}}class pn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}}class mn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(gn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new pn(n,s,t)}}const gn=/\{\$([^}]+)}/g;function yn(e){return JSON.parse(e)}function vn(e){return JSON.stringify(e)}const _n=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=yn(Kt(s[0])||""),n=yn(Kt(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(Nb){}return{header:t,claims:n,data:r,signature:i}};function bn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Sn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function En(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function kn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Cn(n)&&Cn(s)){if(!kn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cn(e){return null!==e&&"object"===typeof e}class Tn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function xn(e,t){return"".concat(e," failed: ").concat(t," argument ")}const In=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Nn(e){return e&&e._delegate?e._delegate:e}class An{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pn="[DEFAULT]";class Rn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new en;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Nb){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Nb){if(r)return null;throw Nb}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch(Nb){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Nb){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Pn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Dn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const On=[];var Ln;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ln||(Ln={}));const Mn={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},jn=Ln.INFO,Fn={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},zn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Fn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Vn{constructor(e){this.name=e,this._logLevel=jn,this._logHandler=zn,this._userLogHandler=null,On.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Mn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...t),this._logHandler(this,Ln.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...t),this._logHandler(this,Ln.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...t),this._logHandler(this,Ln.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...t),this._logHandler(this,Ln.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...t),this._logHandler(this,Ln.ERROR,...t)}}let Un,qn;const Bn=new WeakMap,Hn=new WeakMap,Wn=new WeakMap,Kn=new WeakMap,Gn=new WeakMap;let Qn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Hn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Wn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Yn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qn||(qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jn(this),n),Xn(Bn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xn(e.apply(Jn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Jn(this),t,...r);return Wn.set(s,t.sort?t.sort():[t]),Xn(s)}}function $n(e){return"function"===typeof e?Yn(e):(e instanceof IDBTransaction&&function(e){if(Hn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Hn.set(e,t)}(e),t=e,(Un||(Un=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Qn):e);var t}function Xn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Xn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Bn.set(t,e)}).catch(()=>{}),Gn.set(t,e),t}(e);if(Kn.has(e))return Kn.get(e);const t=$n(e);return t!==e&&(Kn.set(e,t),Gn.set(t,e)),t}const Jn=e=>Gn.get(e);const Zn=["get","getKey","getAll","getAllKeys","count"],er=["put","add","delete","clear"],tr=new Map;function nr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(tr.get(t))return tr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=er.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Zn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return tr.set(t,s),s}Qn=(e=>h(h({},e),{},{get:(t,n,r)=>nr(t,n)||e.get(t,n,r),has:(t,n)=>!!nr(t,n)||e.has(t,n)}))(Qn);class rr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ir="@firebase/app",sr="0.14.6",or=new Vn("@firebase/app"),ar="@firebase/app-compat",lr="@firebase/analytics-compat",cr="@firebase/analytics",ur="@firebase/app-check-compat",hr="@firebase/app-check",dr="@firebase/auth",fr="@firebase/auth-compat",pr="@firebase/database",mr="@firebase/data-connect",gr="@firebase/database-compat",yr="@firebase/functions",vr="@firebase/functions-compat",_r="@firebase/installations",br="@firebase/installations-compat",wr="@firebase/messaging",Sr="@firebase/messaging-compat",Er="@firebase/performance",kr="@firebase/performance-compat",Cr="@firebase/remote-config",Tr="@firebase/remote-config-compat",xr="@firebase/storage",Ir="@firebase/storage-compat",Nr="@firebase/firestore",Ar="@firebase/ai",Pr="@firebase/firestore-compat",Rr="firebase",Dr="[DEFAULT]",Or={[ir]:"fire-core",[ar]:"fire-core-compat",[cr]:"fire-analytics",[lr]:"fire-analytics-compat",[hr]:"fire-app-check",[ur]:"fire-app-check-compat",[dr]:"fire-auth",[fr]:"fire-auth-compat",[pr]:"fire-rtdb",[mr]:"fire-data-connect",[gr]:"fire-rtdb-compat",[yr]:"fire-fn",[vr]:"fire-fn-compat",[_r]:"fire-iid",[br]:"fire-iid-compat",[wr]:"fire-fcm",[Sr]:"fire-fcm-compat",[Er]:"fire-perf",[kr]:"fire-perf-compat",[Cr]:"fire-rc",[Tr]:"fire-rc-compat",[xr]:"fire-gcs",[Ir]:"fire-gcs-compat",[Nr]:"fire-fst",[Pr]:"fire-fst-compat",[Ar]:"fire-vertex","fire-js":"fire-js",[Rr]:"fire-js-all"},Lr=new Map,Mr=new Map,jr=new Map;function Fr(e,t){try{e.container.addComponent(t)}catch(Nb){or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Nb)}}function zr(e){const t=e.name;if(jr.has(t))return or.debug("There were multiple attempts to register component ".concat(t,".")),!1;jr.set(t,e);for(const n of Lr.values())Fr(n,e);for(const n of Mr.values())Fr(n,e);return!0}function Vr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ur(e){return null!==e&&void 0!==e&&void 0!==e.settings}const qr=new mn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Br{constructor(e,t,n){this._isDeleted=!1,this._options=h({},e),this._config=h({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}const Hr="12.6.0";function Wr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=h({name:Dr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw qr.create("bad-app-name",{appName:String(i)});if(n||(n=Zt()),!n)throw qr.create("no-options");const s=Lr.get(i);if(s){if(kn(n,s.options)&&kn(r,s.config))return s;throw qr.create("duplicate-app",{appName:i})}const o=new Dn(i);for(const l of jr.values())o.addComponent(l);const a=new Br(n,r,o);return Lr.set(i,a),a}function Kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr;const t=Lr.get(e);if(!t&&e===Dr&&Zt())return Wr();if(!t)throw qr.create("no-app",{appName:e});return t}function Gr(e,t,n){var r;let i=null!==(r=Or[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void or.warn(e.join(" "))}zr(new An("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Qr="firebase-heartbeat-store";let Yr=null;function $r(){return Yr||(Yr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Xn(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Xn(o.result),e.oldVersion,e.newVersion,Xn(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Qr)}catch(Nb){console.warn(Nb)}}}).catch(e=>{throw qr.create("idb-open",{originalErrorMessage:e.message})})),Yr}async function Xr(e,t){try{const n=(await $r()).transaction(Qr,"readwrite"),r=n.objectStore(Qr);await r.put(t,Jr(e)),await n.done}catch(Nb){if(Nb instanceof pn)or.warn(Nb.message);else{const t=qr.create("idb-set",{originalErrorMessage:null===Nb||void 0===Nb?void 0:Nb.message});or.warn(t.message)}}}function Jr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Zr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ti(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ei();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Nb){or.warn(Nb)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ei(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ni(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ni(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Wt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Nb){return or.warn(Nb),""}}}function ei(){return(new Date).toISOString().substring(0,10)}class ti{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(vm){t(vm)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await $r()).transaction(Qr),n=await t.objectStore(Qr).get(Jr(e));return await t.done,n}catch(Nb){if(Nb instanceof pn)or.warn(Nb.message);else{const t=qr.create("idb-get",{originalErrorMessage:null===Nb||void 0===Nb?void 0:Nb.message});or.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Xr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Xr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ni(e){return Wt(JSON.stringify({version:2,heartbeats:e})).length}var ri;ri="",zr(new An("platform-logger",e=>new rr(e),"PRIVATE")),zr(new An("heartbeat",e=>new Zr(e),"PRIVATE")),Gr(ir,sr,ri),Gr(ir,sr,"esm2020"),Gr("fire-js","");Gr("firebase","12.7.0","app");var ii,si,oi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ai={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,si=ai.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},ii=ai.Integer=r}).apply("undefined"!==typeof oi?oi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var li,ci,ui,hi,di,fi,pi,mi,gi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},yi={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof gi&&gi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,_=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}_=!1}function E(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function x(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(x,k),x.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&x.Z.h.call(this)},x.prototype.h=function(){x.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),N=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++N,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function j(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}M.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=F(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),V={};function U(e,t,n,r,i){if(r&&r.once)return B(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)U(e,t[s],n,r,i);return null}return n=$(n),e&&e[I]?e.J(t,n,o(r)?!!r.capture:!!r,i):q(e,t,n,!1,r,i)}function q(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[z]=l=new M(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function B(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)B(e,t[s],n,r,i);return null}return n=$(n),e&&e[I]?e.K(t,n,o(r)?!!r.capture:!!r,i):q(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=$(n),e&&e[I]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])j(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(j(n,e),0==n.h&&(n.src=null,t[z]=null)):P(e)}}}function K(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new x(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[z])instanceof M?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function $(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function X(){E.call(this),this.i=new M(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;L(t=new k(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&j(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,E),X.prototype[I]=!0,X.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}u(ne,E);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){k.call(this,"d")}function de(){k.call(this,"c")}u(he,k),u(de,k);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){k.call(this,fe.Ia,e)}function ye(e){const t=me();J(t,new ge(t))}function ve(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function _e(e){const t=me();J(t,new ve(t,e))}function be(e,t){k.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Se(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(ve,k),fe.Ja="timingevent",u(be,k),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var ke,Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function xe(){}function Ie(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}u(xe,le),xe.prototype.g=function(){return new XMLHttpRequest},ke=new xe;var Re={},De={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=U(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,ze(e,e.H)}function ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ve(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ue(e){0==e.j.I||e.K||en(e.j,e)}function qe(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Be(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Bt(n)}$t(n),_e(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),o.L){$e(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(Ve(a),Fe(a)),r.g=o}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):qt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=zt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return qe(e),Ue(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,_e(12),qe(this),Ue(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=je(this,n),t==De){4==l&&(this.m=4,_e(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,_e(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),Be(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,_e(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(a),a.P=!0,_e(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),qe(this),Ue(this)}else Ee(this.i,this.l,n,null),Be(this,n);4==l&&qe(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ne(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),qe(this),Ue(this)}}}catch(Xi){}},Ae.prototype.cancel=function(){this.K=!0,qe(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),_e(17)),qe(this),this.m=2,Ue(this)):ze(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function $e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}We.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function _t(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),d(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Et(){this.g=new ae}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ct(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function xt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Nt(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nt(n),"string"===typeof e?null!=n&&Ie(n):it(e,t,n))}function Pt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new Ct(this.i,this.h)},u(Ct,X),(e=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,xt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xt(this):It(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,xt(this))},e.Na=function(e){this.g&&(this.response=e,xt(this))},e.ga=function(){this.g&&xt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Pt,X);var Rt=/^https?$/i,Dt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),jt(e)}function Lt(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Je)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var o=Ft(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Lt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||J(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ut(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new Et,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function qt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Bt(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Ht(e){Bt(e),e.v&&(s.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),_||(v(),_=!0),b.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function Gt(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(_i){throw e.push(s+"type="+encodeURIComponent("_badmap")),_i}}catch(_i){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),_||(v(),_=!0),b.add(t,e),e.A=0}}function $t(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Le(n,e)}function Zt(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,$e(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;J(r=me(),new be(r,n)),Wt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&$t(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Se;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new kt({ab:n})):new Pt(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){X.call(this),this.g=new Ut(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function un(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=Pt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ot(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ot(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Ut.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),L(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),s&&(this.R?t="headers="+Ie(Nt(s))+"&"+t:this.u&&At(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Bt(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,Bt(this),$t(this),_e(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){qt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,cn.Z.N.call(this)},u(un,he),u(hn,de),u(dn,an),dn.prototype.ra=function(){J(this.g,"a")},dn.prototype.qa=function(e){J(this.g,new un(e))},dn.prototype.pa=function(e){J(this.g,new hn)},dn.prototype.oa=function(){J(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,mi=yi.createWebChannelTransport=function(){return new ln},pi=yi.getStatEventTarget=function(){return me()},fi=yi.Event=fe,di=yi.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,hi=yi.ErrorCode=Ce,Te.COMPLETE="complete",ui=yi.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,ci=yi.WebChannel=ce,yi.FetchXmlHttpFactory=kt,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,li=yi.XhrIo=Pt}).apply("undefined"!==typeof gi?gi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const vi="@firebase/firestore",_i="4.9.3";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let wi="12.7.0";const Si=new Vn("@firebase/firestore");function Ei(){return Si.logLevel}function ki(e){if(Si.logLevel<=Ln.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xi);Si.debug("Firestore (".concat(wi,"): ").concat(e),...i)}}function Ci(e){if(Si.logLevel<=Ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xi);Si.error("Firestore (".concat(wi,"): ").concat(e),...i)}}function Ti(e){if(Si.logLevel<=Ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xi);Si.warn("Firestore (".concat(wi,"): ").concat(e),...i)}}function xi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ii(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ni(e,r,n)}function Ni(e,t,n){let r="FIRESTORE (".concat(wi,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ci(r),new Error(r)}function Ai(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ni(t,i,r)}function Pi(e,t){return e}const Ri={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Di extends pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Li{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Mi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class ji{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fi{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ai(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oi,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{ki("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ki("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oi)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ki("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ai("string"==typeof t.accessToken,31837,{l:t}),new Li(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ai(null===e||"string"==typeof e,2055,{h:e}),new bi(e)}}class zi{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vi{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new zi(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ui{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qi{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ai(void 0===this.o,3512);const n=e=>{null!=e.error&&ki("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ki("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ki("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ki("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ui(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ai("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ui(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Bi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Hi{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Bi(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Wi(e,t){return e<t?-1:e>t?1:0}function Ki(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Yi(n)===Yi(i)?Wi(n,i):Yi(n)?1:-1}return Wi(e.length,t.length)}const Gi=55296,Qi=57343;function Yi(e){const t=e.charCodeAt(0);return t>=Gi&&t<=Qi}function $i(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Xi="__name__";class Ji{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ii(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ii(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ji.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ji.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Wi(e.length,t.length)}static compareSegments(e,t){const n=Ji.isNumericId(e),r=Ji.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ji.extractNumericId(e).compare(Ji.extractNumericId(t)):Ki(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ii.fromString(e.substring(4,e.length-2))}}class Zi extends Ji{construct(e,t,n){return new Zi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Di(Ri.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Zi(e)}static emptyPath(){return new Zi([])}}const es=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends Ji{construct(e,t,n){return new ts(e,t,n)}static isValidIdentifier(e){return es.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Xi}static keyField(){return new ts([Xi])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Di(Ri.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Di(Ri.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Di(Ri.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Di(Ri.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ts(t)}static emptyPath(){return new ts([])}}class ns{constructor(e){this.path=e}static fromPath(e){return new ns(Zi.fromString(e))}static fromName(e){return new ns(Zi.fromString(e).popFirst(5))}static empty(){return new ns(Zi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ns(new Zi(e.slice()))}}function rs(e,t,n){if(!n)throw new Di(Ri.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function is(e){if(!ns.isDocumentKey(e))throw new Di(Ri.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ss(e){if(ns.isDocumentKey(e))throw new Di(Ri.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function os(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function as(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ii(12329,{type:typeof e})}function ls(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Di(Ri.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=as(e);throw new Di(Ri.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function cs(e,t){if(t<=0)throw new Di(Ri.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function us(e,t){const n={typeString:e};return t&&(n.value=t),n}function hs(e,t){if(!os(e))throw new Di(Ri.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Di(Ri.INVALID_ARGUMENT,n);return!0}const ds=-62135596800,fs=1e6;class ps{static now(){return ps.fromMillis(Date.now())}static fromDate(e){return ps.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*fs);return new ps(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ds)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fs}_compareTo(e){return this.seconds===e.seconds?Wi(this.nanoseconds,e.nanoseconds):Wi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ps._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hs(e,ps._jsonSchema))return new ps(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ds;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ps._jsonSchemaVersion="firestore/timestamp/1.0",ps._jsonSchema={type:us("string",ps._jsonSchemaVersion),seconds:us("number"),nanoseconds:us("number")};class ms{static fromTimestamp(e){return new ms(e)}static min(){return new ms(new ps(0,0))}static max(){return new ms(new ps(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const gs=-1;class ys{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ys.UNKNOWN_ID=-1;function vs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ms.fromTimestamp(1e9===r?new ps(n+1,0):new ps(n,r));return new bs(i,ns.empty(),t)}function _s(e){return new bs(e.readTime,e.key,gs)}class bs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new bs(ms.min(),ns.empty(),gs)}static max(){return new bs(ms.max(),ns.empty(),gs)}}function ws(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ns.comparator(e.documentKey,t.documentKey),0!==n?n:Wi(e.largestBatchId,t.largestBatchId))}const Ss="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Es{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ks(e){if(e.code!==Ri.FAILED_PRECONDITION||e.message!==Ss)throw e;ki("LocalStore","Unexpectedly lost primary lease")}class Cs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ii(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Cs((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Cs?t:Cs.resolve(t)}catch(e){return Cs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Cs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Cs.reject(t)}static resolve(e){return new Cs((t,n)=>{t(e)})}static reject(e){return new Cs((t,n)=>{n(e)})}static waitFor(e){return new Cs((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Cs.resolve(!1);for(const n of e)t=t.next(e=>e?Cs.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Cs((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Cs((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ts(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xs(e){return"IndexedDbTransactionError"===e.name}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Is.ce=-1;const Ns=-1;function As(e){return null==e}function Ps(e){return 0===e&&1/e==-1/0}function Rs(e){return"number"==typeof e&&Number.isInteger(e)&&!Ps(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ds="\x01";function Os(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ms(t)),t=Ls(e.get(n),t);return Ms(t)}function Ls(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ds:n+="\x01\x11";break;default:n+=t}}return n}function Ms(e){return e+Ds+"\x01"}const js="remoteDocuments",Fs="owner",zs="mutationQueues",Vs="mutations";const Us="documentMutations",qs="remoteDocumentsV14",Bs="remoteDocumentGlobal",Hs="targets",Ws="targetDocuments",Ks="targetGlobal",Gs="collectionParents",Qs="clientMetadata",Ys="bundles",$s="namedQueries",Xs="indexConfiguration",Js="indexState",Zs="indexEntries",eo="documentOverlays",to="globals",no=[zs,Vs,Us,js,Hs,Fs,Ks,Ws,Qs,Bs,Gs,Ys,$s],ro=[zs,Vs,Us,qs,Hs,Fs,Ks,Ws,Qs,Bs,Gs,Ys,$s,eo],io=ro,so=[...io,Xs,Js,Zs];function oo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ao(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class co{constructor(e,t){this.comparator=e,this.root=t||ho.EMPTY}insert(e,t){return new co(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(e){return new co(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ho.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uo(this.root,e,this.comparator,!0)}}class uo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ho{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ho.RED,this.left=null!=r?r:ho.EMPTY,this.right=null!=i?i:ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ho(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ho.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ho.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ii(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ii(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ii(27949);return e+(this.isRed()?0:1)}}ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1,ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Ii(57766)}get value(){throw Ii(16141)}get color(){throw Ii(16727)}get left(){throw Ii(29726)}get right(){throw Ii(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ho(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fo{constructor(e){this.comparator=e,this.data=new co(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new po(this.data.getIterator())}getIteratorFrom(e){return new po(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof fo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fo(this.comparator);return t.data=e,t}}class po{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class mo{constructor(e){this.fields=e,e.sort(ts.comparator)}static empty(){return new mo([])}unionWith(e){let t=new fo(ts.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $i(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class go extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new go("Invalid base64 string: "+e):e}}(e);return new yo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yo.EMPTY_BYTE_STRING=new yo("");const vo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(e){if(Ai(!!e,39018),"string"==typeof e){let t=0;const n=vo.exec(e);if(Ai(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bo(e.seconds),nanos:bo(e.nanos)}}function bo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wo(e){return"string"==typeof e?yo.fromBase64String(e):yo.fromUint8Array(e)}const So="server_timestamp",Eo="__type__",ko="__previous_value__",Co="__local_write_time__";function To(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Eo])||void 0===t?void 0:t.stringValue)===So}function xo(e){const t=e.mapValue.fields[ko];return To(t)?xo(t):t}function Io(e){const t=_o(e.mapValue.fields[Co].timestampValue);return new ps(t.seconds,t.nanos)}class No{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ao="(default)";class Po{constructor(e,t){this.projectId=e,this.database=t||Ao}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database===Ao}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}const Ro="__type__",Do="__max__",Oo={mapValue:{fields:{__type__:{stringValue:Do}}}},Lo="__vector__",Mo="value";function jo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?To(e)?4:ea(e)?9007199254740991:Jo(e)?10:11:Ii(28295,{value:e})}function Fo(e,t){if(e===t)return!0;const n=jo(e);if(n!==jo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Io(e).isEqual(Io(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_o(e.timestampValue),r=_o(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wo(e.bytesValue).isEqual(wo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bo(e.geoPointValue.latitude)===bo(t.geoPointValue.latitude)&&bo(e.geoPointValue.longitude)===bo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bo(e.integerValue)===bo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bo(e.doubleValue),r=bo(t.doubleValue);return n===r?Ps(n)===Ps(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $i(e.arrayValue.values||[],t.arrayValue.values||[],Fo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(oo(n)!==oo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fo(n[i],r[i])))return!1;return!0}(e,t);default:return Ii(52216,{left:e})}}function zo(e,t){return void 0!==(e.values||[]).find(e=>Fo(e,t))}function Vo(e,t){if(e===t)return 0;const n=jo(e),r=jo(t);if(n!==r)return Wi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bo(e.integerValue||e.doubleValue),r=bo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uo(e.timestampValue,t.timestampValue);case 4:return Uo(Io(e),Io(t));case 5:return Ki(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wo(e),r=wo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Wi(n[i],r[i]);if(0!==e)return e}return Wi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wi(bo(e.latitude),bo(t.latitude));return 0!==n?n:Wi(bo(e.longitude),bo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return qo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Mo])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Mo])||void 0===r?void 0:r.arrayValue,u=Wi((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:qo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Oo.mapValue&&t===Oo.mapValue)return 0;if(e===Oo.mapValue)return 1;if(t===Oo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ki(r[o],s[o]);if(0!==e)return e;const t=Vo(n[r[o]],i[s[o]]);if(0!==t)return t}return Wi(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ii(23264,{he:n})}}function Uo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wi(e,t);const n=_o(e),r=_o(t),i=Wi(n.seconds,r.seconds);return 0!==i?i:Wi(n.nanos,r.nanos)}function qo(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Vo(n[i],r[i]);if(e)return e}return Wi(n.length,r.length)}function Bo(e){return Ho(e)}function Ho(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_o(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ns.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ho(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ho(e.fields[i]));return n+"}"}(e.mapValue):Ii(61005,{value:e})}function Wo(e){switch(jo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xo(e);return t?16+Wo(t):16;case 5:return 2*e.stringValue.length;case 6:return wo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Wo(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ao(e.fields,(e,n)=>{t+=e.length+Wo(n)}),t}(e.mapValue);default:throw Ii(13486,{value:e})}}function Ko(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Go(e){return!!e&&"integerValue"in e}function Qo(e){return!!e&&"arrayValue"in e}function Yo(e){return!!e&&"nullValue"in e}function $o(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xo(e){return!!e&&"mapValue"in e}function Jo(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ro])||void 0===t?void 0:t.stringValue)===Lo}function Zo(e){if(e.geoPointValue)return{geoPointValue:h({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:h({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ao(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Zo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zo(e.arrayValue.values[n]);return t}return h({},e)}function ea(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Do}class ta{constructor(e){this.value=e}static empty(){return new ta({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(t)}setAll(e){let t=ts.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Zo(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Xo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ao(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ta(Zo(this.value))}}function na(e){const t=[];return ao(e.fields,(e,n)=>{const r=new ts([e]);if(Xo(n)){const e=na(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new mo(t)}class ra{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ra(e,0,ms.min(),ms.min(),ms.min(),ta.empty(),0)}static newFoundDocument(e,t,n,r){return new ra(e,1,t,ms.min(),n,r,0)}static newNoDocument(e,t){return new ra(e,2,t,ms.min(),ms.min(),ta.empty(),0)}static newUnknownDocument(e,t){return new ra(e,3,t,ms.min(),ms.min(),ta.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ms.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ta.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ta.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ms.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ra&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ra(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ia{constructor(e,t){this.position=e,this.inclusive=t}}function sa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ns.comparator(ns.fromName(o.referenceValue),n.key):Vo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function oa(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fo(e.position[n],t.position[n]))return!1;return!0}class aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function la(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ca{}class ua extends ca{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new va(e,t,n):"array-contains"===t?new Sa(e,n):"in"===t?new Ea(e,n):"not-in"===t?new ka(e,n):"array-contains-any"===t?new Ca(e,n):new ua(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _a(e,n):new ba(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Vo(t,this.value)):null!==t&&jo(this.value)===jo(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ii(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ha extends ca{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ha(e,t)}matches(e){return da(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function da(e){return"and"===e.op}function fa(e){return pa(e)&&da(e)}function pa(e){for(const t of e.filters)if(t instanceof ha)return!1;return!0}function ma(e){if(e instanceof ua)return e.field.canonicalString()+e.op.toString()+Bo(e.value);if(fa(e))return e.filters.map(e=>ma(e)).join(",");{const t=e.filters.map(e=>ma(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function ga(e,t){return e instanceof ua?function(e,t){return t instanceof ua&&e.op===t.op&&e.field.isEqual(t.field)&&Fo(e.value,t.value)}(e,t):e instanceof ha?function(e,t){return t instanceof ha&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ga(n,t.filters[r]),!0)}(e,t):void Ii(19439)}function ya(e){return e instanceof ua?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Bo(e.value))}(e):e instanceof ha?function(e){return e.op.toString()+" {"+e.getFilters().map(ya).join(" ,")+"}"}(e):"Filter"}class va extends ua{constructor(e,t,n){super(e,t,n),this.key=ns.fromName(n.referenceValue)}matches(e){const t=ns.comparator(e.key,this.key);return this.matchesComparison(t)}}class _a extends ua{constructor(e,t){super(e,"in",t),this.keys=wa("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ba extends ua{constructor(e,t){super(e,"not-in",t),this.keys=wa("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wa(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ns.fromName(e.referenceValue))}class Sa extends ua{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qo(t)&&zo(t.arrayValue,this.value)}}class Ea extends ua{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zo(this.value.arrayValue,t)}}class ka extends ua{constructor(e,t){super(e,"not-in",t)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!zo(this.value.arrayValue,t)}}class Ca extends ua{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zo(this.value.arrayValue,e))}}class Ta{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function xa(e){return new Ta(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ia(e){const t=Pi(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ma(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),As(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Bo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Bo(e)).join(",")),t.Te=e}return t.Te}function Na(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!la(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ga(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oa(e.startAt,t.startAt)&&oa(e.endAt,t.endAt)}function Aa(e){return ns.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ra(e,t,n,r,i,s,o,a){return new Pa(e,t,n,r,i,s,o,a)}function Da(e){return new Pa(e)}function Oa(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function La(e){return null!==e.collectionGroup}function Ma(e){const t=Pi(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fo(ts.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new aa(r,n))}),e.has(ts.keyField().canonicalString())||t.Ie.push(new aa(ts.keyField(),n))}return t.Ie}function ja(e){const t=Pi(e);return t.Ee||(t.Ee=Fa(t,Ma(e))),t.Ee}function Fa(e,t){if("F"===e.limitType)return xa(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new aa(e.field,t)});const n=e.endAt?new ia(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ia(e.startAt.position,e.startAt.inclusive):null;return xa(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function za(e,t){const n=e.filters.concat([t]);return new Pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Va(e,t,n){return new Pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ua(e,t){return Na(ja(e),ja(t))&&e.limitType===t.limitType}function qa(e){return"".concat(Ia(ja(e)),"|lt:").concat(e.limitType)}function Ba(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ya(e)).join(", "),"]")),As(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Bo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Bo(e)).join(",")),"Target(".concat(t,")")}(ja(e)),"; limitType=").concat(e.limitType,")")}function Ha(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ns.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ma(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ma(e),t))&&!(e.endAt&&!function(e,t,n){const r=sa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ma(e),t))}(e,t)}function Wa(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ka(e){return(t,n)=>{let r=!1;for(const i of Ma(e)){const e=Ga(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ga(e,t,n){const r=e.field.isKeyField()?ns.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vo(r,i):Ii(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ii(19790,{direction:e.dir})}}class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return lo(this.inner)}size(){return this.innerSize}}const Ya=new co(ns.comparator);function $a(){return Ya}const Xa=new co(ns.comparator);function Ja(){let e=Xa;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Za(e){let t=Xa;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function el(){return nl()}function tl(){return nl()}function nl(){return new Qa(e=>e.toString(),(e,t)=>e.isEqual(t))}const rl=new co(ns.comparator),il=new fo(ns.comparator);function sl(){let e=il;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ol=new fo(Wi);function al(){return ol}function ll(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ps(t)?"-0":t}}function cl(e){return{integerValue:""+e}}function ul(e,t){return Rs(t)?cl(t):ll(e,t)}class hl{constructor(){this._=void 0}}function dl(e,t,n){return e instanceof ml?function(e,t){const n={fields:{[Eo]:{stringValue:So},[Co]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&To(t)&&(t=xo(t)),t&&(n.fields[ko]=t),{mapValue:n}}(n,t):e instanceof gl?yl(e,t):e instanceof vl?_l(e,t):function(e,t){const n=pl(e,t),r=wl(n)+wl(e.Ae);return Go(n)&&Go(e.Ae)?cl(r):ll(e.serializer,r)}(e,t)}function fl(e,t,n){return e instanceof gl?yl(e,t):e instanceof vl?_l(e,t):n}function pl(e,t){return e instanceof bl?function(e){return Go(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ml extends hl{}class gl extends hl{constructor(e){super(),this.elements=e}}function yl(e,t){const n=Sl(t);for(const r of e.elements)n.some(e=>Fo(e,r))||n.push(r);return{arrayValue:{values:n}}}class vl extends hl{constructor(e){super(),this.elements=e}}function _l(e,t){let n=Sl(t);for(const r of e.elements)n=n.filter(e=>!Fo(e,r));return{arrayValue:{values:n}}}class bl extends hl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wl(e){return bo(e.integerValue||e.doubleValue)}function Sl(e){return Qo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class El{constructor(e,t){this.version=e,this.transformResults=t}}class kl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kl}static exists(e){return new kl(void 0,e)}static updateTime(e){return new kl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Tl{}function xl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jl(e.key,kl.none()):new Rl(e.key,e.data,kl.none());{const n=e.data,r=ta.empty();let i=new fo(ts.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Dl(e.key,r,new mo(i.toArray()),kl.none())}}function Il(e,t,n){e instanceof Rl?function(e,t,n){const r=e.value.clone(),i=Ll(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dl?function(e,t,n){if(!Cl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ll(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ol(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nl(e,t,n,r){return e instanceof Rl?function(e,t,n,r){if(!Cl(e.precondition,t))return n;const i=e.value.clone(),s=Ml(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dl?function(e,t,n,r){if(!Cl(e.precondition,t))return n;const i=Ml(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ol(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Cl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Al(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=pl(r.transform,e||null);null!=i&&(null===n&&(n=ta.empty()),n.set(r.field,i))}return n||null}function Pl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$i(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gl&&t instanceof gl||e instanceof vl&&t instanceof vl?$i(e.elements,t.elements,Fo):e instanceof bl&&t instanceof bl?Fo(e.Ae,t.Ae):e instanceof ml&&t instanceof ml}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rl extends Tl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dl extends Tl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ol(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ll(e,t,n){const r=new Map;Ai(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,fl(o,a,n[i]))}return r}function Ml(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,dl(e,s,t))}return r}class jl extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fl extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Il(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=xl(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ms.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sl())}isEqual(e){return this.batchId===e.batchId&&$i(this.mutations,e.mutations,(e,t)=>Pl(e,t))&&$i(this.baseMutations,e.baseMutations,(e,t)=>Pl(e,t))}}class Vl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ai(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=rl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Vl(e,t,n,r)}}class Ul{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ql{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bl,Hl;function Wl(e){switch(e){case Ri.OK:return Ii(64938);case Ri.CANCELLED:case Ri.UNKNOWN:case Ri.DEADLINE_EXCEEDED:case Ri.RESOURCE_EXHAUSTED:case Ri.INTERNAL:case Ri.UNAVAILABLE:case Ri.UNAUTHENTICATED:return!1;case Ri.INVALID_ARGUMENT:case Ri.NOT_FOUND:case Ri.ALREADY_EXISTS:case Ri.PERMISSION_DENIED:case Ri.FAILED_PRECONDITION:case Ri.ABORTED:case Ri.OUT_OF_RANGE:case Ri.UNIMPLEMENTED:case Ri.DATA_LOSS:return!0;default:return Ii(15467,{code:e})}}function Kl(e){if(void 0===e)return Ci("GRPC error has no .code"),Ri.UNKNOWN;switch(e){case Bl.OK:return Ri.OK;case Bl.CANCELLED:return Ri.CANCELLED;case Bl.UNKNOWN:return Ri.UNKNOWN;case Bl.DEADLINE_EXCEEDED:return Ri.DEADLINE_EXCEEDED;case Bl.RESOURCE_EXHAUSTED:return Ri.RESOURCE_EXHAUSTED;case Bl.INTERNAL:return Ri.INTERNAL;case Bl.UNAVAILABLE:return Ri.UNAVAILABLE;case Bl.UNAUTHENTICATED:return Ri.UNAUTHENTICATED;case Bl.INVALID_ARGUMENT:return Ri.INVALID_ARGUMENT;case Bl.NOT_FOUND:return Ri.NOT_FOUND;case Bl.ALREADY_EXISTS:return Ri.ALREADY_EXISTS;case Bl.PERMISSION_DENIED:return Ri.PERMISSION_DENIED;case Bl.FAILED_PRECONDITION:return Ri.FAILED_PRECONDITION;case Bl.ABORTED:return Ri.ABORTED;case Bl.OUT_OF_RANGE:return Ri.OUT_OF_RANGE;case Bl.UNIMPLEMENTED:return Ri.UNIMPLEMENTED;case Bl.DATA_LOSS:return Ri.DATA_LOSS;default:return Ii(39323,{code:e})}}(Hl=Bl||(Bl={}))[Hl.OK=0]="OK",Hl[Hl.CANCELLED=1]="CANCELLED",Hl[Hl.UNKNOWN=2]="UNKNOWN",Hl[Hl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hl[Hl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hl[Hl.NOT_FOUND=5]="NOT_FOUND",Hl[Hl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hl[Hl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hl[Hl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hl[Hl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hl[Hl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hl[Hl.ABORTED=10]="ABORTED",Hl[Hl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hl[Hl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hl[Hl.INTERNAL=13]="INTERNAL",Hl[Hl.UNAVAILABLE=14]="UNAVAILABLE",Hl[Hl.DATA_LOSS=15]="DATA_LOSS";let Gl=null;function Ql(){return new TextEncoder}const Yl=new ii([4294967295,4294967295],0);function $l(e){const t=Ql().encode(e),n=new si;return n.update(t),new Uint8Array(n.digest())}function Xl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ii([n,r],0),new ii([i,s],0)]}class Jl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Zl("Invalid padding: ".concat(t));if(n<0)throw new Zl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Zl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Zl("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=ii.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ii.fromNumber(n)));return 1===r.compare(Yl)&&(r=new ii([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=$l(e),[n,r]=Xl(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Jl(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=$l(e),[n,r]=Xl(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ec{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ec(ms.min(),r,new co(Wi),$a(),sl())}}class tc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new tc(n,t,sl(),sl(),sl())}}class nc{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class rc{constructor(e,t){this.targetId=e,this.Ce=t}}class ic{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class sc{constructor(){this.ve=0,this.Fe=lc(),this.Me=yo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=sl(),t=sl(),n=sl();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ii(38017,{changeType:i})}}),new tc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=lc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ai(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oc{constructor(e){this.Ge=e,this.ze=new Map,this.je=$a(),this.Je=ac(),this.He=ac(),this.Ye=new co(Wi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ii(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Aa(s))if(0===n){const e=new ns(s.path);this.et(t,e,ra.newNoDocument(e,ms.min()))}else Ai(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Gl)||void 0===i||i.lt(function(e,t,n,r,i){var s,o,a,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=wo(n).toUint8Array()}catch(e){if(e instanceof go)return Ti("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Jl(s,r,i)}catch(e){return Ti(e instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Aa(i.target)){const t=new ns(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ra.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=sl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ec(e,t,this.Ye,this.je,n);return this.je=$a(),this.Je=ac(),this.He=ac(),this.Ye=new co(Wi),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new fo(Wi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new fo(Wi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ki("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ac(){return new co(ns.comparator)}function lc(){return new co(ns.comparator)}const cc={asc:"ASCENDING",desc:"DESCENDING"},uc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hc={and:"AND",or:"OR"};class dc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fc(e,t){return e.useProto3Json||As(t)?t:{value:t}}function pc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function mc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gc(e,t){return pc(e,t.toTimestamp())}function yc(e){return Ai(!!e,49232),ms.fromTimestamp(function(e){const t=_o(e);return new ps(t.seconds,t.nanos)}(e))}function vc(e,t){return _c(e,t).canonicalString()}function _c(e,t){const n=function(e){return new Zi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bc(e){const t=Zi.fromString(e);return Ai(Vc(t),10190,{key:t.toString()}),t}function wc(e,t){return vc(e.databaseId,t.path)}function Sc(e,t){const n=bc(t);if(n.get(1)!==e.databaseId.projectId)throw new Di(Ri.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Di(Ri.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ns(Tc(n))}function Ec(e,t){return vc(e.databaseId,t)}function kc(e){const t=bc(e);return 4===t.length?Zi.emptyPath():Tc(t)}function Cc(e){return new Zi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Tc(e){return Ai(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function xc(e,t,n){return{name:wc(e,t),fields:n.value.mapValue.fields}}function Ic(e,t){let n;if(t instanceof Rl)n={update:xc(e,t.key,t.value)};else if(t instanceof jl)n={delete:wc(e,t.key)};else if(t instanceof Dl)n={update:xc(e,t.key,t.data),updateMask:zc(t.fieldMask)};else{if(!(t instanceof Fl))return Ii(16599,{Vt:t.type});n={verify:wc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ml)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ii(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ii(27497)}(e,t.precondition)),n}function Nc(e,t){return{documents:[Ec(e,t.path)]}}function Ac(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ec(e,i);const s=function(e){if(0!==e.length)return Fc(ha.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Mc(e.field),direction:Dc(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Pc(e){let t=kc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ai(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Rc(e);return t instanceof ha&&fa(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new aa(jc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,As(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ia(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ia(n,t)}(n.endAt)),Ra(t,i,o,s,a,"F",l,c)}function Rc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=jc(e.unaryFilter.field);return ua.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=jc(e.unaryFilter.field);return ua.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jc(e.unaryFilter.field);return ua.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jc(e.unaryFilter.field);return ua.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ii(61313);default:return Ii(60726)}}(e):void 0!==e.fieldFilter?function(e){return ua.create(jc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ii(58110);default:return Ii(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ha.create(e.compositeFilter.filters.map(e=>Rc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ii(1026)}}(e.compositeFilter.op))}(e):Ii(30097,{filter:e})}function Dc(e){return cc[e]}function Oc(e){return uc[e]}function Lc(e){return hc[e]}function Mc(e){return{fieldPath:e.canonicalString()}}function jc(e){return ts.fromServerFormat(e.fieldPath)}function Fc(e){return e instanceof ua?function(e){if("=="===e.op){if($o(e.value))return{unaryFilter:{field:Mc(e.field),op:"IS_NAN"}};if(Yo(e.value))return{unaryFilter:{field:Mc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($o(e.value))return{unaryFilter:{field:Mc(e.field),op:"IS_NOT_NAN"}};if(Yo(e.value))return{unaryFilter:{field:Mc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mc(e.field),op:Oc(e.op),value:e.value}}}(e):e instanceof ha?function(e){const t=e.getFilters().map(e=>Fc(e));return 1===t.length?t[0]:{compositeFilter:{op:Lc(e.op),filters:t}}}(e):Ii(54877,{filter:e})}function zc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Vc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Uc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ms.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ms.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yo.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Uc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Uc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qc{constructor(e){this.yt=e}}function Bc(e){const t=Pc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Va(t,t.limit,"L"):t}class Hc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bo(e.integerValue));else if("doubleValue"in e){const n=bo(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ps(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=_o(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(wo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?ea(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Jo(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ii(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Mo,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(bo(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ns.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Hc.Kt=new Hc;class Wc{constructor(){this.Cn=new Kc}addToCollectionParentIndex(e,t){return this.Cn.add(t),Cs.resolve()}getCollectionParents(e,t){return Cs.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Cs.resolve()}deleteFieldIndex(e,t){return Cs.resolve()}deleteAllFieldIndexes(e){return Cs.resolve()}createTargetIndexes(e,t){return Cs.resolve()}getDocumentsMatchingTarget(e,t){return Cs.resolve(null)}getIndexType(e,t){return Cs.resolve(0)}getFieldIndexes(e,t){return Cs.resolve([])}getNextCollectionGroupToUpdate(e){return Cs.resolve(null)}getMinOffset(e,t){return Cs.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return Cs.resolve(bs.min())}updateCollectionGroup(e,t,n){return Cs.resolve()}updateIndexEntries(e,t){return Cs.resolve()}}class Kc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fo(Zi.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fo(Zi.comparator)).toArray()}}new Uint8Array(0);const Gc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qc=41943040;class Yc{static withCacheSize(e){return new Yc(e,Yc.DEFAULT_COLLECTION_PERCENTILE,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Yc.DEFAULT_COLLECTION_PERCENTILE=10,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yc.DEFAULT=new Yc(Qc,Yc.DEFAULT_COLLECTION_PERCENTILE,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yc.DISABLED=new Yc(-1,0,0);class $c{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $c(0)}static cr(){return new $c(-1)}}const Xc="LruGarbageCollector",Jc=1048576;function Zc(e,t){let[n,r]=e,[i,s]=t;const o=Wi(n,i);return 0===o?Wi(r,s):o}class eu{constructor(e){this.Ir=e,this.buffer=new fo(Zc),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Zc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ki(Xc,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xs(e)?ki(Xc,"Ignoring IndexedDB error during garbage collection: ",e):await ks(e)}await this.Vr(3e5)})}}class nu{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Cs.resolve(Is.ce);const n=new eu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ki("LruGarbageCollector","Garbage collection skipped; disabled"),Cs.resolve(Gc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ki("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Gc):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ki("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ei()<=Ln.DEBUG&&ki("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Cs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ru(e,t){return new nu(e,t)}class iu{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ra.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Cs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class su{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ou{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Nl(n.mutation,e,mo.empty(),ps.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,sl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sl();const r=el();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ja();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=el();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,sl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=$a();const s=nl(),o=nl();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Dl)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Nl(o.mutation,t,o.mutation.getFieldMask(),ps.now())):s.set(t.key,mo.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new su(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=nl();let r=new co((e,t)=>e-t),i=sl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||mo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||sl()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=tl();l.forEach(e=>{if(!i.has(e)){const r=xl(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Cs.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ns.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):La(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Cs.resolve(el());let o=gs,a=i;return s.next(t=>Cs.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Cs.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,sl())).next(e=>({batchId:o,changes:Za(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ns(t)).next(e=>{let t=Ja();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ja();return this.indexManager.getCollectionParents(e,i).next(o=>Cs.forEach(o,o=>{const a=function(e,t){return new Pa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ra.newInvalidDocument(r)))});let n=Ja();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Nl(s.mutation,r,mo.empty(),ps.now()),Ha(t,r)&&(n=n.insert(e,r))}),n})}}class au{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Cs.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:yc(e.createTime)}}(t)),Cs.resolve()}getNamedQuery(e,t){return Cs.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Bc(e.bundledQuery),readTime:yc(e.readTime)}}(t)),Cs.resolve()}}class lu{constructor(){this.overlays=new co(ns.comparator),this.qr=new Map}getOverlay(e,t){return Cs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=el();return Cs.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Cs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Cs.resolve()}getOverlaysForCollection(e,t,n){const r=el(),i=t.length+1,s=new ns(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Cs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new co((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=el(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=el(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Cs.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ul(t,n));let i=this.qr.get(t);void 0===i&&(i=sl(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class cu{constructor(){this.sessionToken=yo.EMPTY_BYTE_STRING}getSessionToken(e){return Cs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Cs.resolve()}}class uu{constructor(){this.Qr=new fo(hu.$r),this.Ur=new fo(hu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new hu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new hu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ns(new Zi([])),n=new hu(t,e),r=new hu(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ns(new Zi([])),n=new hu(t,e),r=new hu(t,e+1);let i=sl();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new hu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class hu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ns.comparator(e.key,t.key)||Wi(e.Yr,t.Yr)}static Kr(e,t){return Wi(e.Yr,t.Yr)||ns.comparator(e.key,t.key)}}class du{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new fo(hu.$r)}checkEmpty(e){return Cs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zl(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new hu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Cs.resolve(s)}lookupMutationBatch(e,t){return Cs.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Cs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Cs.resolve(0===this.mutationQueue.length?Ns:this.tr-1)}getAllMutationBatches(e){return Cs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new hu(t,0),r=new hu(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Cs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fo(Wi);return t.forEach(e=>{const t=new hu(e,0),r=new hu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Cs.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ns.isDocumentKey(i)||(i=i.child(""));const s=new hu(new ns(i),0);let o=new fo(Wi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Cs.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ai(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Cs.forEach(t.mutations,r=>{const i=new hu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new hu(t,0),r=this.Zr.firstAfterOrEqual(n);return Cs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Cs.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fu{constructor(e){this.ri=e,this.docs=new co(ns.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Cs.resolve(n?n.document.mutableCopy():ra.newInvalidDocument(t))}getEntries(e,t){let n=$a();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ra.newInvalidDocument(e))}),Cs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=$a();const s=t.path,o=new ns(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ws(_s(o),n)<=0||(r.has(o.key)||Ha(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Cs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ii(9500)}ii(e,t){return Cs.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new pu(this)}getSize(e){return Cs.resolve(this.size)}}class pu extends iu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Cs.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class mu{constructor(e){this.persistence=e,this.si=new Qa(e=>Ia(e),Na),this.lastRemoteSnapshotVersion=ms.min(),this.highestTargetId=0,this.oi=0,this._i=new uu,this.targetCount=0,this.ai=$c.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Cs.resolve()}getLastRemoteSnapshotVersion(e){return Cs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Cs.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Cs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Cs.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new $c(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Cs.resolve()}updateTargetData(e,t){return this.Pr(t),Cs.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Cs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Cs.waitFor(i).next(()=>r)}getTargetCount(e){return Cs.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Cs.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Cs.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Cs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Cs.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Cs.resolve(n)}containsKey(e,t){return Cs.resolve(this._i.containsKey(t))}}class gu{constructor(e,t){this.ui={},this.overlays={},this.ci=new Is(0),this.li=!1,this.li=!0,this.hi=new cu,this.referenceDelegate=e(this),this.Pi=new mu(this),this.indexManager=new Wc,this.remoteDocumentCache=function(e){return new fu(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new qc(t),this.Ii=new au(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new du(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ki("MemoryPersistence","Starting transaction:",e);const r=new yu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Cs.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class yu extends Es{constructor(e){super(),this.currentSequenceNumber=e}}class vu{constructor(e){this.persistence=e,this.Ri=new uu,this.Vi=null}static mi(e){return new vu(e)}get fi(){if(this.Vi)return this.Vi;throw Ii(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Cs.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Cs.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Cs.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cs.forEach(this.fi,n=>{const r=ns.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ms.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Cs.or([()=>Cs.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _u{constructor(e,t){this.persistence=e,this.pi=new Qa(e=>Os(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ru(this,t)}static mi(e,t){return new _u(e,t)}Ei(){}di(e){return Cs.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Cs.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Cs.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ms.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Cs.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Cs.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Cs.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Cs.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wo(e.data.value)),t}br(e,t,n){return Cs.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Cs.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=sl(),r=sl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new bu(e,t.fromCache,n,r)}}class wu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Su{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=dn()?8:Ts(ln())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new wu;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ei()<=Ln.DEBUG&&ki("QueryEngine","SDK will not create cache indexes for query:",Ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Cs.resolve()):(Ei()<=Ln.DEBUG&&ki("QueryEngine","Query:",Ba(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ei()<=Ln.DEBUG&&ki("QueryEngine","The SDK decides to create cache indexes for query:",Ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ja(t))):Cs.resolve())}ys(e,t){if(Oa(t))return Cs.resolve(null);let n=ja(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Va(t,null,"F"),n=ja(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=sl(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Va(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Oa(t)||r.isEqual(ms.min())?Cs.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Cs.resolve(null):(Ei()<=Ln.DEBUG&&ki("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ba(t)),this.vs(e,s,t,vs(r,gs)).next(e=>e))})}Ds(e,t){let n=new fo(Ka(e));return t.forEach((t,r)=>{Ha(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Ei()<=Ln.DEBUG&&ki("QueryEngine","Using full collection scan to execute query:",Ba(t)),this.ps.getDocumentsMatchingQuery(e,t,bs.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Eu="LocalStore";class ku{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new co(Wi),this.xs=new Qa(e=>Ia(e),Na),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ou(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Cu(e,t,n,r){return new ku(e,t,n,r)}async function Tu(e,t){const n=Pi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=sl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function xu(e){const t=Pi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Iu(e,t,n){let r=sl(),i=sl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=$a();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ms.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ki(Eu,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Nu(e,t){const n=Pi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ns),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Au(e,t){const n=Pi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Cs.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Uc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Pu(e,t,n){const r=Pi(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!xs(e))throw e;ki(Eu,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ru(e,t,n){const r=Pi(e);let i=ms.min(),s=sl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Pi(e),i=r.xs.get(n);return void 0!==i?Cs.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,ja(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ms.min(),n?s:sl())).next(e=>(Du(r,Wa(t),e),{documents:e,Qs:s})))}function Du(e,t,n){let r=e.Os.get(t)||ms.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Ou{constructor(){this.activeTargetIds=al()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lu{constructor(){this.Mo=new Ou,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ou,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mu{Oo(e){}shutdown(){}}const ju="ConnectivityMonitor";class Fu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ki(ju,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ki(ju,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zu=null;function Vu(){return null===zu?zu=268435456+Math.round(2147483648*Math.random()):zu++,"0x"+zu.toString(16)}const Uu="RestConnection",qu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bu{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Ao?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Vu(),o=this.zo(e,t.toUriEncodedString());ki(Uu,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=tn(l);return this.Jo(e,o,a,n,c).then(t=>(ki(Uu,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Ti(Uu,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+wi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=qu[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Hu{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wu="WebChannelConnection";class Ku extends Bu{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Vu();return new Promise((i,o)=>{const a=new li;a.setWithCredentials(!0),a.listenOnce(ui.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case hi.NO_ERROR:const n=a.getResponseJson();ki(Wu,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case hi.TIMEOUT:ki(Wu,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Di(Ri.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const r=a.getStatus();if(ki(Wu,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ri).indexOf(t)>=0?t:Ri.UNKNOWN}(n.status);o(new Di(e,n.message))}else o(new Di(Ri.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Di(Ri.UNAVAILABLE,"Connection failed."));break;default:Ii(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{ki(Wu,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);ki(Wu,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Vu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mi(),o=pi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");ki(Wu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new Hu({Yo:t=>{d?ki(Wu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ki(Wu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),ki(Wu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ci.EventType.OPEN,()=>{d||(ki(Wu,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,ci.EventType.CLOSE,()=>{d||(d=!0,ki(Wu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,ci.EventType.ERROR,t=>{d||(d=!0,Ti(Wu,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Di(Ri.UNAVAILABLE,"The operation could not be completed")))}),p(u,ci.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];Ai(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ki(Wu,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Bl[e];if(void 0!==t)return Kl(t)}(t),i=o.message;void 0===n&&(n=Ri.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new Di(n,i)),u.close()}else ki(Wu,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,fi.STAT_EVENT,t=>{t.stat===di.PROXY?ki(Wu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===di.NOPROXY&&ki(Wu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Gu(){return"undefined"!=typeof document?document:null}function Qu(e){return new dc(e,!0)}class Yu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ki("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $u="PersistentStream";class Xu{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yu(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Ri.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ri.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Di(Ri.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ki($u,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ki($u,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ju extends Xu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ii(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ai(void 0===t||"string"==typeof t,58123),yo.fromBase64String(t||"")):(Ai(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),yo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ri.UNKNOWN:Kl(e.code);return new Di(t,e.message||"")}(o);n=new ic(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sc(e,r.document.name),s=yc(r.document.updateTime),o=r.document.createTime?yc(r.document.createTime):ms.min(),a=new ta({mapValue:{fields:r.document.fields}}),l=ra.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new nc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Sc(e,r.document),s=r.readTime?yc(r.readTime):ms.min(),o=ra.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Sc(e,r.document),s=r.removedTargetIds||[];n=new nc([],s,i,null)}else{if(!("filter"in t))return Ii(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ql(r,i),o=e.targetId;n=new rc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ms.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ms.min():t.readTime?yc(t.readTime):ms.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Cc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Aa(r)?{documents:Nc(e,r)}:{query:Ac(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=mc(e,t.resumeToken);const r=fc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ms.min())>0){n.readTime=pc(e,t.snapshotVersion.toTimestamp());const r=fc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ii(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Cc(this.serializer),t.removeTarget=e,this.q_(t)}}class Zu extends Xu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ai(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ai(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ai(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ai(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?yc(e.updateTime):yc(t);return n.isEqual(ms.min())&&(n=yc(t)),new El(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=yc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Cc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ic(this.serializer,e))};this.q_(t)}}class eh{}class th extends eh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Di(Ri.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,_c(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ri.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Di(Ri.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,_c(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ri.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Di(Ri.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class nh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Ci(t),this.aa=!1):ki("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const rh="RemoteStore";class ih{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{fh(this)&&(ki(rh,"Restarting streams for network reachability change."),await async function(e){const t=Pi(e);t.Ea.add(4),await oh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await sh(t)}(this))})}),this.Ra=new nh(n,r)}}async function sh(e){if(fh(e))for(const t of e.da)await t(!0)}async function oh(e){for(const t of e.da)await t(!1)}function ah(e,t){const n=Pi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),dh(n)?hh(n):Rh(n).O_()&&ch(n,t))}function lh(e,t){const n=Pi(e),r=Rh(n);n.Ia.delete(t),r.O_()&&uh(n,t),0===n.Ia.size&&(r.O_()?r.L_():fh(n)&&n.Ra.set("Unknown"))}function ch(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ms.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rh(e).Y_(t)}function uh(e,t){e.Va.Ue(t),Rh(e).Z_(t)}function hh(e){e.Va=new oc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Rh(e).start(),e.Ra.ua()}function dh(e){return fh(e)&&!Rh(e).x_()&&e.Ia.size>0}function fh(e){return 0===Pi(e).Ea.size}function ph(e){e.Va=void 0}async function mh(e){e.Ra.set("Online")}async function gh(e){e.Ia.forEach((t,n)=>{ch(e,t)})}async function yh(e,t){ph(e),dh(e)?(e.Ra.ha(t),hh(e)):e.Ra.set("Unknown")}async function vh(e,t,n){if(e.Ra.set("Online"),t instanceof ic&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){ki(rh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await _h(e,n)}else if(t instanceof nc?e.Va.Ze(t):t instanceof rc?e.Va.st(t):e.Va.tt(t),!n.isEqual(ms.min()))try{const t=await xu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(yo.EMPTY_BYTE_STRING,r.snapshotVersion)),uh(e,t);const i=new Uc(r.target,t,n,r.sequenceNumber);ch(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ki(rh,"Failed to raise snapshot:",t),await _h(e,t)}}async function _h(e,t,n){if(!xs(t))throw t;e.Ea.add(1),await oh(e),e.Ra.set("Offline"),n||(n=()=>xu(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ki(rh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await sh(e)})}function bh(e,t){return t().catch(n=>_h(e,n,t))}async function wh(e){const t=Pi(e),n=Dh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ns;for(;Sh(t);)try{const e=await Nu(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Eh(t,e)}catch(e){await _h(t,e)}kh(t)&&Ch(t)}function Sh(e){return fh(e)&&e.Ta.length<10}function Eh(e,t){e.Ta.push(t);const n=Dh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function kh(e){return fh(e)&&!Dh(e).x_()&&e.Ta.length>0}function Ch(e){Dh(e).start()}async function Th(e){Dh(e).ra()}async function xh(e){const t=Dh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Ih(e,t,n){const r=e.Ta.shift(),i=Vl.from(r,t,n);await bh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await wh(e)}async function Nh(e,t){t&&Dh(e).X_&&await async function(e,t){if(function(e){return Wl(e)&&e!==Ri.ABORTED}(t.code)){const n=e.Ta.shift();Dh(e).B_(),await bh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await wh(e)}}(e,t),kh(e)&&Ch(e)}async function Ah(e,t){const n=Pi(e);n.asyncQueue.verifyOperationInProgress(),ki(rh,"RemoteStore received new credentials");const r=fh(n);n.Ea.add(3),await oh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await sh(n)}async function Ph(e,t){const n=Pi(e);t?(n.Ea.delete(2),await sh(n)):t||(n.Ea.add(2),await oh(n),n.Ra.set("Unknown"))}function Rh(e){return e.ma||(e.ma=function(e,t,n){const r=Pi(e);return r.sa(),new Ju(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:mh.bind(null,e),t_:gh.bind(null,e),r_:yh.bind(null,e),H_:vh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),dh(e)?hh(e):e.Ra.set("Unknown")):(await e.ma.stop(),ph(e))})),e.ma}function Dh(e){return e.fa||(e.fa=function(e,t,n){const r=Pi(e);return r.sa(),new Zu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Th.bind(null,e),r_:Nh.bind(null,e),ta:xh.bind(null,e),na:Ih.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await wh(e)):(await e.fa.stop(),e.Ta.length>0&&(ki(rh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Oh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Oh(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Di(Ri.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(e,t){if(Ci("AsyncQueue","".concat(t,": ").concat(e)),xs(e))return new Di(Ri.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Mh{static emptySet(e){return new Mh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ns.comparator(t.key,n.key):(e,t)=>ns.comparator(e.key,t.key),this.keyedMap=Ja(),this.sortedSet=new co(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Mh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class jh{constructor(){this.ga=new co(ns.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ii(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Fh{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Fh(e,t,Mh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ua(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class zh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Vh{constructor(){this.queries=Uh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Pi(e),r=n.queries;n.queries=Uh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Di(Ri.ABORTED,"Firestore shutting down"))}}function Uh(){return new Qa(e=>qa(e),Ua)}async function qh(e,t){const n=Pi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new zh,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Lh(e,"Initialization of query '".concat(Ba(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Kh(n)}async function Bh(e,t){const n=Pi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hh(e,t){const n=Pi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Kh(n)}function Wh(e,t,n){const r=Pi(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Kh(e){e.Ca.forEach(e=>{e.next()})}var Gh,Qh;(Qh=Gh||(Gh={})).Ma="default",Qh.Cache="cache";class Yh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Fh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gh.Cache}}class $h{constructor(e){this.key=e}}class Xh{constructor(e){this.key=e}}class Jh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=sl(),this.mutatedKeys=sl(),this.eu=Ka(e),this.tu=new Mh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new jh,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ha(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ii(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new Fh(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=sl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Xh(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new $h(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=sl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Zh="SyncEngine";class ed{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class td{constructor(e){this.key=e,this.hu=!1}}class nd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Qa(e=>qa(e),Ua),this.Iu=new Map,this.Eu=new Set,this.du=new co(ns.comparator),this.Au=new Map,this.Ru=new uu,this.Vu={},this.mu=new Map,this.fu=$c.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function rd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=kd(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await sd(r,t,n,!0),i}async function id(e,t){const n=kd(e);await sd(n,t,!0,!1)}async function sd(e,t,n,r){const i=await Au(e.localStore,ja(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await od(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&ah(e.remoteStore,i),a}async function od(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ru(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return vd(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await Ru(e.localStore,t,!0),o=new Jh(t,s.Qs),a=o.ru(s.documents),l=tc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);vd(e,n,c.au);const u=new ed(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ad(e,t,n){const r=Pi(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Ua(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lh(r.remoteStore,i.targetId),gd(r,i.targetId)}).catch(ks)):(gd(r,i.targetId),await Pu(r.localStore,i.targetId,!0))}async function ld(e,t){const n=Pi(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lh(n.remoteStore,r.targetId))}async function cd(e,t){const n=Pi(e);try{const e=await function(e,t){const n=Pi(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(yo.EMPTY_BYTE_STRING,ms.min()).withLastLimboFreeSnapshotVersion(ms.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=$a(),l=sl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Iu(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ms.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Cs.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ai(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ai(r.hu,14607):e.removedDocuments.size>0&&(Ai(r.hu,42227),r.hu=!1))}),await wd(n,e,t)}catch(e){await ks(e)}}function ud(e,t,n){const r=Pi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Pi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Kh(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function hd(e,t,n){const r=Pi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new co(ns.comparator);e=e.insert(s,ra.newNoDocument(s,ms.min()));const n=sl().add(s),i=new ec(ms.min(),new Map,new co(Wi),e,n);await cd(r,i),r.du=r.du.remove(s),r.Au.delete(t),bd(r)}else await Pu(r.localStore,t,!1).then(()=>gd(r,t,n)).catch(ks)}async function dd(e,t){const n=Pi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Pi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Cs.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ai(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=sl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);md(n,r,null),pd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wd(n,e)}catch(e){await ks(e)}}async function fd(e,t,n){const r=Pi(e);try{const e=await function(e,t){const n=Pi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ai(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);md(r,t,n),pd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await wd(r,e)}catch(n){await ks(n)}}function pd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function md(e,t,n){const r=Pi(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function gd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||yd(e,t)})}function yd(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(lh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),bd(e))}function vd(e,t,n){for(const r of n)r instanceof $h?(e.Ru.addReference(r.key,t),_d(e,r)):r instanceof Xh?(ki(Zh,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||yd(e,r.key)):Ii(19791,{wu:r})}function _d(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(ki(Zh,"New document in limbo: "+n),e.Eu.add(r),bd(e))}function bd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ns(Zi.fromString(t)),r=e.fu.next();e.Au.set(r,new td(n)),e.du=e.du.insert(n,r),ah(e.remoteStore,new Uc(ja(Da(n.path)),r,"TargetPurposeLimboResolution",Is.ce))}}async function wd(e,t,n){const r=Pi(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=bu.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=Pi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Cs.forEach(t,t=>Cs.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Cs.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!xs(e))throw e;ki(Eu,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Sd(e,t){const n=Pi(e);if(!n.currentUser.isEqual(t)){ki(Zh,"User change. New user:",t.toKey());const e=await Tu(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Di(Ri.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wd(n,e.Ls)}}function Ed(e,t){const n=Pi(e),r=n.Au.get(t);if(r&&r.hu)return sl().add(r.key);{let e=sl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function kd(e){const t=Pi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ed.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hd.bind(null,t),t.Pu.H_=Hh.bind(null,t.eventManager),t.Pu.yu=Wh.bind(null,t.eventManager),t}function Cd(e){const t=Pi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fd.bind(null,t),t}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Cu(this.persistence,new Su,e.initialUser,this.serializer)}Cu(e){return new gu(vu.mi,this.serializer)}Du(e){return new Lu}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class xd extends Td{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ai(this.persistence.referenceDelegate instanceof _u,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new tu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Yc.withCacheSize(this.cacheSizeBytes):Yc.DEFAULT;return new gu(e=>_u.mi(e,t),this.serializer)}}class Id{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ud(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sd.bind(null,this.syncEngine),await Ph(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Vh}createDatastore(e){const t=Qu(e.databaseInfo.databaseId),n=function(e){return new Ku(e)}(e.databaseInfo);return function(e,t,n,r){return new th(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ih(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ud(this.syncEngine,e,0),Fu.v()?new Fu:new Mu)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new nd(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Pi(e);ki(rh,"RemoteStore shutting down."),t.Ea.add(5),await oh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Id.provider={build:()=>new Id};class Nd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Ad="FirestoreClient";class Pd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=bi.UNAUTHENTICATED,this.clientId=Hi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ki(Ad,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ki(Ad,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Lh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Rd(e,t){e.asyncQueue.verifyOperationInProgress(),ki(Ad,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Tu(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Dd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Od(e);ki(Ad,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ah(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ah(t.remoteStore,n)),e._onlineComponents=t}async function Od(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ki(Ad,"Using user provided OfflineComponentProvider");try{await Rd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ri.FAILED_PRECONDITION||e.code===Ri.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ti("Error using user provided cache. Falling back to memory cache: "+n),await Rd(e,new Td)}}else ki(Ad,"Using default OfflineComponentProvider"),await Rd(e,new xd(void 0));return e._offlineComponents}async function Ld(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ki(Ad,"Using user provided OnlineComponentProvider"),await Dd(e,e._uninitializedComponentsProvider._online)):(ki(Ad,"Using default OnlineComponentProvider"),await Dd(e,new Id))),e._onlineComponents}function Md(e){return Ld(e).then(e=>e.syncEngine)}async function jd(e){const t=await Ld(e),n=t.eventManager;return n.onListen=rd.bind(null,t.syncEngine),n.onUnlisten=ad.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=id.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ld.bind(null,t.syncEngine),n}function Fd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Nd({next:n=>{s.Nu(),t.enqueueAndForget(()=>Bh(e,o)),n.fromCache&&"server"===r.source?i.reject(new Di(Ri.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Yh(n,s,{includeMetadataChanges:!0,qa:!0});return qh(e,o)}(await jd(e),e.asyncQueue,t,n,r)),r.promise}function zd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Vd=new Map,Ud="firestore.googleapis.com",qd=!0;class Bd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Di(Ri.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ud,this.ssl=qd}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:qd;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Qc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Jc)throw new Di(Ri.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Di(Ri.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Di(Ri.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Di(Ri.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Di(Ri.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Di(Ri.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Di(Ri.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mi;switch(e.type){case"firstParty":return new Vi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Di(Ri.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vd.get(e);t&&(ki("ComponentProvider","Removing Datastore"),Vd.delete(e),t.terminate())}(this),Promise.resolve()}}class Wd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Wd(this.firestore,e,this._query)}}class Kd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kd(this.firestore,e,this._key)}toJSON(){return{type:Kd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(hs(t,Kd._jsonSchema))return new Kd(e,n||null,new ns(Zi.fromString(t.referencePath)))}}Kd._jsonSchemaVersion="firestore/documentReference/1.0",Kd._jsonSchema={type:us("string",Kd._jsonSchemaVersion),referencePath:us("string")};class Gd extends Wd{constructor(e,t,n){super(e,t,Da(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kd(this.firestore,null,new ns(e))}withConverter(e){return new Gd(this.firestore,e,this._path)}}function Qd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Nn(e),rs("collection","path",t),e instanceof Hd){const n=Zi.fromString(t,...r);return ss(n),new Gd(e,null,n)}{if(!(e instanceof Kd||e instanceof Gd))throw new Di(Ri.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zi.fromString(t,...r));return ss(n),new Gd(e.firestore,null,n)}}const Yd="AsyncQueue";class $d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yu(this,"async_queue_retry"),this._c=()=>{const e=Gu();e&&ki(Yd,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Gu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Gu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Oi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(Nb){if(!xs(Nb))throw Nb;ki(Yd,"Operation failed with retryable error: "+Nb)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",Xd(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Oh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ii(47125,{Pc:Xd(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xd(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Jd extends Hd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new $d,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $d(e),this._firestoreClient=void 0,await e}}}function Zd(e){if(e._terminated)throw new Di(Ri.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ef(e),e._firestoreClient}function ef(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new No(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,zd(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Pd(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class tf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tf(yo.fromBase64String(e))}catch(e){throw new Di(Ri.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new tf(yo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hs(e,tf._jsonSchema))return tf.fromBase64String(e.bytes)}}tf._jsonSchemaVersion="firestore/bytes/1.0",tf._jsonSchema={type:us("string",tf._jsonSchemaVersion),bytes:us("string")};class nf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Di(Ri.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rf{constructor(e){this._methodName=e}}class sf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Di(Ri.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Di(Ri.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wi(this._lat,e._lat)||Wi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sf._jsonSchemaVersion}}static fromJSON(e){if(hs(e,sf._jsonSchema))return new sf(e.latitude,e.longitude)}}sf._jsonSchemaVersion="firestore/geoPoint/1.0",sf._jsonSchema={type:us("string",sf._jsonSchemaVersion),latitude:us("number"),longitude:us("number")};class of{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:of._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hs(e,of._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new of(e.vectorValues);throw new Di(Ri.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}of._jsonSchemaVersion="firestore/vectorValue/1.0",of._jsonSchema={type:us("string",of._jsonSchemaVersion),vectorValues:us("object")};const af=/^__.*__$/;class lf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rl(e,this.data,t,this.fieldTransforms)}}function cf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ii(40011,{Ac:e})}}class uf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uf(h(h({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(cf(this.Ac)&&af.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qu(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new uf({Ac:e,methodName:t,Dc:n,path:ts.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function df(e){const t=e._freezeSettings(),n=Qu(e._databaseId);return new hf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ff(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);vf("Data must be an object, but it was:",o,r);const a=gf(r,o);let l,c;if(s.merge)l=new mo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=_f(t,r,n);if(!o.contains(i))throw new Di(Ri.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ef(e,i)||e.push(i)}l=new mo(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new lf(new ta(a),l,c)}function pf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mf(n,e.Cc(r?4:3,t))}function mf(e,t){if(yf(e=Nn(e)))return vf("Unsupported field value:",t,e),gf(e,t);if(e instanceof rf)return function(e,t){if(!cf(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=mf(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Nn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ul(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ps.fromDate(e);return{timestampValue:pc(t.serializer,n)}}if(e instanceof ps){const n=new ps(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pc(t.serializer,n)}}if(e instanceof sf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tf)return{bytesValue:mc(t.serializer,e._byteString)};if(e instanceof Kd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:vc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof of)return function(e,t){return{mapValue:{fields:{[Ro]:{stringValue:Lo},[Mo]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ll(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(as(e)))}(e,t)}function gf(e,t){const n={};return lo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ao(e,(e,r)=>{const i=mf(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function yf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ps||e instanceof sf||e instanceof tf||e instanceof Kd||e instanceof rf||e instanceof of)}function vf(e,t,n){if(!yf(n)||!os(n)){const r=as(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function _f(e,t,n){if((t=Nn(t))instanceof nf)return t._internalPath;if("string"==typeof t)return wf(e,t);throw Sf("Field path arguments must be of type string or ",e,!1,void 0,n)}const bf=new RegExp("[~\\*/\\[\\]]");function wf(e,t,n){if(t.search(bf)>=0)throw Sf("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new nf(...t.split("."))._internalPath}catch(r){throw Sf("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Di(Ri.INVALID_ARGUMENT,a+e+l)}function Ef(e,t){return e.some(e=>e.isEqual(t))}class kf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cf extends kf{data(){return super.data()}}function Tf(e,t){return"string"==typeof t?wf(e,t):t instanceof nf?t._internalPath:t._delegate._internalPath}function xf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Di(Ri.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class If{}class Nf extends If{}class Af extends Nf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Af(e,t,n)}_apply(e){const t=this._parse(e);return Mf(e._query,t),new Wd(e.firestore,e.converter,za(e._query,t))}_parse(e){const t=df(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Di(Ri.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Lf(o,s);const t=[];for(const n of o)t.push(Of(r,e,n));a={arrayValue:{values:t}}}else a=Of(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Lf(o,s),a=pf(n,t,o,"in"===s||"not-in"===s);return ua.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Pf extends If{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pf(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ha.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Mf(n,i),n=za(n,i)}(e._query,t),new Wd(e.firestore,e.converter,za(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Rf extends Nf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Rf(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aa(t,n)}(e._query,this._field,this._direction);return new Wd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Pa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Df extends Nf{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Df(e,t,n)}_apply(e){return new Wd(e.firestore,e.converter,Va(e._query,this._limit,this._limitType))}}function Of(e,t,n){if("string"==typeof(n=Nn(n))){if(""===n)throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!La(t)&&-1!==n.indexOf("/"))throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Zi.fromString(n));if(!ns.isDocumentKey(r))throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ko(e,new ns(r))}if(n instanceof Kd)return Ko(e,n._key);throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(as(n),"."))}function Lf(e,t){if(!Array.isArray(e)||0===e.length)throw new Di(Ri.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Mf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Di(Ri.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Di(Ri.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class jf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ii(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ao(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Mo].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>bo(e.doubleValue));return new of(n)}convertGeoPoint(e){return new sf(bo(e.latitude),bo(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=xo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Io(e));default:return null}}convertTimestamp(e){const t=_o(e);return new ps(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Zi.fromString(e);Ai(Vc(n),9688,{name:e});const r=new Po(n.get(1),n.get(3)),i=new ns(n.popFirst(5));return r.isEqual(t)||Ci("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ff(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class zf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vf extends kf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Tf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Di(Ri.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Vf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vf._jsonSchema={type:us("string",Vf._jsonSchemaVersion),bundleSource:us("string","DocumentSnapshot"),bundleName:us("string"),bundle:us("string")};class Uf extends Vf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class qf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Uf(this._firestore,this._userDataWriter,n.key,n,new zf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Di(Ri.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Uf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Uf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Bf(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Di(Ri.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Bf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ii(61501,{type:e})}}qf._jsonSchemaVersion="firestore/querySnapshot/1.0",qf._jsonSchema={type:us("string",qf._jsonSchemaVersion),bundleSource:us("string","QuerySnapshot"),bundleName:us("string"),bundle:us("string")};class Hf extends jf{constructor(e){super(),this.firestore=e}convertBytes(e){return new tf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kd(this.firestore,null,t)}}function Wf(e,t){const n=ls(e.firestore,Jd),r=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Nn(e),1===arguments.length&&(t=Hi.newId()),rs("doc","path",t),e instanceof Hd){const n=Zi.fromString(t,...r);return is(n),new Kd(e,null,new ns(n))}{if(!(e instanceof Kd||e instanceof Gd))throw new Di(Ri.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zi.fromString(t,...r));return is(n),new Kd(e.firestore,e instanceof Gd?e.converter:null,new ns(n))}}(e),i=Ff(e.converter,t);return Kf(n,[ff(df(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kl.exists(!1))]).then(()=>r)}function Kf(e,t){return function(e,t){const n=new Oi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Cd(e);try{const e=await function(e,t){const n=Pi(e),r=ps.now(),i=t.reduce((e,t)=>e.add(t.key),sl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=$a(),l=sl();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Al(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Dl(e.key,t,na(t.value.mapValue),kl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Za(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new co(Wi)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await wd(r,e.changes),await wh(r.remoteStore)}catch(e){const t=Lh(e,"Failed to persist write");n.reject(t)}}(await Md(e),t,n)),n.promise}(Zd(e),t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){wi=e}(Hr),zr(new An("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Jd(new Fi(e.getProvider("auth-internal")),new qi(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Di(Ri.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(e.options.projectId,t)}(s,r),s);return i=h({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Gr(vi,_i,e),Gr(vi,_i,"esm2020")}();const Gf=new Map,Qf={activated:!1,tokenObservers:[]},Yf={initialized:!1,enabled:!1};function $f(e){return Gf.get(e)||h({},Qf)}function Xf(){return Yf}const Jf="https://content-firebaseappcheck.googleapis.com/v1",Zf=3e4,ep=96e4;class tp{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new en,this.pending.promise.catch(e=>{}),await(t=this.getNextRun(e),new Promise(e=>{setTimeout(e,t)})),this.pending.resolve(),await this.pending.promise,this.pending=new en,this.pending.promise.catch(e=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(vm){this.retryPolicy(vm)?this.process(!1).catch(()=>{}):this.stop()}var t}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const np=new mn("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"});function rp(){var e;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function ip(e){if(!$f(e).activated)throw np.create("use-before-activation",{appName:e.name})}function sp(e){const t=Math.round(e/1e3),n=Math.floor(t/86400),r=Math.floor((t-3600*n*24)/3600),i=Math.floor((t-3600*n*24-3600*r)/60),s=t-3600*n*24-3600*r-60*i;let o="";return n&&(o+=op(n)+"d:"),r&&(o+=op(r)+"h:"),o+=op(i)+"m:"+op(s)+"s",o}function op(e){return 0===e?"00":e>=10?e.toString():"0"+e}async function ap(e,t){let{url:n,body:r}=e;const i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&(i["X-Firebase-Client"]=e)}const o={method:"POST",body:JSON.stringify(r),headers:i};let a,l;try{a=await fetch(n,o)}catch(d){throw np.create("fetch-network-error",{originalErrorMessage:null===d||void 0===d?void 0:d.message})}if(200!==a.status)throw np.create("fetch-status-error",{httpStatus:a.status});try{l=await a.json()}catch(d){throw np.create("fetch-parse-error",{originalErrorMessage:null===d||void 0===d?void 0:d.message})}const c=l.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw np.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+"format: ".concat(l.ttl)});const u=1e3*Number(c[1]),h=Date.now();return{token:l.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}}function lp(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:"".concat(Jf,"/projects/").concat(n,"/apps/").concat(r,":").concat("exchangeDebugToken","?key=").concat(i),body:{debug_token:t}}}const cp="firebase-app-check-store",up="debug-token";let hp=null;function dp(){return hp||(hp=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(np.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;if(0===e.oldVersion)t.createObjectStore(cp,{keyPath:"compositeKey"})}}catch(Nb){t(np.create("storage-open",{originalErrorMessage:null===Nb||void 0===Nb?void 0:Nb.message}))}}),hp)}async function fp(e,t){const n=(await dp()).transaction(cp,"readwrite"),r=n.objectStore(cp).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(np.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})}async function pp(e){const t=(await dp()).transaction(cp,"readonly"),n=t.objectStore(cp).get(e);return new Promise((e,r)=>{n.onsuccess=t=>{const n=t.target.result;e(n?n.value:void 0)},t.onerror=e=>{var t;r(np.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}})}function mp(e){return"".concat(e.options.appId,"-").concat(e.name)}const gp=new Vn("@firebase/app-check");async function yp(e){if(fn()){let t;try{t=await function(e){return pp(mp(e))}(e)}catch(Nb){gp.warn("Failed to read token from IndexedDB. Error: ".concat(Nb))}return t}}function vp(e,t){return fn()?function(e,t){return fp(mp(e),t)}(e,t).catch(e=>{gp.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}async function _p(){let e;try{e=await pp(up)}catch(qs){}if(e)return e;{const e=crypto.randomUUID();return(t=e,fp(up,t)).catch(e=>gp.warn("Failed to persist debug token to IndexedDB. Error: ".concat(e))),e}var t}function bp(){return Xf().enabled}async function wp(){const e=Xf();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}const Sp={error:"UNKNOWN_ERROR"};async function Ep(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.app;ip(r);const i=$f(r);let s,o=i.token;if(o&&!Np(o)&&(i.token=void 0,o=void 0),!o){const e=await i.cachedTokenPromise;e&&(Np(e)?o=e:await vp(r,void 0))}if(!t&&o&&Np(o))return{token:o.token};let a,l=!1;if(bp())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=ap(lp(r,await wp()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const t=await i.exchangeTokenPromise;return await vp(r,t),i.token=t,{token:t.token}}catch(Nb){return Nb.code==="appCheck/".concat("throttled")||Nb.code==="appCheck/".concat("initial-throttle")?gp.warn(Nb.message):n&&gp.error(Nb),Ap(Nb)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),o=await $f(r).exchangeTokenPromise}catch(Nb){Nb.code==="appCheck/".concat("throttled")||Nb.code==="appCheck/".concat("initial-throttle")?gp.warn(Nb.message):n&&gp.error(Nb),s=Nb}return o?s?a=Np(o)?{token:o.token,internalError:s}:Ap(s):(a={token:o.token},i.token=o,await vp(r,o)):a=Ap(s),l&&Ip(r,a),a}async function kp(e){const t=e.app;ip(t);const{provider:n}=$f(t);if(bp()){const n=await wp(),{token:r}=await ap(lp(t,n),e.heartbeatServiceProvider);return{token:r}}{const{token:e}=await n.getToken();return{token:e}}}function Cp(e,t,n,r){const{app:i}=e,s=$f(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Np(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),xp(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>xp(e))}function Tp(e,t){const n=$f(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xp(e){const{app:t}=e,n=$f(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new tp(async()=>{let n;if(n=$f(t).token?await Ep(e,!0):await Ep(e),n.error)throw n.error;if(n.internalError)throw n.internalError},()=>!0,()=>{const e=$f(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;const n=e.token.expireTimeMillis-3e5;return t=Math.min(t,n),Math.max(0,t-Date.now())}return 0},Zf,ep)}(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ip(e,t){const n=$f(e).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(Nb){}}function Np(e){return e.expireTimeMillis-Date.now()>0}function Ap(e){return{token:(t=Sp,qt.encodeString(JSON.stringify(t),!1)),error:e};var t}class Pp{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$f(this.app);for(const t of e)Tp(this.app,t.next);return Promise.resolve()}}const Rp="https://www.google.com/recaptcha/api.js";function Dp(e,t){const n=new en;$f(e).reCAPTCHAState={initialized:n};const r=Lp(e),i=rp(!1);return i?Op(e,t,i,r,n):function(e){const t=document.createElement("script");t.src=Rp,t.onload=e,document.head.appendChild(t)}(()=>{const i=rp(!1);if(!i)throw new Error("no recaptcha");Op(e,t,i,r,n)}),n.promise}function Op(e,t,n,r,i){n.ready(()=>{!function(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{$f(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{$f(e).reCAPTCHAState.succeeded=!1}}),s=$f(e);s.reCAPTCHAState=h(h({},s.reCAPTCHAState),{},{widgetId:i})}(e,t,n,r),i.resolve(n)})}function Lp(e){const t="fire_app_check_".concat(e.name),n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Mp(e){ip(e);const t=$f(e).reCAPTCHAState,n=await t.initialized.promise;return new Promise((t,r)=>{const i=$f(e).reCAPTCHAState;n.ready(()=>{t(n.execute(i.widgetId,{action:"fire_app_check"}))})})}class jp{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;zp(this._throttleData);const t=await Mp(this._app).catch(e=>{throw np.create("recaptcha-error")});if(null===(e=$f(this._app).reCAPTCHAState)||void 0===e||!e.succeeded)throw np.create("recaptcha-error");let n;try{n=await ap(function(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:"".concat(Jf,"/projects/").concat(n,"/apps/").concat(r,":").concat("exchangeRecaptchaV3Token","?key=").concat(i),body:{recaptcha_v3_token:t}}}(this._app,t),this._heartbeatServiceProvider)}catch(Nb){var r,i;if(null!==(r=Nb.code)&&void 0!==r&&r.includes("fetch-status-error"))throw this._throttleData=Fp(Number(null===(i=Nb.customData)||void 0===i?void 0:i.httpStatus),this._throttleData),np.create("initial-throttle",{time:sp(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus});throw Nb}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=Vr(e,"heartbeat"),Dp(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof jp&&this._siteKey===e._siteKey}}function Fp(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};{const n=t?t.backoffCount:0,r=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function zp(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw np.create("throttled",{time:sp(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}const Vp="app-check-internal";zr(new An("app-check",e=>function(e,t){return new Pp(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Vp).initialize()})),zr(new An(Vp,e=>function(e){return{getToken:t=>Ep(e,t),getLimitedUseToken:()=>kp(e),addTokenListener:t=>Cp(e,"INTERNAL",t),removeTokenListener:t=>Tp(e.app,t)}}(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Gr("@firebase/app-check","0.11.0");const Up=Wr({apiKey:"AIzaSyDn7bqDndbozts8-J9Gv6HgCgYJWRzPSHs",authDomain:"japanese-master-e1f13.firebaseapp.com",databaseURL:"https://japanese-master-e1f13-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"japanese-master-e1f13",storageBucket:"japanese-master-e1f13.firebasestorage.app",messagingSenderId:"206529901066",appId:"1:206529901066:web:ad075fb8fc652a2db125f3",measurementId:"G-67CLC24GGN"}),qp=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr(),t=arguments.length>1?arguments[1]:void 0;e=Nn(e);const n=Vr(e,"app-check");if(Xf().initialized||function(){const e=$t(),t=Xf();if(t.initialized=!0,"string"!==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const n=new en;t.token=n,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(_p())}(),bp()&&wp().then(e=>console.log("App Check debug token: ".concat(e,". You will need to add it to your app's App Check settings in the Firebase console for it to work."))),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw np.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){return Gf.set(e,t),Gf.get(e)}(e,h({},Qf));r.activated=!0,r.provider=t,r.cachedTokenPromise=yp(e).then(t=>(t&&Np(t)&&(r.token=t,Ip(e,{token:t.token})),t)),r.isTokenAutoRefreshEnabled=n&&e.automaticDataCollectionEnabled,!e.automaticDataCollectionEnabled&&n&&gp.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh.");r.provider.initialize(e)})(e,t.provider,t.isTokenAutoRefreshEnabled),$f(e).isTokenAutoRefreshEnabled&&Cp(r,"INTERNAL",()=>{})}(Up,{provider:new jp("6LeQYDUsAAAAAH3Vu0NfW1paGCOJXegpjOH-qea6"),isTokenAutoRefreshEnabled:!0}),function(e,t){const n="object"==typeof e?e:Kr(),r="string"==typeof e?e:t||Ao,i=Vr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Jt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ls(e,Hd);const i=tn(t),s=e._getSettings(),o=h(h({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(nn("https://".concat(a)),an("Firestore",!0)),s.host!==Ud&&s.host!==a&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=h(h({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!kn(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=bi.MOCK_USER;else{var c;t=rn(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Di(Ri.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bi(i)}e._authCredentials=new ji(new Li(t,n))}}(i,...e)}return i}(Up)),Bp=async e=>{try{const n=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof If&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Pf).length,n=e.filter(e=>e instanceof Af).length;if(t>1||t>0&&n>0)throw new Di(Ri.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(Qd(qp,"scores"),function(e,t,n){const r=t,i=Tf("where",e);return Af._create(i,r,n)}("category","==",e),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Tf("orderBy",e);return Rf._create(n,t)}("score","desc"),(cs("limit",t=10),Df._create("limit",t,"F"))),r=await function(e){e=ls(e,Wd);const t=ls(e.firestore,Jd),n=Zd(t),r=new Hf(t);return xf(e._query),Fd(n,e._query).then(n=>new qf(t,r,e,n))}(n),i=r.docs.map(e=>h({id:e.id},e.data()));return i}catch(vm){return console.error("Error fetching leaderboard:",vm),[]}var t};var Hp=n(579);const Wp=e=>{let{dataset:t,onEnd:n,onCancel:i,username:s,category:o}=e;const[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(0),[d,f]=(0,r.useState)(0),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!t||0===t.length)return;const e=[...t].sort(()=>.5-Math.random()).slice(0,10).map(e=>{const n=t.filter(t=>t.romaji!==e.romaji).sort(()=>.5-Math.random()).slice(0,3),r=[e,...n].sort(()=>.5-Math.random());return h(h({},e),{},{options:r})});l(e)},[t]);const b=e=>{if(g)return;const t=a[c],r=e===t.romaji;m(e),y(!0);const i=r?d+1:d;r&&f(i);const l=[...v,{romaji:t.romaji,isCorrect:r}];_(l),setTimeout(()=>{c+1<10?(u(c+1),y(!1),m(null)):(o?(console.log("Saving score:",i,"for",o),(async(e,t,n)=>{try{await Wf(Qd(qp,"scores"),{username:e,score:t,category:n,date:(new Date).toISOString()}),console.log("Score saved!")}catch(Nb){console.error("Error adding document: ",Nb)}})(s,i,o)):console.warn("No category provided, score not saved to DB."),n({score:i,total:10,details:l}))},1200)};if(0===a.length)return(0,Hp.jsx)("div",{className:"loading-text",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e42\u0e08\u0e17\u0e22\u0e4c..."});const w=a[c];return(0,Hp.jsxs)("div",{className:"game-card",children:[(0,Hp.jsx)("div",{className:"progress-bar",children:(0,Hp.jsx)("div",{className:"fill",style:{width:"".concat(c/10*100,"%")}})}),(0,Hp.jsx)("div",{className:"question-area",children:(0,Hp.jsx)("div",{className:"hiragana-char",children:w.char||w.character||"?"})}),(0,Hp.jsx)("div",{className:"options-grid",children:w.options.map(e=>{let t="option-btn";return g&&(e.romaji===w.romaji?t+=" correct":e.romaji===p&&(t+=" wrong")),(0,Hp.jsx)("button",{className:t,onClick:()=>b(e.romaji),disabled:g,children:e.romaji},e.romaji)})}),(0,Hp.jsxs)("div",{className:"game-footer",children:[(0,Hp.jsxs)("span",{children:["Score: ",d]}),(0,Hp.jsx)("button",{className:"text-btn",onClick:i,children:"Quit"})]})]})};const Kp=function(e){let{stats:t,onStart:n}=e;const[i,s]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{const e=await Bp();s(e)}catch(vm){console.error("Error fetching leaderboard:",vm)}})()},[]);const o=t.history&&t.history.length>0?t.history[t.history.length-1].accuracy:0;return(0,Hp.jsxs)("div",{className:"dashboard-container",children:[(0,Hp.jsxs)("div",{className:"hall-of-fame-card",children:[(0,Hp.jsx)("div",{className:"hof-header",children:(0,Hp.jsx)("h3",{children:"\ud83c\udfc6 HALL OF FAME (Top 3)"})}),(0,Hp.jsx)("div",{className:"hof-list",children:0===i.length?(0,Hp.jsx)("div",{style:{padding:"10px",color:"#ccc"},children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14..."}):i.map((e,t)=>(0,Hp.jsxs)("div",{className:"hof-item",children:[(0,Hp.jsxs)("span",{className:"rank",children:["#",t+1]}),(0,Hp.jsx)("span",{className:"name",children:e.username}),(0,Hp.jsxs)("span",{className:"xp",children:[e.totalScore," XP"]})]},t))}),(0,Hp.jsx)("div",{className:"hof-footer"})]}),(0,Hp.jsxs)("div",{className:"stats-grid",children:[(0,Hp.jsxs)("div",{className:"stat-card",children:[(0,Hp.jsx)("div",{className:"stat-value",children:t.totalCorrect||0}),(0,Hp.jsx)("div",{className:"stat-label",children:"\u0e04\u0e30\u0e41\u0e19\u0e19\u0e23\u0e27\u0e21\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13"})]}),(0,Hp.jsxs)("div",{className:"stat-card",children:[(0,Hp.jsxs)("div",{className:"stat-value",children:[o,"%"]}),(0,Hp.jsx)("div",{className:"stat-label",children:"\u0e04\u0e27\u0e32\u0e21\u0e41\u0e21\u0e48\u0e19\u0e22\u0e33\u0e25\u0e48\u0e32\u0e2a\u0e38\u0e14"})]})]}),(0,Hp.jsx)("div",{style:{marginTop:"30px"},children:(0,Hp.jsx)("button",{className:"start-btn",onClick:n,children:"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e40\u0e01\u0e21\u0e17\u0e31\u0e19\u0e17\u0e35"})})]})};const Gp=function(e){let{username:t}=e;const[n,i]=(0,r.useState)("dashboard"),[s,o]=(0,r.useState)({totalAttempts:0,totalCorrect:0,history:[],charStats:{}}),a=Lt.filter(e=>""!==e.character);return(0,r.useEffect)(()=>{const e=localStorage.getItem("hiraganaUserStats");e&&o(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("hiraganaUserStats",JSON.stringify(s))},[s]),(0,Hp.jsxs)("div",{className:"app-container",children:[(0,Hp.jsx)("header",{children:(0,Hp.jsxs)("h1",{children:["Hiragana Mastery ",(0,Hp.jsx)("span",{className:"jp-font",children:"\u3072\u3089\u304c\u306a"})]})}),(0,Hp.jsxs)("main",{children:["dashboard"===n&&(0,Hp.jsx)(Kp,{stats:s,onStart:()=>i("game")}),"game"===n&&(0,Hp.jsx)(Wp,{dataset:a,onEnd:e=>{const t=[...s.history,{date:(new Date).toLocaleDateString(),score:e.score,total:e.total,accuracy:Math.round(e.score/e.total*100)}];o({totalAttempts:s.totalAttempts+e.total,totalCorrect:s.totalCorrect+e.score,history:t,charStats:s.charStats}),i("dashboard")},onCancel:()=>i("dashboard"),username:t||"Guest",category:"hiragana"})]})]})},Qp=[{character:"\u30a2",romaji:"a"},{character:"\u30a4",romaji:"i"},{character:"\u30a6",romaji:"u"},{character:"\u30a8",romaji:"e"},{character:"\u30aa",romaji:"o"},{character:"\u30ab",romaji:"ka"},{character:"\u30ad",romaji:"ki"},{character:"\u30af",romaji:"ku"},{character:"\u30b1",romaji:"ke"},{character:"\u30b3",romaji:"ko"},{character:"\u30b5",romaji:"sa"},{character:"\u30b7",romaji:"shi"},{character:"\u30b9",romaji:"su"},{character:"\u30bb",romaji:"se"},{character:"\u30bd",romaji:"so"},{character:"\u30bf",romaji:"ta"},{character:"\u30c1",romaji:"chi"},{character:"\u30c4",romaji:"tsu"},{character:"\u30c6",romaji:"te"},{character:"\u30c8",romaji:"to"},{character:"\u30ca",romaji:"na"},{character:"\u30cb",romaji:"ni"},{character:"\u30cc",romaji:"nu"},{character:"\u30cd",romaji:"ne"},{character:"\u30ce",romaji:"no"},{character:"\u30cf",romaji:"ha"},{character:"\u30d2",romaji:"hi"},{character:"\u30d5",romaji:"fu"},{character:"\u30d8",romaji:"he"},{character:"\u30db",romaji:"ho"},{character:"\u30de",romaji:"ma"},{character:"\u30df",romaji:"mi"},{character:"\u30e0",romaji:"mu"},{character:"\u30e1",romaji:"me"},{character:"\u30e2",romaji:"mo"},{character:"\u30e4",romaji:"ya"},{character:"",romaji:""},{character:"\u30e6",romaji:"yu"},{character:"",romaji:""},{character:"\u30e8",romaji:"yo"},{character:"\u30e9",romaji:"ra"},{character:"\u30ea",romaji:"ri"},{character:"\u30eb",romaji:"ru"},{character:"\u30ec",romaji:"re"},{character:"\u30ed",romaji:"ro"},{character:"\u30ef",romaji:"wa"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"\u30f2",romaji:"wo"},{character:"\u30f3",romaji:"n"},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""},{character:"",romaji:""}];const Yp=function(e){let{username:t}=e;const[n,i]=(0,r.useState)("dashboard"),[s,o]=(0,r.useState)({totalAttempts:0,totalCorrect:0,history:[],charStats:{}}),a=Qp.filter(e=>""!==e.character);return(0,r.useEffect)(()=>{const e=localStorage.getItem("katakanaUserStats");e&&o(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("katakanaUserStats",JSON.stringify(s))},[s]),(0,Hp.jsxs)("div",{className:"app-container",children:[(0,Hp.jsx)("header",{children:(0,Hp.jsxs)("h1",{children:["Katakana Mastery ",(0,Hp.jsx)("span",{className:"jp-font",children:"\u30ab\u30bf\u30ab\u30ca"})]})}),(0,Hp.jsxs)("main",{children:["dashboard"===n&&(0,Hp.jsx)(Kp,{stats:s,onStart:()=>i("game")}),"game"===n&&(0,Hp.jsx)(Wp,{dataset:a,onEnd:e=>{const t=[...s.history,{date:(new Date).toLocaleDateString(),score:e.score,total:e.total,accuracy:Math.round(e.score/e.total*100)}];o({totalAttempts:s.totalAttempts+e.total,totalCorrect:s.totalCorrect+e.score,history:t,charStats:s.charStats}),i("dashboard")},onCancel:()=>i("dashboard"),username:t||"Guest",category:"katakana"})]})]})},$p=[{japanese:"\u308f\u305f\u3057",reading:"watashi",english:"I / Me"},{japanese:"\u3042\u306a\u305f",reading:"anata",english:"You"},{japanese:"\u305b\u3093\u305b\u3044",reading:"sensei",english:"Teacher"},{japanese:"\u304c\u304f\u305b\u3044",reading:"gakusei",english:"Student"},{japanese:"\u304b\u3044\u3057\u3083\u3044\u3093",reading:"kaishain",english:"Company Employee"},{japanese:"\u3057\u3083\u3044\u3093",reading:"shain",english:"Employee"},{japanese:"\u304e\u3093\u3053\u3046\u3044\u3093",reading:"ginkouin",english:"Bank Employee"},{japanese:"\u3044\u3057\u3083",reading:"isha",english:"Doctor"},{japanese:"\u3051\u3093\u304d\u3085\u3046\u3057\u3083",reading:"kenkyuusha",english:"Researcher"},{japanese:"\u3060\u3044\u304c\u304f",reading:"daigaku",english:"University"},{japanese:"\u3073\u3087\u3046\u3044\u3093",reading:"byouin",english:"Hospital"},{japanese:"\u3060\u308c",reading:"dare",english:"Who"},{japanese:"\u3055\u3044",reading:"sai",english:"...years old"},{japanese:"\u306a\u3093\u3055\u3044",reading:"nansai",english:"How old"},{japanese:"\u306f\u3044",reading:"hai",english:"Yes"},{japanese:"\u3044\u3044\u3048",reading:"iie",english:"No"},{japanese:"\u3053\u308c",reading:"kore",english:"This"},{japanese:"\u305d\u308c",reading:"sore",english:"That"},{japanese:"\u3042\u308c",reading:"are",english:"That (over there)"},{japanese:"\u307b\u3093",reading:"hon",english:"Book"},{japanese:"\u3058\u3057\u3087",reading:"jisho",english:"Dictionary"},{japanese:"\u3056\u3063\u3057",reading:"zasshi",english:"Magazine"},{japanese:"\u3057\u3093\u3076\u3093",reading:"shinbun",english:"Newspaper"},{japanese:"\u30ce\u30fc\u30c8",reading:"nooto",english:"Notebook"},{japanese:"\u3066\u3061\u3087\u3046",reading:"techou",english:"Pocket Notebook"},{japanese:"\u3081\u3044\u3057",reading:"meishi",english:"Business Card"},{japanese:"\u30ab\u30fc\u30c9",reading:"kaado",english:"Card"},{japanese:"\u3048\u3093\u3074\u3064",reading:"enpitsu",english:"Pencil"},{japanese:"\u30dc\u30fc\u30eb\u30da\u30f3",reading:"boorupen",english:"Ballpoint Pen"},{japanese:"\u304b\u304e",reading:"kagi",english:"Key"},{japanese:"\u3068\u3051\u3044",reading:"tokei",english:"Watch / Clock"},{japanese:"\u304b\u3055",reading:"kasa",english:"Umbrella"},{japanese:"\u304b\u3070\u3093",reading:"kaban",english:"Bag"},{japanese:"\u30c6\u30ec\u30d3",reading:"terebi",english:"TV"},{japanese:"\u30e9\u30b8\u30aa",reading:"rajio",english:"Radio"},{japanese:"\u30ab\u30e1\u30e9",reading:"kamera",english:"Camera"},{japanese:"\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc",reading:"konpyuutaa",english:"Computer"},{japanese:"\u304f\u308b\u307e",reading:"kuruma",english:"Car"},{japanese:"\u3064\u304f\u3048",reading:"tsukue",english:"Desk"},{japanese:"\u3044\u3059",reading:"isu",english:"Chair"},{japanese:"\u30c1\u30e7\u30b3\u30ec\u30fc\u30c8",reading:"chokoreeto",english:"Chocolate"},{japanese:"\u30b3\u30fc\u30d2\u30fc",reading:"koohii",english:"Coffee"},{japanese:"\u3048\u3044\u3054",reading:"eigo",english:"English Language"},{japanese:"\u306b\u307b\u3093\u3054",reading:"nihongo",english:"Japanese Language"},{japanese:"\u306a\u3093",reading:"nan",english:"What"},{japanese:"\u305d\u3046",reading:"sou",english:"So / True"},{japanese:"\u3053\u3053",reading:"koko",english:"Here"},{japanese:"\u305d\u3053",reading:"soko",english:"There"},{japanese:"\u3042\u305d\u3053",reading:"asoko",english:"Over there"},{japanese:"\u3069\u3053",reading:"doko",english:"Where"},{japanese:"\u304d\u3087\u3046\u3057\u3064",reading:"kyoushitsu",english:"Classroom"},{japanese:"\u3057\u3087\u304f\u3069\u3046",reading:"shokudou",english:"Canteen"},{japanese:"\u3058\u3080\u3057\u3087",reading:"jimusho",english:"Office"},{japanese:"\u304b\u3044\u304e\u3057\u3064",reading:"kaigishitsu",english:"Meeting Room"},{japanese:"\u3046\u3051\u3064\u3051",reading:"uketsuke",english:"Reception"},{japanese:"\u30ed\u30d3\u30fc",reading:"robii",english:"Lobby"},{japanese:"\u3078\u3084",reading:"heya",english:"Room"},{japanese:"\u30c8\u30a4\u30ec",reading:"toire",english:"Toilet"},{japanese:"\u304a\u3066\u3042\u3089\u3044",reading:"otearai",english:"Restroom"},{japanese:"\u304b\u3044\u3060\u3093",reading:"kaidan",english:"Stairs"},{japanese:"\u30a8\u30ec\u30d9\u30fc\u30bf\u30fc",reading:"erebeetaa",english:"Elevator"},{japanese:"\u30a8\u30b9\u30ab\u30ec\u30fc\u30bf\u30fc",reading:"esukareetaa",english:"Escalator"},{japanese:"\u304f\u306b",reading:"kuni",english:"Country"},{japanese:"\u304b\u3044\u3057\u3083",reading:"kaisha",english:"Company"},{japanese:"\u3046\u3061",reading:"uchi",english:"House / Home"},{japanese:"\u3067\u3093\u308f",reading:"denwa",english:"Telephone"},{japanese:"\u304f\u3064",reading:"kutsu",english:"Shoes"},{japanese:"\u30cd\u30af\u30bf\u30a4",reading:"nekutai",english:"Necktie"},{japanese:"\u30ef\u30a4\u30f3",reading:"wain",english:"Wine"},{japanese:"\u305f\u3070\u3053",reading:"tabako",english:"Cigarette"},{japanese:"\u3046\u308a\u3070",reading:"uriba",english:"Department / Counter"},{japanese:"\u3061\u304b",reading:"chika",english:"Basement"},{japanese:"\u304b\u3044",reading:"kai",english:"...floor"},{japanese:"\u306a\u3093\u304c\u3044",reading:"nangai",english:"What floor"},{japanese:"\u3048\u3093",reading:"en",english:"Yen"},{japanese:"\u3044\u304f\u3089",reading:"ikura",english:"How much"},{japanese:"\u3072\u3083\u304f",reading:"hyaku",english:"Hundred"},{japanese:"\u305b\u3093",reading:"sen",english:"Thousand"},{japanese:"\u307e\u3093",reading:"man",english:"Ten Thousand"},{japanese:"\u304a\u306f\u3088\u3046",reading:"ohayou",english:"Good Morning"},{japanese:"\u3053\u3093\u306b\u3061\u306f",reading:"konnichiwa",english:"Hello"},{japanese:"\u3053\u3093\u3070\u3093\u306f",reading:"konbanwa",english:"Good Evening"},{japanese:"\u304a\u3084\u3059\u307f",reading:"oyasumi",english:"Good Night"},{japanese:"\u3055\u3088\u3046\u306a\u3089",reading:"sayounara",english:"Goodbye"},{japanese:"\u3042\u308a\u304c\u3068\u3046",reading:"arigatou",english:"Thank you"},{japanese:"\u3059\u307f\u307e\u305b\u3093",reading:"sumimasen",english:"Excuse me"},{japanese:"\u304a\u306d\u304c\u3044\u3057\u307e\u3059",reading:"onegaishimasu",english:"Please"},{japanese:"\u306f\u3058\u3081\u307e\u3057\u3066",reading:"hajimemashite",english:"Nice to meet you"},{japanese:"\u307f\u305a",reading:"mizu",english:"Water"},{japanese:"\u3054\u306f\u3093",reading:"gohan",english:"Rice / Meal"},{japanese:"\u30d1\u30f3",reading:"pan",english:"Bread"},{japanese:"\u305f\u307e\u3054",reading:"tamago",english:"Egg"},{japanese:"\u306b\u304f",reading:"niku",english:"Meat"},{japanese:"\u3055\u304b\u306a",reading:"sakana",english:"Fish"},{japanese:"\u3084\u3055\u3044",reading:"yasai",english:"Vegetable"},{japanese:"\u304f\u3060\u3082\u306e",reading:"kudamono",english:"Fruit"},{japanese:"\u304a\u3061\u3083",reading:"ocha",english:"Tea / Green Tea"},{japanese:"\u3053\u3046\u3061\u3083",reading:"koucha",english:"Black Tea"},{japanese:"\u304e\u3085\u3046\u306b\u3085\u3046",reading:"gyuunyuu",english:"Milk"},{japanese:"\u30b8\u30e5\u30fc\u30b9",reading:"juusu",english:"Juice"},{japanese:"\u30d3\u30fc\u30eb",reading:"biiru",english:"Beer"},{japanese:"\u3055\u3051",reading:"sake",english:"Sake / Alcohol"},{japanese:"\u3066\u304c\u307f",reading:"tegami",english:"Letter"},{japanese:"\u30ec\u30dd\u30fc\u30c8",reading:"repooto",english:"Report"},{japanese:"\u3057\u3083\u3057\u3093",reading:"shashin",english:"Photograph"},{japanese:"\u307f\u305b",reading:"mise",english:"Shop / Store"},{japanese:"\u306b\u308f",reading:"niwa",english:"Garden"},{japanese:"\u3057\u3085\u304f\u3060\u3044",reading:"shukudai",english:"Homework"},{japanese:"\u3068\u3082\u3060\u3061",reading:"tomodachi",english:"Friend"}];const Xp=function(e){let{username:t}=e;const[n,i]=(0,r.useState)("dashboard"),[s,o]=(0,r.useState)({totalAttempts:0,totalCorrect:0,history:[],charStats:{}}),a=$p.map(e=>({character:e.japanese,romaji:e.english,original:e}));return(0,r.useEffect)(()=>{const e=localStorage.getItem("vocabUserStats");e&&o(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("vocabUserStats",JSON.stringify(s))},[s]),(0,Hp.jsxs)("div",{className:"app-container",children:[(0,Hp.jsx)("header",{children:(0,Hp.jsxs)("h1",{children:["Vocabulary Challenge ",(0,Hp.jsx)("span",{className:"jp-font",children:"\u5358\u8a9e"})]})}),(0,Hp.jsxs)("main",{children:["dashboard"===n&&(0,Hp.jsx)(Kp,{stats:s,onStart:()=>i("game")}),"game"===n&&(0,Hp.jsx)(Wp,{dataset:a,onEnd:e=>{const t=[...s.history,{date:(new Date).toLocaleDateString(),score:e.score,total:e.total,accuracy:Math.round(e.score/e.total*100)}];o({totalAttempts:s.totalAttempts+e.total,totalCorrect:s.totalCorrect+e.score,history:t,charStats:s.charStats}),i("dashboard")},onCancel:()=>i("dashboard"),username:t||"Guest",category:"vocab"})]})]})};const Jp=function(){return(0,Hp.jsxs)("div",{className:"app-container",children:[(0,Hp.jsxs)("header",{children:[(0,Hp.jsx)(xt,{to:"/",className:"back-link",children:"\u2190 \u0e01\u0e25\u0e31\u0e1a\u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"}),(0,Hp.jsxs)("h1",{children:["Hiragana Chart ",(0,Hp.jsx)("span",{className:"jp-font",children:"\u3072\u3089\u304c\u306a"})]})]}),(0,Hp.jsx)("main",{className:"chart-container",children:(0,Hp.jsx)("div",{className:"character-grid",children:Lt.map((e,t)=>(0,Hp.jsx)("div",{className:"char-card ".concat(e.character?"":"empty"),children:e.character?(0,Hp.jsxs)(Hp.Fragment,{children:[(0,Hp.jsx)("div",{className:"char-jp",children:e.character}),(0,Hp.jsx)("div",{className:"char-ro",children:e.romaji})]}):(0,Hp.jsx)("div",{className:"char-empty"})},t))})})]})};const Zp=function(){return(0,Hp.jsxs)("div",{className:"app-container",children:[(0,Hp.jsxs)("header",{children:[(0,Hp.jsx)(xt,{to:"/",className:"back-link",children:"\u2190 \u0e01\u0e25\u0e31\u0e1a\u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"}),(0,Hp.jsxs)("h1",{children:["Katakana Chart ",(0,Hp.jsx)("span",{className:"jp-font",children:"\u30ab\u30bf\u30ab\u30ca"})]})]}),(0,Hp.jsx)("main",{className:"chart-container",children:(0,Hp.jsx)("div",{className:"character-grid",children:Qp.map((e,t)=>(0,Hp.jsx)("div",{className:"char-card ".concat(e.character?"":"empty"),children:e.character?(0,Hp.jsxs)(Hp.Fragment,{children:[(0,Hp.jsx)("div",{className:"char-jp",children:e.character}),(0,Hp.jsx)("div",{className:"char-ro",children:e.romaji})]}):(0,Hp.jsx)("div",{className:"char-empty"})},t))})})]})},em="@firebase/database",tm="1.1.0";let nm="";function rm(e){nm=e}class im{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:yn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sm{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return bn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const om=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new im(t)}}catch(Nb){}return new sm},am=om("localStorage"),lm=om("sessionStorage"),cm=new Vn("@firebase/database"),um=function(){let e=1;return function(){return e++}}(),hm=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,zt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Tn;n.update(t);const r=n.digest();return qt.encodeByteArray(r)},dm=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=dm.apply(null,n):e+="object"===typeof n?vn(n):n,e+=" "}return e};let fm=null,pm=!0;const mm=function(e,t){zt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(cm.logLevel=Ln.VERBOSE,fm=cm.log.bind(cm),t&&lm.set("logging_enabled",!0)):"function"===typeof e?fm=e:(fm=null,lm.remove("logging_enabled"))},gm=function(){if(!0===pm&&(pm=!1,null===fm&&!0===lm.get("logging_enabled")&&mm(!0)),fm){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=dm.apply(null,t);fm(r)}},ym=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];gm(e,...n)}},vm=function(){const e="FIREBASE INTERNAL ERROR: "+dm(...arguments);cm.error(e)},_m=function(){const e="FIREBASE FATAL ERROR: ".concat(dm(...arguments));throw cm.error(e),new Error(e)},bm=function(){const e="FIREBASE WARNING: "+dm(...arguments);cm.warn(e)},wm=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Sm="[MIN_NAME]",Em="[MAX_NAME]",km=function(e,t){if(e===t)return 0;if(e===Sm||t===Em)return-1;if(t===Sm||e===Em)return 1;{const n=Rm(e),r=Rm(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Cm=function(e,t){return e===t?0:e<t?-1:1},Tm=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+vn(t))},xm=function(e){if("object"!==typeof e||null===e)return vn(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=vn(t[r]),n+=":",n+=xm(e[t[r]]);return n+="}",n},Im=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Nm(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Am=function(e){zt(!wm(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Pm=new RegExp("^-?(0*)\\d{1,10}$"),Rm=function(e){if(Pm.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Dm=function(e){try{e()}catch(Nb){setTimeout(()=>{const t=Nb.stack||"";throw bm("Exception was thrown by user callback.",t),Nb},Math.floor(0))}},Om=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Lm{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Ur(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){bm('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Mm{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(gm("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bm(e)}}class jm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}jm.OWNER="owner";const Fm="5",zm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vm="ac",Um="websocket",qm="long_polling";class Bm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=am.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&am.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Hm(e,t,n){let r;if(zt("string"===typeof t,"typeof type must == string"),zt("object"===typeof n,"typeof params must == object"),t===Um)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==qm)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Nm(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class Wm{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;bn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Gt(this.counters_)}}const Km={},Gm={};function Qm(e){const t=e.toString();return Km[t]||(Km[t]=new Wm),Km[t]}class Ym{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Dm(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const $m="start";class Xm{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ym(e),this.stats_=Qm(t),this.urlFn=e=>(this.appCheckToken&&(e[Vm]=this.appCheckToken),Hm(t,qm,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ym(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(hn()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jm(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===$m)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[$m]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Fm,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Vm]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&zm.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xm.forceAllow_=!0}static forceDisallow(){Xm.forceDisallow_=!0}static isAvailable(){return!hn()&&(!!Xm.forceAllow_||!Xm.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=vn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ht(t),r=Im(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(hn())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=vn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Jm{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,hn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=um(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Jm.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Nb){gm("frame writing exception"),Nb.stack&&gm(Nb.stack),gm(Nb)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gm("No IE domain setting required")}catch(Nb){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){hn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{gm("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Nb){}},Math.floor(1))}}let Zm=null;"undefined"!==typeof MozWebSocket?Zm=MozWebSocket:"undefined"!==typeof WebSocket&&(Zm=WebSocket);class eg{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ym(this.connId),this.stats_=Qm(t),this.connURL=eg.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Fm,!hn()&&"undefined"!==typeof location&&location.hostname&&zm.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Vm]=r),i&&(s.p=i),Hm(e,Um,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,am.set("previous_websocket_failure",!0);try{let e;if(hn()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Fm,"/").concat(nm,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/hiragana-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Zm(this.connURL,[],e)}catch(Nb){this.log_("Error instantiating WebSocket.");const t=Nb.message||Nb.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){eg.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Zm&&!eg.forceDisallow_}static previouslyFailed(){return am.isInMemoryStorage||!0===am.get("previous_websocket_failure")}markConnectionHealthy(){am.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=yn(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(zt(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=vn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Im(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Nb){this.log_("Exception thrown from WebSocket.send():",Nb.message||Nb.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}eg.responsesRequiredToBeHealthy=2,eg.healthyTimeout=3e4;class tg{static get ALL_TRANSPORTS(){return[Xm,eg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=eg&&eg.isAvailable();let n=t&&!eg.previouslyFailed();if(e.webSocketOnly&&(t||bm("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[eg];else{const e=this.transports_=[];for(const t of tg.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);tg.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tg.globalTransportInitialized_=!1;class ng{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ym("c:"+this.id+":"),this.transportManager_=new tg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Om(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Tm("t",e),n=Tm("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Tm("t",e),n=Tm("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Tm("t",e);if("d"in e){const n=e.d;if("h"===t){const e=h({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?vm("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Fm!==n&&bm("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Om(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Om(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(am.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class rg{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ig{constructor(e){this.allowedEvents_=e,this.listeners_={},zt(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){zt(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class sg extends ig{static getInstance(){return new sg}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||cn()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return zt("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class og{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ag(){return new og("")}function lg(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function cg(e){return e.pieces_.length-e.pieceNum_}function ug(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new og(e.pieces_,t)}function hg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function dg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function fg(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new og(t,0)}function pg(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof og)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new og(n,0)}function mg(e){return e.pieceNum_>=e.pieces_.length}function gg(e,t){const n=lg(e),r=lg(t);if(null===n)return t;if(n===r)return gg(ug(e),ug(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function yg(e,t){if(cg(e)!==cg(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function vg(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(cg(e)>cg(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class _g{constructor(e,t){this.errorPrefix_=t,this.parts_=dg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=In(this.parts_[n]);bg(this)}}function bg(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wg(e))}function wg(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Sg extends ig{static getInstance(){return new Sg}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return zt("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Eg=1e3;class kg extends rg{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=kg.nextPersistentConnectionId_++,this.log_=ym("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!hn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sg.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&sg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(vn(i)),zt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new en,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),zt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),zt(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;kg.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&bn(e,"w")){const n=wn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();bm("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=_n(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=_n(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),zt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vn(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):vm("Unrecognized action received from server: "+vn(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){zt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Eg),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+kg.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){zt(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?gm("getToken() completed but was canceled"):(gm("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new ng(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{bm(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(vm){this.log_("Failed to get token: "+vm),s||(this.repoInfo_.nodeAdmin&&bm(vm),a())}}}interrupt(e){gm("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gm("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Sn(this.interruptReasons_)&&(this.reconnectDelay_=Eg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>xm(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new og(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){gm("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){gm("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";hn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+nm.replace(/\./g,"-")]=1,cn()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=sg.getInstance().currentlyOnline();return Sn(this.interruptReasons_)&&e}}kg.nextPersistentConnectionId_=0,kg.nextConnectionId_=0;class Cg{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Cg(e,t)}}class Tg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Cg(Sm,e),r=new Cg(Sm,t);return 0!==this.compare(n,r)}minPost(){return Cg.MIN}}let xg;class Ig extends Tg{static get __EMPTY_NODE(){return xg}static set __EMPTY_NODE(e){xg=e}compare(e,t){return km(e.name,t.name)}isDefinedOn(e){throw Vt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Cg.MIN}maxPost(){return new Cg(Em,xg)}makePost(e,t){return zt("string"===typeof e,"KeyIndex indexValue must always be a string."),new Cg(e,xg)}toString(){return".key"}}const Ng=new Ig;class Ag{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Pg{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Pg.RED,this.left=null!=r?r:Rg.EMPTY_NODE,this.right=null!=i?i:Rg.EMPTY_NODE}copy(e,t,n,r,i){return new Pg(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rg.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Rg.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Pg.RED=!0,Pg.BLACK=!1;class Rg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rg.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Rg(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pg.BLACK,null,null))}remove(e){return new Rg(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pg.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ag(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ag(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ag(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ag(this.root_,null,this.comparator_,!0,e)}}function Dg(e,t){return km(e.name,t.name)}function Og(e,t){return km(e,t)}let Lg;Rg.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Pg(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Mg=function(e){return"number"===typeof e?"number:"+Am(e):"string:"+e},jg=function(e){if(e.isLeafNode()){const t=e.val();zt("string"===typeof t||"number"===typeof t||"object"===typeof t&&bn(t,".sv"),"Priority must be a string or number.")}else zt(e===Lg||e.isEmpty(),"priority of unexpected type.");zt(e===Lg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Fg,zg,Vg;class Ug{static set __childrenNodeConstructor(e){Fg=e}static get __childrenNodeConstructor(){return Fg}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ug.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,zt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),jg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ug(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ug.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return mg(e)?this:".priority"===lg(e)?this.priorityNode_:Ug.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ug.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=lg(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(zt(".priority"!==n||1===cg(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ug.__childrenNodeConstructor.EMPTY_NODE.updateChild(ug(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Mg(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Am(this.value_):this.value_,this.lazyHash_=hm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ug.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ug.__childrenNodeConstructor?-1:(zt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Ug.VALUE_TYPE_ORDER.indexOf(t),i=Ug.VALUE_TYPE_ORDER.indexOf(n);return zt(r>=0,"Unknown leaf type: "+t),zt(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ug.VALUE_TYPE_ORDER=["object","boolean","number","string"];const qg=new class extends Tg{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?km(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Cg.MIN}maxPost(){return new Cg(Em,new Ug("[PRIORITY-POST]",Vg))}makePost(e,t){const n=zg(e);return new Cg(t,new Ug("[PRIORITY-POST]",n))}toString(){return".priority"}},Bg=Math.log(2);class Hg{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Bg,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wg=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Pg(a,o.node,Pg.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Pg(a,o.node,Pg.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Pg(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Pg.BLACK):(a(r,Pg.BLACK),a(r,Pg.RED))}return s}(new Hg(e.length));return new Rg(r||t,s)};let Kg;const Gg={};class Qg{static get Default(){return zt(Gg&&qg,"ChildrenNode.ts has not been loaded"),Kg=Kg||new Qg({".priority":Gg},{".priority":qg}),Kg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=wn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Rg?t:null}hasIndex(e){return bn(this.indexSet_,e.toString())}addIndex(e,t){zt(e!==Ng,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Cg.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Wg(n,e.getCompare()):Gg;const a=e.toString(),l=h({},this.indexSet_);l[a]=e;const c=h({},this.indexes_);return c[a]=s,new Qg(c,l)}addToIndexes(e,t){const n=En(this.indexes_,(n,r)=>{const i=wn(this.indexSet_,r);if(zt(i,"Missing index implementation for "+r),n===Gg){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Cg.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Wg(n,i.getCompare())}return Gg}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Cg(e.name,r))),i.insert(e,e.node)}});return new Qg(n,this.indexSet_)}removeFromIndexes(e,t){const n=En(this.indexes_,n=>{if(n===Gg)return n;{const r=t.get(e.name);return r?n.remove(new Cg(e.name,r)):n}});return new Qg(n,this.indexSet_)}}let Yg;class $g{static get EMPTY_NODE(){return Yg||(Yg=new $g(new Rg(Og),null,Qg.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&jg(this.priorityNode_),this.children_.isEmpty()&&zt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yg}updatePriority(e){return this.children_.isEmpty()?this:new $g(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Yg:t}}getChild(e){const t=lg(e);return null===t?this:this.getImmediateChild(t).getChild(ug(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(zt(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Cg(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Yg:this.priorityNode_;return new $g(r,s,i)}}updateChild(e,t){const n=lg(e);if(null===n)return t;{zt(".priority"!==lg(e)||1===cg(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ug(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(qg,(s,o)=>{t[s]=o.val(e),n++,i&&$g.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Mg(this.getPriority().val())+":"),this.forEachChild(qg,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":hm(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Cg(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Cg(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Cg(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,Cg.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,Cg.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xg?-1:0}withIndex(e){if(e===Ng||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new $g(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ng||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(qg),n=t.getIterator(qg);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Ng?null:this.indexMap_.get(e.toString())}}$g.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Xg=new class extends $g{constructor(){super(new Rg(Og),$g.EMPTY_NODE,Qg.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $g.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Cg,{MIN:{value:new Cg(Sm,$g.EMPTY_NODE)},MAX:{value:new Cg(Em,Xg)}}),Ig.__EMPTY_NODE=$g.EMPTY_NODE,Ug.__childrenNodeConstructor=$g,Lg=Xg,function(e){Vg=e}(Xg);function Jg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return $g.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),zt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Ug(e,Jg(t))}if(e instanceof Array){let n=$g.EMPTY_NODE;return Nm(e,(t,r)=>{if(bn(e,t)&&"."!==t.substring(0,1)){const e=Jg(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Jg(t))}{const n=[];let r=!1;if(Nm(e,(e,t)=>{if("."!==e.substring(0,1)){const i=Jg(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Cg(e,i)))}}),0===n.length)return $g.EMPTY_NODE;const i=Wg(n,Dg,e=>e.name,Og);if(r){const e=Wg(n,qg.getCompare());return new $g(i,Jg(t),new Qg({".priority":e},{".priority":qg}))}return new $g(i,Jg(t),Qg.Default)}}!function(e){zg=e}(Jg);class Zg extends Tg{constructor(e){super(),this.indexPath_=e,zt(!mg(e)&&".priority"!==lg(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?km(e.name,t.name):i}makePost(e,t){const n=Jg(e),r=$g.EMPTY_NODE.updateChild(this.indexPath_,n);return new Cg(t,r)}maxPost(){const e=$g.EMPTY_NODE.updateChild(this.indexPath_,Xg);return new Cg(Em,e)}toString(){return dg(this.indexPath_,0).join("/")}}const ey=new class extends Tg{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?km(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Cg.MIN}maxPost(){return Cg.MAX}makePost(e,t){const n=Jg(e);return new Cg(t,n)}toString(){return".value"}};function ty(e){return{type:"value",snapshotNode:e}}function ny(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ry(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function iy(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class sy{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){zt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(ry(t,o)):zt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(ny(t,n)):s.trackChildChange(iy(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(qg,(e,r)=>{t.hasChild(e)||n.trackChildChange(ry(e,r))}),t.isLeafNode()||t.forEachChild(qg,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(iy(t,r,i))}else n.trackChildChange(ny(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$g.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class oy{constructor(e){this.indexedFilter_=new sy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=oy.getStartPost_(e),this.endPost_=oy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Cg(t,n))||(n=$g.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=$g.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority($g.EMPTY_NODE);const i=this;return t.forEachChild(qg,(e,t)=>{i.matches(new Cg(e,t))||(r=r.updateImmediateChild(e,$g.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ay{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new oy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Cg(t,n))||(n=$g.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=$g.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=$g.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority($g.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,$g.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;zt(o.numChildren()===this.limit_,"");const a=new Cg(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(iy(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(ry(t,e));const n=o.updateImmediateChild(t,$g.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(ny(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(ry(l.name,l.node)),i.trackChildChange(ny(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,$g.EMPTY_NODE)):e}}class ly{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qg}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return zt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return zt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sm}hasEnd(){return this.endSet_}getIndexEndValue(){return zt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return zt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Em}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return zt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qg}copy(){const e=new ly;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cy(e,t){const n=e.copy();return n.index_=t,n}function uy(e){const t={};if(e.isDefault())return t;let n;if(e.index_===qg?n="$priority":e.index_===ey?n="$value":e.index_===Ng?n="$key":(zt(e.index_ instanceof Zg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=vn(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=vn(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+vn(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=vn(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+vn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function hy(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==qg&&(t.i=e.index_.toString()),t}class dy extends rg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(zt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=ym("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=dy.getListenId_(e,n),o={};this.listens_[s]=o;const a=uy(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),wn(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=dy.getListenId_(e,t);delete this.listens_[n]}get(e){const t=uy(e._queryParams),n=e._path.toString(),r=new en;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=yn(a.responseText)}catch(Nb){bm("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&bm("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class fy{constructor(){this.rootNode_=$g.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function py(){return{value:null,children:new Map}}function my(e,t,n){if(mg(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=lg(t);e.children.has(r)||e.children.set(r,py());my(e.children.get(r),t=ug(t),n)}}function gy(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{gy(r,new og(t.toString()+"/"+e),n)})}class yy{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=h({},e);return this.last_&&Nm(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class vy{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new yy(e);const n=1e4+2e4*Math.random();Om(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Nm(e,(e,r)=>{r>0&&bn(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Om(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _y;function by(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_y||(_y={}));class wy{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=_y.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mg(this.path)){if(null!=this.affectedTree.value)return zt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new og(e));return new wy(ag(),t,this.revert)}}return zt(lg(this.path)===e,"operationForChild called for unrelated child."),new wy(ug(this.path),this.affectedTree,this.revert)}}class Sy{constructor(e,t){this.source=e,this.path=t,this.type=_y.LISTEN_COMPLETE}operationForChild(e){return mg(this.path)?new Sy(this.source,ag()):new Sy(this.source,ug(this.path))}}class Ey{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=_y.OVERWRITE}operationForChild(e){return mg(this.path)?new Ey(this.source,ag(),this.snap.getImmediateChild(e)):new Ey(this.source,ug(this.path),this.snap)}}class ky{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=_y.MERGE}operationForChild(e){if(mg(this.path)){const t=this.children.subtree(new og(e));return t.isEmpty()?null:t.value?new Ey(this.source,ag(),t.value):new ky(this.source,ag(),t)}return zt(lg(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ky(this.source,ug(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cy{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mg(e))return this.isFullyInitialized()&&!this.filtered_;const t=lg(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ty{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xy(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Vt("Should only compare child_ events.");const r=new Cg(t.childName,t.snapshotNode),i=new Cg(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Iy(e,t){return{eventCache:e,serverCache:t}}function Ny(e,t,n,r){return Iy(new Cy(t,n,r),e.serverCache)}function Ay(e,t,n,r){return Iy(e.eventCache,new Cy(t,n,r))}function Py(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ry(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Dy;class Oy{static fromObject(e){let t=new Oy(null);return Nm(e,(e,n)=>{t=t.set(new og(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Dy||(Dy=new Rg(Cm)),Dy);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ag(),value:this.value};if(mg(e))return null;{const n=lg(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ug(e),t);if(null!=i){return{path:pg(new og(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(mg(e))return this;{const t=lg(e),n=this.children.get(t);return null!==n?n.subtree(ug(e)):new Oy(null)}}set(e,t){if(mg(e))return new Oy(t,this.children);{const n=lg(e),r=(this.children.get(n)||new Oy(null)).set(ug(e),t),i=this.children.insert(n,r);return new Oy(this.value,i)}}remove(e){if(mg(e))return this.children.isEmpty()?new Oy(null):new Oy(null,this.children);{const t=lg(e),n=this.children.get(t);if(n){const r=n.remove(ug(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Oy(null):new Oy(this.value,i)}return this}}get(e){if(mg(e))return this.value;{const t=lg(e),n=this.children.get(t);return n?n.get(ug(e)):null}}setTree(e,t){if(mg(e))return t;{const n=lg(e),r=(this.children.get(n)||new Oy(null)).setTree(ug(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Oy(this.value,i)}}fold(e){return this.fold_(ag(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(pg(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ag(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(mg(e))return null;{const r=lg(e),i=this.children.get(r);return i?i.findOnPath_(ug(e),pg(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ag(),t)}foreachOnPath_(e,t,n){if(mg(e))return this;{this.value&&n(t,this.value);const r=lg(e),i=this.children.get(r);return i?i.foreachOnPath_(ug(e),pg(t,r),n):new Oy(null)}}foreach(e){this.foreach_(ag(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(pg(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Ly{constructor(e){this.writeTree_=e}static empty(){return new Ly(new Oy(null))}}function My(e,t,n){if(mg(t))return new Ly(new Oy(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=gg(i,t);return s=s.updateChild(o,n),new Ly(e.writeTree_.set(i,s))}{const r=new Oy(n),i=e.writeTree_.setTree(t,r);return new Ly(i)}}}function jy(e,t,n){let r=e;return Nm(n,(e,n)=>{r=My(r,pg(t,e),n)}),r}function Fy(e,t){if(mg(t))return Ly.empty();{const n=e.writeTree_.setTree(t,new Oy(null));return new Ly(n)}}function zy(e,t){return null!=Vy(e,t)}function Vy(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(gg(n.path,t)):null}function Uy(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(qg,(e,n)=>{t.push(new Cg(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new Cg(e,n.value))}),t}function qy(e,t){if(mg(t))return e;{const n=Vy(e,t);return new Ly(null!=n?new Oy(n):e.writeTree_.subtree(t))}}function By(e){return e.writeTree_.isEmpty()}function Hy(e,t){return Wy(ag(),e.writeTree_,t)}function Wy(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(zt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Wy(pg(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(pg(e,".priority"),r)),n}}function Ky(e,t){return sv(t,e)}function Gy(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);zt(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Qy(t,r.path)?i=!1:vg(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=$y(e.allWrites,Yy,ag()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Fy(e.visibleWrites,r.path);else{Nm(r.children,t=>{e.visibleWrites=Fy(e.visibleWrites,pg(r.path,t))})}return!0}return!1}function Qy(e,t){if(e.snap)return vg(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&vg(pg(e.path,n),t))return!0;return!1}function Yy(e){return e.visible}function $y(e,t,n){let r=Ly.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)vg(n,e)?(t=gg(n,e),r=My(r,t,s.snap)):vg(e,n)&&(t=gg(e,n),r=My(r,ag(),s.snap.getChild(t)));else{if(!s.children)throw Vt("WriteRecord should have .snap or .children");if(vg(n,e))t=gg(n,e),r=jy(r,t,s.children);else if(vg(e,n))if(t=gg(e,n),mg(t))r=jy(r,ag(),s.children);else{const e=wn(s.children,lg(t));if(e){const n=e.getChild(ug(t));r=My(r,ag(),n)}}}}}return r}function Xy(e,t,n,r,i){if(r||i){const s=qy(e.visibleWrites,t);if(!i&&By(s))return n;if(i||null!=n||zy(s,ag())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(vg(e.path,t)||vg(t,e.path))};return Hy($y(e.allWrites,s,t),n||$g.EMPTY_NODE)}return null}{const r=Vy(e.visibleWrites,t);if(null!=r)return r;{const r=qy(e.visibleWrites,t);if(By(r))return n;if(null!=n||zy(r,ag())){return Hy(r,n||$g.EMPTY_NODE)}return null}}}function Jy(e,t,n,r){return Xy(e.writeTree,e.treePath,t,n,r)}function Zy(e,t){return function(e,t,n){let r=$g.EMPTY_NODE;const i=Vy(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(qg,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=qy(e.visibleWrites,t);return n.forEachChild(qg,(e,t)=>{const n=Hy(qy(i,new og(e)),t);r=r.updateImmediateChild(e,n)}),Uy(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Uy(qy(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function ev(e,t,n,r){return function(e,t,n,r,i){zt(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=pg(t,n);if(zy(e.visibleWrites,s))return null;{const t=qy(e.visibleWrites,s);return By(t)?i.getChild(n):Hy(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function tv(e,t){return function(e,t){return Vy(e.visibleWrites,t)}(e.writeTree,pg(e.treePath,t))}function nv(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=qy(e.visibleWrites,t),c=Vy(l,ag());if(null!=c)a=c;else{if(null==n)return[];a=Hy(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function rv(e,t,n){return function(e,t,n,r){const i=pg(t,n),s=Vy(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Hy(qy(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function iv(e,t){return sv(pg(e.treePath,t),e.writeTree)}function sv(e,t){return{treePath:e,writeTree:t}}class ov{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;zt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),zt(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,iy(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ry(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ny(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Vt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,iy(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const av=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class lv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Cy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rv(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ry(this.viewCache_),i=nv(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function cv(e,t,n,r,i){const s=new ov;let o,a;if(n.type===_y.OVERWRITE){const l=n;l.source.fromUser?o=dv(e,t,l.path,l.snap,r,i,s):(zt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!mg(l.path),o=hv(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===_y.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=pg(n,r);fv(t,lg(c))&&(a=dv(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=pg(n,r);fv(t,lg(c))||(a=dv(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):(zt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=mv(e,t,l.path,l.children,r,i,a,s))}else if(n.type===_y.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=tv(r,n))return t;{const a=new lv(r,t,i),l=t.eventCache.getNode();let c;if(mg(n)||".priority"===lg(n)){let n;if(t.serverCache.isFullyInitialized())n=Jy(r,Ry(t));else{const e=t.serverCache.getNode();zt(e instanceof $g,"serverChildren would be complete if leaf node"),n=Zy(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=lg(n);let u=rv(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,ug(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,$g.EMPTY_NODE,ug(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Jy(r,Ry(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=tv(r,ag()),Ny(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=tv(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(mg(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return hv(e,t,n,l.getNode().getChild(n),i,s,a,o);if(mg(n)){let r=new Oy(null);return l.getNode().forEachChild(Ng,(e,t)=>{r=r.set(new og(e),t)}),mv(e,t,n,r,i,s,a,o)}return t}{let c=new Oy(null);return r.foreach((e,t)=>{const r=pg(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),mv(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==_y.LISTEN_COMPLETE)throw Vt("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Ay(t,s.getNode(),s.isFullyInitialized()||mg(n),s.isFiltered());return uv(e,o,n,r,av,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Py(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ty(Py(t)))}}(t,o,l),{viewCache:o,changes:l}}function uv(e,t,n,r,i,s){const o=t.eventCache;if(null!=tv(r,n))return t;{let a,l;if(mg(n))if(zt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ry(t),i=Zy(r,n instanceof $g?n:$g.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Jy(r,Ry(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=lg(n);if(".priority"===c){zt(1===cg(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=ev(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=ug(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=ev(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=rv(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Ny(t,a,o.isFullyInitialized()||mg(n),e.filter.filtersNodes())}}function hv(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(mg(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=lg(n);if(!l.isCompleteForPath(n)&&cg(n)>1)return t;const i=ug(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,av,null)}const h=Ay(t,c,l.isFullyInitialized()||mg(n),u.filtersNodes());return uv(e,h,n,i,new lv(i,h,s),a)}function dv(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new lv(i,t,s);if(mg(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ny(t,c,!0,e.filter.filtersNodes());else{const i=lg(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ny(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=ug(n),c=a.getNode().getImmediateChild(i);let h;if(mg(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===hg(s)&&e.getChild(fg(s)).isEmpty()?e:e.updateChild(s,r):$g.EMPTY_NODE}if(c.equals(h))l=t;else{l=Ny(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function fv(e,t){return e.eventCache.isCompleteForChild(t)}function pv(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function mv(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=mg(n)?r:new Oy(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=pv(0,t.serverCache.getNode().getImmediateChild(n),r);c=hv(e,c,new og(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=pv(0,t.serverCache.getNode().getImmediateChild(n),r);c=hv(e,c,new og(n),l,i,s,o,a)}}),c}class gv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new sy(n.getIndex()),i=(s=n).loadsAllData()?new sy(s.getIndex()):s.hasLimit()?new ay(s):new oy(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode($g.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode($g.EMPTY_NODE,a.getNode(),null),u=new Cy(l,o.isFullyInitialized(),r.filtersNodes()),h=new Cy(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Iy(h,u),this.eventGenerator_=new Ty(this.query_)}get query(){return this.query_}}function yv(e,t){const n=Ry(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!mg(t)&&!n.getImmediateChild(lg(t)).isEmpty())?n.getChild(t):null}function vv(e){return 0===e.eventRegistrations_.length}function _v(e,t,n){const r=[];if(n){zt(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function bv(e,t,n,r){t.type===_y.MERGE&&null!==t.source.queryId&&(zt(Ry(e.viewCache_),"We should always have a full cache before handling merges"),zt(Py(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=cv(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,zt(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),zt(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),zt(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,wv(e,s.changes,s.viewCache.eventCache.getNode(),null)}function wv(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),xy(e,i,"child_removed",t,r,n),xy(e,i,"child_added",t,r,n),xy(e,i,"child_moved",s,r,n),xy(e,i,"child_changed",t,r,n),xy(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Sv,Ev;class kv{constructor(){this.views=new Map}}function Cv(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return zt(null!=s,"SyncTree gave us an op for an invalid query."),bv(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(bv(s,t,n,r));return i}}function Tv(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Jy(n,i?r:null),s=!1;e?s=!0:r instanceof $g?(e=Zy(n,r),s=!1):(e=$g.EMPTY_NODE,s=!1);const o=Iy(new Cy(e,s,!1),new Cy(r,i,!1));return new gv(t,o)}return o}function xv(e,t,n,r,i,s){const o=Tv(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(qg,(e,t)=>{r.push(ny(e,t))});return n.isFullyInitialized()&&r.push(ty(n.getNode())),wv(e,r,n.getNode(),t)}(o,n)}function Iv(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=Dv(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(_v(c,n,r)),vv(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(_v(t,n,r)),vv(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!Dv(e)&&s.push(new(zt(Sv,"Reference.ts has not been loaded"),Sv)(t._repo,t._path)),{removed:s,events:o}}function Nv(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Av(e,t){let n=null;for(const r of e.views.values())n=n||yv(r,t);return n}function Pv(e,t){if(t._queryParams.loadsAllData())return Ov(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Rv(e,t){return null!=Pv(e,t)}function Dv(e){return null!=Ov(e)}function Ov(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Lv=1;class Mv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Oy(null),this.pendingWriteTree_={visibleWrites:Ly.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jv(e,t,n,r,i){return function(e,t,n,r,i){zt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=My(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Hv(e,new Ey({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Gy(e.pendingWriteTree_,t)){let t=new Oy(null);return null!=r.snap?t=t.set(ag(),!0):Nm(r.children,e=>{t=t.set(new og(e),!0)}),Hv(e,new wy(r.path,t,n))}return[]}function zv(e,t,n){return Hv(e,new Ey({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Vv(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Rv(o,t))){const l=Iv(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>Dv(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Dv(t)){return[Ov(t)]}{let e=[];return t&&(e=Nv(t)),Nm(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Gv(e,r);e.listenProvider_.startListening(Zv(i),Qv(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Zv(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(Yv(t));e.listenProvider_.stopListening(Zv(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Yv(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Uv(e,t,n,r){const i=$v(e,r);if(null!=i){const r=Xv(i),s=r.path,o=r.queryId,a=gg(s,t);return Jv(e,s,new Ey(by(o),a,n))}return[]}function qv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=gg(e,i);s=s||Av(t,n),o=o||Dv(t)});let a,l=e.syncPointTree_.get(i);if(l?(o=o||Dv(l),s=s||Av(l,ag())):(l=new kv,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=$g.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=Av(t,ag());n&&(s=s.updateImmediateChild(e,n))})}const c=Rv(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Yv(t);zt(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Lv++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=xv(l,t,n,Ky(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=Pv(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Qv(e,t),s=Gv(e,n),o=e.listenProvider_.startListening(Zv(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)zt(!Dv(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!mg(e)&&t&&Dv(t))return[Ov(t).query];{let e=[];return t&&(e=e.concat(Nv(t).map(e=>e.query))),Nm(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Zv(r),Qv(e,r))}}return o}(e,t,n))}return u}function Bv(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=Av(n,gg(e,t));if(r)return r});return Xy(r,t,i,n,!0)}function Hv(e,t){return Wv(t,e.syncPointTree_,null,Ky(e.pendingWriteTree_,ag()))}function Wv(e,t,n,r){if(mg(e.path))return Kv(e,t,n,r);{const i=t.get(ag());null==n&&null!=i&&(n=Av(i,ag()));let s=[];const o=lg(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=iv(r,o);s=s.concat(Wv(a,l,e,t))}return i&&(s=s.concat(Cv(i,e,r,n))),s}}function Kv(e,t,n,r){const i=t.get(ag());null==n&&null!=i&&(n=Av(i,ag()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=iv(r,t),l=e.operationForChild(t);l&&(s=s.concat(Kv(l,i,o,a)))}),i&&(s=s.concat(Cv(i,e,r,n))),s}function Gv(e,t){const n=t.query,r=Qv(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||$g.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=$v(e,n);if(r){const n=Xv(r),i=n.path,s=n.queryId,o=gg(i,t);return Jv(e,i,new Sy(by(s),o))}return[]}(e,n._path,r):function(e,t){return Hv(e,new Sy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Vv(e,n,null,r)}}}}function Qv(e,t){const n=Yv(t);return e.queryToTagMap.get(n)}function Yv(e){return e._path.toString()+"$"+e._queryIdentifier}function $v(e,t){return e.tagToQueryMap.get(t)}function Xv(e){const t=e.indexOf("$");return zt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new og(e.substr(0,t))}}function Jv(e,t,n){const r=e.syncPointTree_.get(t);zt(r,"Missing sync point for query tag that we're tracking");return Cv(r,n,Ky(e.pendingWriteTree_,t),null)}function Zv(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(zt(Ev,"Reference.ts has not been loaded"),Ev)(e._repo,e._path):e}class e_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new e_(t)}node(){return this.node_}}class t_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=pg(this.path_,e);return new t_(this.syncTree_,t)}node(){return Bv(this.syncTree_,this.path_)}}const n_=function(e,t,n){return e&&"object"===typeof e?(zt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?r_(e[".sv"],t,n):"object"===typeof e[".sv"]?i_(e[".sv"],t):void zt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},r_=function(e,t,n){if("timestamp"===e)return n.timestamp;zt(!1,"Unexpected server value: "+e)},i_=function(e,t,n){e.hasOwnProperty("increment")||zt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&zt(!1,"Unexpected increment value: "+r);const i=t.node();if(zt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},s_=function(e,t,n,r){return a_(t,new t_(n,e),r)},o_=function(e,t,n){return a_(e,new e_(t),n)};function a_(e,t,n){const r=e.getPriority().val(),i=n_(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=n_(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Ug(s,Jg(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Ug(i))),r.forEachChild(qg,(e,r)=>{const i=a_(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class l_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function c_(e,t){let n=t instanceof og?t:new og(t),r=e,i=lg(n);for(;null!==i;){const e=wn(r.node.children,i)||{children:{},childCount:0};r=new l_(i,r,e),n=ug(n),i=lg(n)}return r}function u_(e){return e.node.value}function h_(e,t){e.node.value=t,g_(e)}function d_(e){return e.node.childCount>0}function f_(e,t){Nm(e.node.children,(n,r)=>{t(new l_(n,e,r))})}function p_(e,t,n,r){n&&!r&&t(e),f_(e,e=>{p_(e,t,!0,r)}),n&&r&&t(e)}function m_(e){return new og(null===e.parent?e.name:m_(e.parent)+"/"+e.name)}function g_(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===u_(e)&&!d_(e)}(n),i=bn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,g_(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,g_(e))}(e.parent,e.name,e)}const y_=/[\[\].#$\/\u0000-\u001F\u007F]/,v_=/[\[\].#$\u0000-\u001F\u007F]/,__=10485760,b_=function(e){return"string"===typeof e&&0!==e.length&&!y_.test(e)},w_=function(e){return"string"===typeof e&&0!==e.length&&!v_.test(e)},S_=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!wm(e)||e&&"object"===typeof e&&bn(e,".sv")},E_=function(e,t,n){const r=n instanceof og?new _g(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+wg(r));if("function"===typeof t)throw new Error(e+"contains a function "+wg(r)+" with contents = "+t.toString());if(wm(t))throw new Error(e+"contains "+t.toString()+" "+wg(r));if("string"===typeof t&&t.length>__/3&&In(t)>__)throw new Error(e+"contains a string greater than "+__+" utf8 bytes "+wg(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Nm(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!b_(t)))throw new Error(e+" contains an invalid key ("+t+") "+wg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=In(t),bg(e)}(r,t),E_(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=In(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+wg(r)+" in addition to actual children.")}},k_=function(e,t,n,r){if((!r||void 0!==n)&&!w_(n))throw new Error(xn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},C_=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!b_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),w_(e)}(n))throw new Error(xn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class T_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function x_(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||yg(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function I_(e,t,n){x_(e,n),A_(e,e=>yg(e,t))}function N_(e,t,n){x_(e,n),A_(e,e=>vg(e,t)||vg(t,e))}function A_(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(P_(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function P_(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();fm&&gm("event: "+n.toString()),Dm(r)}}}const R_="repo_interrupt";class D_{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=py(),this.transactionQueueTree_=new l_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function O_(e,t,n){if(e.stats_=Qm(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new dy(e.repoInfo_,(t,n,r,i)=>{j_(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>F_(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vn(n)}catch(Nb){throw new Error("Invalid authOverride provided: "+Nb)}}e.persistentConnection_=new kg(e.repoInfo_,t,(t,n,r,i)=>{j_(e,t,n,r,i)},t=>{F_(e,t)},t=>{!function(e,t){Nm(t,(t,n)=>{z_(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return Gm[n]||(Gm[n]=t()),Gm[n]}(e.repoInfo_,()=>new vy(e.stats_,e.server_)),e.infoData_=new fy,e.infoSyncTree_=new Mv({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=zv(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),z_(e,"connected",!1),e.serverSyncTree_=new Mv({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);N_(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function L_(e){const t=e.infoData_.getNode(new og(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function M_(e){return(t=(t={timestamp:L_(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function j_(e,t,n,r,i){e.dataUpdateCount++;const s=new og(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=En(n,e=>Jg(e));o=function(e,t,n,r){const i=$v(e,r);if(i){const r=Xv(i),s=r.path,o=r.queryId,a=gg(s,t),l=Oy.fromObject(n);return Jv(e,s,new ky(by(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Jg(n);o=Uv(e.serverSyncTree_,s,t,i)}else if(r){const t=En(n,e=>Jg(e));o=function(e,t,n){const r=Oy.fromObject(n);return Hv(e,new ky({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Jg(n);o=zv(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=K_(e,s)),N_(e.eventQueue_,a,o)}function F_(e,t){z_(e,"connected",t),!1===t&&function(e){B_(e,"onDisconnectEvents");const t=M_(e),n=py();gy(e.onDisconnect_,ag(),(r,i)=>{const s=s_(r,i,e.serverSyncTree_,t);my(n,r,s)});let r=[];gy(n,ag(),(t,n)=>{r=r.concat(zv(e.serverSyncTree_,t,n));const i=X_(e,t);K_(e,i)}),e.onDisconnect_=py(),N_(e.eventQueue_,ag(),r)}(e)}function z_(e,t,n){const r=new og("/.info/"+t),i=Jg(n);e.infoData_.updateSnapshot(r,i);const s=zv(e.infoSyncTree_,r,i);N_(e.eventQueue_,r,s)}function V_(e){return e.nextWriteId_++}function U_(e,t,n){let r;r=".info"===lg(t._path)?Vv(e.infoSyncTree_,t,n):Vv(e.serverSyncTree_,t,n),I_(e.eventQueue_,t._path,r)}function q_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(R_)}function B_(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];gm(t,...r)}function H_(e,t,n){return Bv(e.serverSyncTree_,t,n)||$g.EMPTY_NODE}function W_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||$_(e,t),u_(t)){const n=Q_(e,t);zt(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=H_(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];zt(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=gg(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{B_(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Fv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();$_(e,c_(e.transactionQueueTree_,t)),W_(e,e.transactionQueueTree_),N_(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Dm(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{bm("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}K_(e,t)}},o)}(e,m_(t),n)}else d_(t)&&f_(t,t=>{W_(e,t)})}function K_(e,t){const n=G_(e,t),r=m_(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=gg(n,s.path);let c,u=!1;if(zt(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(Fv(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(Fv(e.serverSyncTree_,s.currentWriteId,!0));else{const n=H_(e,s.path,o);s.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){E_("transaction failed: Data returned ",r,s.path);let t=Jg(r);"object"===typeof r&&null!=r&&bn(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=M_(e),c=o_(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=V_(e),o.splice(o.indexOf(a),1),i=i.concat(jv(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Fv(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",i=i.concat(Fv(e.serverSyncTree_,s.currentWriteId,!0))}N_(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(c),!1,null))))}$_(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Dm(r[a]);W_(e,e.transactionQueueTree_)}(e,Q_(e,n),r),r}function G_(e,t){let n,r=e.transactionQueueTree_;for(n=lg(t);null!==n&&void 0===u_(r);)r=c_(r,n),n=lg(t=ug(t));return r}function Q_(e,t){const n=[];return Y_(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Y_(e,t,n){const r=u_(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);f_(t,t=>{Y_(e,t,n)})}function $_(e,t){const n=u_(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,h_(t,n.length>0?n:void 0)}f_(t,t=>{$_(e,t)})}function X_(e,t){const n=m_(G_(e,t)),r=c_(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{J_(e,t)}),J_(e,r),p_(r,t=>{J_(e,t)}),n}function J_(e,t){const n=u_(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(zt(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(zt(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Fv(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?h_(t,void 0):n.length=s+1,N_(e.eventQueue_,m_(t),i);for(let e=0;e<r.length;e++)Dm(r[e])}}const Z_=function(e,t){const n=eb(e),r=n.namespace;"firebase.com"===n.domain&&_m(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||_m("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bm("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Bm(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new og(n.pathString)}},eb=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Nb){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bm("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},tb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class nb{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+vn(this.snapshot.exportVal())}}class rb{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ib{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return zt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class sb{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return mg(this._path)?null:hg(this._path)}get ref(){return new lb(this._repo,this._path)}get _queryIdentifier(){const e=hy(this._queryParams),t=xm(e);return"{}"===t?"default":t}get _queryObject(){return hy(this._queryParams)}isEqual(e){if(!((e=Nn(e))instanceof sb))return!1;const t=this._repo===e._repo,n=yg(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function ob(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function ab(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ng){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Sm)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Em)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===qg){if(null!=t&&!S_(t)||null!=n&&!S_(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(zt(e.getIndex()instanceof Zg||e.getIndex()===ey,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class lb extends sb{constructor(e,t){super(e,t,new ly,!1)}get parent(){const e=fg(this._path);return null===e?null:new lb(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cb{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new og(e),n=hb(this.ref,e);return new cb(this._node.getChild(t),n,qg)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new cb(n,hb(this.ref,t),qg)))}hasChild(e){const t=new og(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ub(e,t){return(e=Nn(e))._checkNotDeleted("ref"),void 0!==t?hb(e._root,t):e._root}function hb(e,t){var n,r,i,s;return null===lg((e=Nn(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),k_(n,r,i,s)):k_("child","path",t,!1),new lb(e._repo,pg(e._path,t))}class db{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new nb("value",this,new cb(e.snapshotNode,new lb(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new rb(this,e,t):null}matches(e){return e instanceof db&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class fb{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new rb(this,e,t):null}createEvent(e,t){zt(null!=e.childName,"Child events should have a childName.");const n=hb(new lb(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new nb(e.type,this,new cb(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof fb&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function pb(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{U_(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new ib(n,s||void 0),a="value"===t?new db(o):new fb(t,o);return function(e,t,n){let r;r=".info"===lg(t._path)?qv(e.infoSyncTree_,t,n):qv(e.serverSyncTree_,t,n),I_(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>U_(e._repo,e,a)}function mb(e,t,n,r){return pb(e,"value",t,n,r)}class gb{}class yb extends gb{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new sb(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class vb extends gb{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){ob(e,"orderByChild");const t=new og(this._path);if(mg(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Zg(t),r=cy(e._queryParams,n);return ab(r),new sb(e._repo,e._path,r,!0)}}!function(e){zt(!Sv,"__referenceConstructor has already been defined"),Sv=e}(lb),function(e){zt(!Ev,"__referenceConstructor has already been defined"),Ev=e}(lb);const _b={};let bb=!1;function wb(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||_m("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gm("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=Z_(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/hiragana-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=Z_(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new jm(jm.OWNER):new Mm(e.name,e.options,t);C_("Invalid Firebase Database URL",l),mg(l.path)||_m("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=_b[t.name];i||(i={},_b[t.name]=i);let s=i[e.toURLString()];s&&_m("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new D_(e,bb,n,r),i[e.toURLString()]=s,s}(c,e,u,new Lm(e,n));return new Sb(h,e)}class Sb{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lb(this._repo,ag())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=_b[t];n&&n[e.key]===e||_m("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),q_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_m("Cannot call "+e+" on a deleted database.")}}function Eb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr(),t=arguments.length>1?arguments[1]:void 0;const n=Vr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Jt("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Nn(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&kn(r,s.repoInfo_.emulatorOptions))return;_m("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&_m('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new jm(jm.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:rn(r.mockUserToken,e.app.options.projectId);o=new jm(t)}tn(t)&&(nn(t),an("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=tn(t.substring(0,i));e.repoInfo_=new Bm(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}(n,...e)}return n}kg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},kg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){rm(Hr),zr(new An("database",(e,t)=>{let{instanceIdentifier:n}=t;return wb(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),Gr(em,tm,e),Gr(em,tm,"esm2020")}();const kb=function(){const[e,t]=(0,r.useState)("hiragana"),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{o(!0);const t=function(e){let t=Nn(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}(ub(Eb(),"scores/".concat(e)),function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return k_("orderByChild","path",e,!1),new vb(e)}("score"),function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yb(e)}(10)),n=mb(t,e=>{const t=e.val(),n=[];t&&(Object.keys(t).forEach(e=>{n.push(t[e])}),n.sort((e,t)=>t.score-e.score)),i(n),o(!1)},e=>{console.error("Error reading data:",e),o(!1)});return()=>n()},[e]),(0,Hp.jsxs)("div",{className:"leaderboard-card",children:[(0,Hp.jsxs)("div",{className:"leaderboard-header",children:[(0,Hp.jsx)("h2",{children:"\ud83c\udfc6 Hall of Fame (Real Time)"}),(0,Hp.jsx)("p",{children:"\u0e2a\u0e38\u0e14\u0e22\u0e2d\u0e14\u0e1c\u0e39\u0e49\u0e1e\u0e34\u0e0a\u0e34\u0e15\u0e20\u0e32\u0e29\u0e32\u0e0d\u0e35\u0e48\u0e1b\u0e38\u0e48\u0e19"})]}),(0,Hp.jsxs)("div",{className:"leaderboard-tabs",children:[(0,Hp.jsx)("button",{className:"hiragana"===e?"active":"",onClick:()=>t("hiragana"),children:"Hiragana"}),(0,Hp.jsx)("button",{className:"katakana"===e?"active":"",onClick:()=>t("katakana"),children:"Katakana"}),(0,Hp.jsx)("button",{className:"vocab"===e?"active":"",onClick:()=>t("vocab"),children:"Vocab"})]}),(0,Hp.jsx)("div",{className:"ranking-list",children:s?(0,Hp.jsx)("p",{className:"loading-text",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e10\u0e32\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25..."}):0===n.length?(0,Hp.jsxs)("div",{style:{padding:"20px",color:"#999"},children:[(0,Hp.jsx)("p",{children:"\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e43\u0e19\u0e2b\u0e21\u0e27\u0e14\u0e19\u0e35\u0e49"}),(0,Hp.jsx)("small",{children:"\u0e21\u0e32\u0e40\u0e25\u0e48\u0e19\u0e40\u0e1b\u0e47\u0e19\u0e04\u0e19\u0e41\u0e23\u0e01\u0e01\u0e31\u0e19\u0e40\u0e16\u0e2d\u0e30!"})]}):n.map((e,t)=>(0,Hp.jsxs)("div",{className:"rank-item rank-".concat(t+1),children:[(0,Hp.jsxs)("div",{className:"rank-number",children:[0===t&&"\ud83e\udd47",1===t&&"\ud83e\udd48",2===t&&"\ud83e\udd49",t>2&&"#".concat(t+1)]}),(0,Hp.jsx)("div",{className:"rank-info",children:(0,Hp.jsx)("span",{className:"rank-name",children:e.username})}),(0,Hp.jsxs)("div",{className:"rank-score",children:[e.score," ",(0,Hp.jsx)("small",{children:"XP"})]})]},t))})]})};const Cb=function(e){let{onLogin:t}=e;const[n,i]=(0,r.useState)("");return(0,Hp.jsx)("div",{className:"app-container",style:{display:"flex",alignItems:"center",height:"100vh"},children:(0,Hp.jsxs)("div",{className:"game-card",style:{width:"100%",maxWidth:"400px"},children:[(0,Hp.jsx)("h1",{className:"jp-font",style:{fontSize:"3rem",marginBottom:"10px"},children:"\u65e5\u672c\u8a9e"}),(0,Hp.jsx)("h2",{style:{marginBottom:"30px"},children:"Japanese Master"}),(0,Hp.jsx)("p",{style:{color:"#7f8c8d",marginBottom:"20px"},children:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e43\u0e2a\u0e48\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e23\u0e34\u0e48\u0e21\u0e1c\u0e08\u0e0d\u0e20\u0e31\u0e22"}),(0,Hp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&t(n.trim())},children:[(0,Hp.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"\u0e0a\u0e37\u0e48\u0e2d\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13 (\u0e40\u0e0a\u0e48\u0e19 NoteKung)",style:{width:"100%",padding:"15px",fontSize:"1.2rem",borderRadius:"12px",border:"2px solid #e2e8f0",marginBottom:"20px",textAlign:"center"},maxLength:15,required:!0}),(0,Hp.jsx)("button",{type:"submit",className:"start-btn",children:"\ud83d\ude80 \u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19"})]})]})})};function Tb(){return(0,Hp.jsxs)("div",{className:"dashboard-container",children:[(0,Hp.jsx)(kb,{}),(0,Hp.jsxs)("header",{children:[(0,Hp.jsx)("h1",{children:"Japanese Master \ud83c\uddef\ud83c\uddf5"}),(0,Hp.jsx)("p",{children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e1a\u0e17\u0e40\u0e23\u0e35\u0e22\u0e19\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e23\u0e34\u0e48\u0e21\u0e40\u0e01\u0e47\u0e1a\u0e04\u0e30\u0e41\u0e19\u0e19!"})]}),(0,Hp.jsxs)("div",{className:"menu-section",children:[(0,Hp.jsx)("h3",{children:"\ud83c\udfae \u0e41\u0e1a\u0e1a\u0e1d\u0e36\u0e01\u0e2b\u0e31\u0e14 (Games)"}),(0,Hp.jsxs)("div",{className:"button-list",children:[(0,Hp.jsx)(xt,{to:"/hiragana-game",className:"menu-item",children:"\u0e1d\u0e36\u0e01\u0e2e\u0e34\u0e23\u0e32\u0e07\u0e32\u0e19\u0e30 (Hiragana)"}),(0,Hp.jsx)(xt,{to:"/katakana-game",className:"menu-item",children:"\u0e1d\u0e36\u0e01\u0e04\u0e32\u0e15\u0e32\u0e04\u0e32\u0e19\u0e30 (Katakana)"}),(0,Hp.jsx)(xt,{to:"/vocabulary-game",className:"menu-item",children:"\u0e17\u0e32\u0e22\u0e04\u0e33\u0e28\u0e31\u0e1e\u0e17\u0e4c (Vocabulary)"})]})]}),(0,Hp.jsxs)("div",{className:"menu-section",children:[(0,Hp.jsx)("h3",{children:"\ud83d\udcd6 \u0e15\u0e32\u0e23\u0e32\u0e07\u0e15\u0e31\u0e27\u0e2d\u0e31\u0e01\u0e29\u0e23 (Charts)"}),(0,Hp.jsxs)("div",{className:"button-list",children:[(0,Hp.jsx)(xt,{to:"/chart-hiragana",className:"menu-item secondary",children:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e2e\u0e34\u0e23\u0e32\u0e07\u0e32\u0e19\u0e30"}),(0,Hp.jsx)(xt,{to:"/chart-katakana",className:"menu-item secondary",children:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e04\u0e32\u0e15\u0e32\u0e04\u0e32\u0e19\u0e30"})]})]})]})}const xb=function(){const[e,t]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("username");e&&t(e)},[]);const n=e=>{localStorage.setItem("username",e),t(e)};return e?(0,Hp.jsx)(Ct,{children:(0,Hp.jsxs)("div",{className:"app-container",children:[(0,Hp.jsxs)("nav",{style:{display:"flex",justifyContent:"space-between",padding:"10px 20px",background:"#f0f2f5",marginBottom:"20px"},children:[(0,Hp.jsx)("div",{children:(0,Hp.jsx)(xt,{to:"/",style:{textDecoration:"none",fontWeight:"bold",color:"#333"},children:"\ud83c\udfe0 \u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"})}),(0,Hp.jsxs)("div",{children:["\ud83d\udc64 ",e," | ",(0,Hp.jsx)("button",{onClick:()=>{localStorage.removeItem("username"),t(null)},style:{cursor:"pointer",border:"none",background:"none",color:"red"},children:"\u0e2d\u0e2d\u0e01"})]})]}),(0,Hp.jsxs)(Ke,{children:[(0,Hp.jsx)(He,{path:"/",element:(0,Hp.jsx)(Tb,{})}),(0,Hp.jsx)(He,{path:"/hiragana-game",element:(0,Hp.jsx)(Gp,{username:e})}),(0,Hp.jsx)(He,{path:"/vocabulary-game",element:(0,Hp.jsx)(Xp,{username:e})}),(0,Hp.jsx)(He,{path:"/chart-hiragana",element:(0,Hp.jsx)(Jp,{})})," // \u2705 \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35 //",(0,Hp.jsx)(He,{path:"/chart-katakana",element:(0,Hp.jsx)(Zp,{})})," // \u2705 \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35 //",(0,Hp.jsx)(He,{path:"/katakana-game",element:(0,Hp.jsx)(Yp,{username:e})})]})]})}):(0,Hp.jsx)(Cb,{onLogin:n})},Ib=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)})};s.createRoot(document.getElementById("root")).render((0,Hp.jsx)(r.StrictMode,{children:(0,Hp.jsx)(xb,{})})),Ib()})();
//# sourceMappingURL=main.7165f031.js.map